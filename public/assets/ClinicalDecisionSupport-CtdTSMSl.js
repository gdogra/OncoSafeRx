import{r as n,j as e}from"./index-8LC8IQKY.js";import{C as c}from"./Card-D3HCI77k.js";import{B as j}from"./brain-CKq3hGqe.js";import{T as v}from"./target-BsLO2_W8.js";import{U as E}from"./users-CyD4O_24.js";import{C as N}from"./circle-check-big-CYsdojUB.js";import{C}from"./clock-cnhIl4So.js";import{S as k}from"./shield-BY4b8Nc2.js";import{F as I}from"./file-text-CyEOTfEa.js";import{T as B}from"./triangle-alert-BOEc2-VO.js";import{L as H}from"./lightbulb-9klnHjAb.js";import{A as M}from"./activity-BXSagPiR.js";import{a as L}from"./App-oj_FpO4B.js";import"./createLucideIcon-DlukwGQd.js";const G=({patientProfile:i,currentMedications:d,proposedTreatment:o,onRecommendationAccept:h})=>{const[a,g]=n.useState([]),[l,r]=n.useState(!1),[m,w]=n.useState("all"),[x,R]=n.useState("all"),[u,A]=n.useState(new Set),S=async()=>{r(!0),await new Promise(t=>setTimeout(t,2e3));const s=[];i.demographics.age>65&&s.push({id:"1",type:"dosing",priority:"high",confidence:90,title:"Geriatric Dosing Adjustment",description:"Consider reduced initial dosing due to advanced age",rationale:"Elderly patients have reduced clearance and increased sensitivity to chemotherapy",evidence:["Geriatric Oncology Guidelines","Age-adjusted dosing studies"],actions:["Reduce initial dose by 20-25%","Monitor closely for toxicity"],monitoring:["CBC weekly","Comprehensive metabolic panel","Performance status"],timeline:"Before treatment initiation",cost:"low",efficacy:85,safety:95}),!i.genetics.tested&&i.diagnosis.primary.includes("breast")&&s.push({id:"2",type:"genetic_testing",priority:"high",confidence:95,title:"BRCA Testing Recommended",description:"Genetic testing for BRCA1/2 mutations indicated",rationale:"Results will guide treatment selection and family counseling",evidence:["NCCN Guidelines","ASCO/SGO Guidelines"],actions:["Order BRCA1/2 testing","Consider genetic counseling"],alternatives:["Germline vs somatic testing","Multigene panel"],timeline:"Before treatment decision",cost:"medium",efficacy:90,safety:100}),i.labValues.creatinine&&i.labValues.creatinine>1.5&&s.push({id:"3",type:"dosing",priority:"critical",confidence:95,title:"Renal Dose Adjustment Required",description:"Significant renal impairment detected - dose adjustment needed",rationale:"Elevated creatinine indicates reduced drug clearance",evidence:["Kidney Disease Guidelines","Pharmacokinetic studies"],actions:["Calculate CrCl using Cockcroft-Gault","Adjust dose per renal function"],monitoring:["Creatinine before each cycle","Electrolytes","Urine output"],timeline:"Immediate",cost:"low",efficacy:80,safety:98}),i.diagnosis.biomarkers?.HER2==="positive"&&s.push({id:"4",type:"drug_selection",priority:"high",confidence:98,title:"HER2-Targeted Therapy Indicated",description:"HER2-positive status indicates benefit from targeted therapy",rationale:"HER2-targeted agents significantly improve outcomes in HER2+ cancers",evidence:["Multiple RCTs","FDA approval studies","Real-world evidence"],actions:["Add trastuzumab to regimen","Consider pertuzumab combination"],alternatives:["Trastuzumab emtansine (T-DM1)","Trastuzumab deruxtecan"],monitoring:["ECHO/MUGA before treatment","Cardiac function q3months"],timeline:"Treatment planning",cost:"high",efficacy:95,safety:88}),d.includes("warfarin")&&o?.includes("fluorouracil")&&s.push({id:"5",type:"contraindication",priority:"critical",confidence:92,title:"Major Drug Interaction Detected",description:"Warfarin and 5-FU interaction increases bleeding risk",rationale:"5-FU inhibits warfarin metabolism leading to increased anticoagulation",evidence:["Drug interaction studies","Case reports"],actions:["Consider alternative anticoagulant","If unavoidable, reduce warfarin dose"],alternatives:["Apixaban","Rivaroxaban","Enoxaparin"],monitoring:["INR weekly","Signs of bleeding","CBC"],timeline:"Before treatment start",cost:"medium",efficacy:90,safety:70}),i.preferences.qualityOfLife&&i.preferences.qualityOfLife<70&&s.push({id:"6",type:"alternative",priority:"medium",confidence:85,title:"Consider Less Intensive Regimen",description:"Poor performance status suggests need for modified approach",rationale:"Quality of life preservation is priority given current functional status",evidence:["QOL studies","Palliative care guidelines"],actions:["Discuss goals of care","Consider single-agent therapy"],alternatives:["Palliative care consultation","Best supportive care"],timeline:"Treatment planning",cost:"low",efficacy:60,safety:85}),i.labValues.bilirubin&&i.labValues.bilirubin>2&&s.push({id:"7",type:"dosing",priority:"high",confidence:90,title:"Hepatic Dose Adjustment Required",description:"Elevated bilirubin requires dose modification",rationale:"Hepatic impairment reduces drug metabolism",evidence:["Hepatic impairment studies","FDA guidelines"],actions:["Reduce dose by 50% for moderate impairment","Consider alternative"],monitoring:["LFTs before each cycle","Bilirubin trend"],timeline:"Before treatment",cost:"low",efficacy:75,safety:92}),g(s),r(!1)};n.useEffect(()=>{i&&S()},[i,d,o]);const p=n.useMemo(()=>a.filter(s=>!(m!=="all"&&s.type!==m||x!=="all"&&s.priority!==x)),[a,m,x]),y=n.useMemo(()=>{const s={critical:0,high:0,medium:0,low:0};return a.forEach(t=>s[t.priority]++),s},[a]),b=s=>{switch(s){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},D=s=>{switch(s){case"drug_selection":return e.jsx(v,{className:"w-5 h-5"});case"dosing":return e.jsx(M,{className:"w-5 h-5"});case"monitoring":return e.jsx(C,{className:"w-5 h-5"});case"alternative":return e.jsx(H,{className:"w-5 h-5"});case"contraindication":return e.jsx(B,{className:"w-5 h-5"});case"genetic_testing":return e.jsx(I,{className:"w-5 h-5"});default:return e.jsx(j,{className:"w-5 h-5"})}},T=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"AI Clinical Decision Support"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Precision Medicine"})]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Analyzing patient data..."})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.critical}),e.jsx("div",{className:"text-sm text-gray-500",children:"Critical"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y.high}),e.jsx("div",{className:"text-sm text-gray-500",children:"High Priority"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.medium}),e.jsx("div",{className:"text-sm text-gray-500",children:"Medium Priority"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:a.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Recommendations"})]})]})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(E,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient Profile Summary"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Demographics"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[i.demographics.age,"y ",i.demographics.gender]}),e.jsxs("div",{children:[i.demographics.weight,"kg, ",i.demographics.height,"cm"]}),i.demographics.ethnicity&&e.jsx("div",{children:i.demographics.ethnicity})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Diagnosis"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("div",{children:i.diagnosis.primary}),i.diagnosis.stage&&e.jsxs("div",{children:["Stage ",i.diagnosis.stage]}),i.diagnosis.biomarkers&&e.jsx("div",{className:"mt-2",children:Object.entries(i.diagnosis.biomarkers).map(([s,t])=>e.jsxs("span",{className:"inline-block mr-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[s,": ",t]},s))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Labs"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[i.labValues.creatinine&&e.jsxs("div",{children:["Creatinine: ",i.labValues.creatinine," mg/dL"]}),i.labValues.bilirubin&&e.jsxs("div",{children:["Bilirubin: ",i.labValues.bilirubin," mg/dL"]}),i.labValues.hemoglobin&&e.jsxs("div",{children:["Hemoglobin: ",i.labValues.hemoglobin," g/dL"]})]})]})]})]}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Recommendations (",p.length,")"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:m,onChange:s=>w(s.target.value),className:"text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"drug_selection",children:"Drug Selection"}),e.jsx("option",{value:"dosing",children:"Dosing"}),e.jsx("option",{value:"monitoring",children:"Monitoring"}),e.jsx("option",{value:"alternative",children:"Alternatives"}),e.jsx("option",{value:"contraindication",children:"Contraindications"}),e.jsx("option",{value:"genetic_testing",children:"Genetic Testing"})]}),e.jsxs("select",{value:x,onChange:s=>R(s.target.value),className:"text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full border ${b(s.priority)}`,children:[D(s.type),e.jsx("span",{className:"text-sm font-medium",children:T(s.type)})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${b(s.priority)}`,children:s.priority.toUpperCase()}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Confidence: ",s.confidence,"%"]})]}),e.jsx("button",{onClick:()=>{A(t=>new Set(t).add(s.id)),h(s)},disabled:u.has(s.id),className:`px-4 py-2 text-sm rounded-lg transition-colors ${u.has(s.id)?"bg-green-600 text-white cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"}`,children:u.has(s.id)?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Accepted"})]}):"Accept"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-700",children:s.description}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.rationale})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Recommended Actions"}),e.jsx("ul",{className:"space-y-1",children:s.actions.map((t,f)=>e.jsxs("li",{className:"text-sm flex items-start space-x-2",children:[e.jsx(N,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t})]},f))})]}),e.jsxs("div",{children:[s.alternatives&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Alternatives"}),e.jsx("div",{className:"space-x-2",children:s.alternatives.map(t=>e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:t},t))})]}),s.monitoring&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Monitoring"}),e.jsx("ul",{className:"space-y-1",children:s.monitoring.map((t,f)=>e.jsxs("li",{className:"text-sm flex items-start space-x-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t})]},f))})]})]})]}),(s.efficacy||s.safety)&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[s.efficacy&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Expected Efficacy"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.efficacy}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.efficacy,"%"]})]}),s.safety&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Safety Profile"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.safety}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.safety,"%"]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Evidence:"}),e.jsx("span",{children:s.evidence.join(", ")})]})})]})]},s.id))}),p.length===0&&!l&&e.jsx(c,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Recommendations"}),e.jsx("p",{className:"text-gray-500",children:a.length===0?"No clinical recommendations generated for this patient profile":"No recommendations match the selected filters"})]})})]})},X=()=>{const{currentPatient:i}=L(),d={demographics:{age:62,gender:"female",weight:68,height:165,ethnicity:"Caucasian"},diagnosis:{primary:"Invasive ductal carcinoma, breast",stage:"IIIA",histology:"Invasive ductal carcinoma",biomarkers:{ER:"positive",PR:"positive",HER2:"positive","Ki-67":"25%"},prognosis:"good"},medicalHistory:{comorbidities:["Type 2 diabetes","Hypertension","Osteoporosis"],previousTreatments:["Metformin","Lisinopril","Alendronate"],allergies:["Penicillin","Sulfa drugs"],familyHistory:["Breast cancer (mother)","Ovarian cancer (sister)"]},labValues:{creatinine:1.1,bilirubin:.8,ast:28,alt:32,plateletCount:18e4,neutrophilCount:4200,hemoglobin:12.5},genetics:{tested:!0,variants:{BRCA1:"wildtype",BRCA2:"wildtype",CYP2D6:"*1/*2",CYP2C19:"*1/*17"},phenotypes:{CYP2D6:"Intermediate metabolizer",CYP2C19:"Rapid metabolizer"}},preferences:{qualityOfLife:85,treatmentGoals:["Cure","Maintain quality of life","Minimal side effects"],contraindications:["Pregnancy","Severe cardiac dysfunction"]}},o=["Metformin 1000mg BID","Lisinopril 10mg daily","Alendronate 70mg weekly"],h="Trastuzumab + Pertuzumab + Docetaxel + Carboplatin (TCHP regimen)",a=r=>{console.log("Accepted recommendation:",r),alert(`✅ Recommendation "${r.title}" has been accepted and will be integrated into the treatment plan.`),setTimeout(()=>{console.log("Recommendation integrated into EHR system:",{recommendationId:r.id,patientId:"mock-patient-123",timestamp:new Date().toISOString(),status:"accepted"})},1e3)},g=i||d,l=i?.name||"Demo Patient (Sarah Johnson)";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"AI Clinical Decision Support"}),i&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:["Current Patient: ",e.jsx("span",{className:"text-blue-700",children:l})]}),i.mrn&&e.jsxs("p",{className:"text-sm text-blue-600",children:["MRN: ",i.mrn]})]}),!i&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:["No patient selected - showing demo recommendations for: ",e.jsx("span",{className:"font-semibold",children:l})]}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Select a patient from the Patients page to see personalized recommendations"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Intelligent treatment recommendations based on patient profile, genomics, biomarkers, and evidence-based medicine to optimize clinical outcomes."})]}),e.jsx(G,{patientProfile:g,currentMedications:o,proposedTreatment:h,onRecommendationAccept:a})]})};export{X as default};
