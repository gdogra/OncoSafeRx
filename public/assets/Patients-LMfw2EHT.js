import{c as ye,r as f,j as e,X,w as ne,H as xe,A as V,a as le,x as fe,e as D,I,q as F,n as ue,S as re,h as _,y as G,z as K,P as J,D as ee,b as se,Z as be,d as B,k as oe,F as te,G as je,T as de,t as ie,J as ve,B as Ne,K as we,N as Se,s as Ce,u as De,U as me,L as ke}from"./index-Bhw970Mt.js";import{C as j}from"./Card-xxJ0N2iO.js";import{U as z}from"./user-QYazuXCT.js";import{S as Ae}from"./save-BZ3jqcIb.js";import{S as Te}from"./star-CZ330yHD.js";import{P as Y}from"./plus-S0wGj3RA.js";import{R as Pe}from"./refresh-cw-CEIIBFss.js";import{A as ae}from"./Alert-Ce4CVrwB.js";import{L as Oe}from"./LoadingSpinner-DmXCsUX4.js";import{F as ce}from"./funnel-BH8iwznT.js";import{C as W}from"./circle-check-big-BS3hXAhd.js";import{S as Z}from"./square-pen-CZ9eK-q9.js";import{H as Q}from"./history-0FG2O_UK.js";import{T as pe}from"./trending-down-BG9g-gf-.js";import{M as ge}from"./minus-Rc93RogM.js";import{D as q}from"./download-BdaDgNV1.js";import{S as Me}from"./settings-1im7aM1L.js";import{S as Re}from"./share-2-BaxNWgwY.js";import{C as $e}from"./copy-Cv9jiAcT.js";import{P as Ie}from"./printer-B9QUcJIm.js";import{M as he}from"./mail-C7ZZp4mU.js";import{C as Le}from"./calendar-Bt6aR5VC.js";import{E as Ee}from"./eye-B2OXPKvz.js";import{M as Fe}from"./map-pin-Bfp5l87-.js";import{S as He}from"./sparkles-mm-HJFwJ.js";import{A as H}from"./arrow-right-J9N0WXtG.js";import"./circle-x-pntuk0KV.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],ze=ye("scissors",Be),Ge=({onSubmit:L,onCancel:A})=>{const[x,n]=f.useState("demographics"),[o,g]=f.useState({firstName:"",lastName:"",dateOfBirth:"",sex:"male",allergies:[],medicalHistory:[],familyHistory:[]}),[y,v]=f.useState({allergen:"",reaction:"",severity:"mild"}),[b,P]=f.useState({condition:"",yearDiagnosed:"",status:"active"}),[w,p]=f.useState({relationship:"",condition:"",ageAtDiagnosis:""}),i=[{id:"demographics",label:"Demographics",icon:z},{id:"contact",label:"Contact Info",icon:ne},{id:"clinical",label:"Clinical Info",icon:xe},{id:"vitals",label:"Vitals & Labs",icon:V},{id:"history",label:"Medical History",icon:le},{id:"social",label:"Social History",icon:fe},{id:"providers",label:"Care Team",icon:z}],c=(s,t)=>{g(l=>{const a=s.split("."),m={...l};let S=m;for(let k=0;k<a.length-1;k++)S[a[k]]||(S[a[k]]={}),S=S[a[k]];return S[a[a.length-1]]=t,m})},u=()=>{if(y.allergen&&y.reaction){const s={...y,id:`allergy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,allergenType:"drug",dateReported:new Date().toISOString(),verified:!1};g(t=>({...t,allergies:[...t.allergies||[],s]})),v({allergen:"",reaction:"",severity:"mild"})}},C=()=>{b.condition&&(g(s=>({...s,medicalHistory:[...s.medicalHistory||[],{...b,yearDiagnosed:b.yearDiagnosed?parseInt(b.yearDiagnosed):void 0}]})),P({condition:"",yearDiagnosed:"",status:"active"}))},d=()=>{w.relationship&&w.condition&&(g(s=>({...s,familyHistory:[...s.familyHistory||[],{...w,ageAtDiagnosis:w.ageAtDiagnosis?parseInt(w.ageAtDiagnosis):void 0}]})),p({relationship:"",condition:"",ageAtDiagnosis:""}))},[h,O]=f.useState({}),M=()=>{const s={};return o.firstName?.trim()||(s.firstName="First name is required"),o.lastName?.trim()||(s.lastName="Last name is required"),o.dateOfBirth||(s.dateOfBirth="Date of birth is required"),o.sex||(s.sex="Sex is required"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(s.email="Please enter a valid email address"),o.phone&&!/^\+?[\d\s\-\(\)]{10,}$/.test(o.phone)&&(s.phone="Please enter a valid phone number"),(o.emergencyContact?.name||o.emergencyContact?.phone||o.emergencyContact?.relationship)&&(o.emergencyContact?.name?.trim()||(s["emergencyContact.name"]="Emergency contact name is required"),o.emergencyContact?.phone?.trim()||(s["emergencyContact.phone"]="Emergency contact phone is required"),o.emergencyContact?.relationship?.trim()||(s["emergencyContact.relationship"]="Emergency contact relationship is required")),O(s),Object.keys(s).length===0},$=s=>{s.preventDefault(),M()?L(o):h.firstName||h.lastName||h.dateOfBirth||h.sex?n("demographics"):(h.email||h.phone)&&n("contact")},R=()=>{switch(x){case"demographics":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.firstName,onChange:s=>c("firstName",s.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.lastName,onChange:s=>c("lastName",s.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:o.dateOfBirth,onChange:s=>c("dateOfBirth",s.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Biological Sex ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.sex,onChange:s=>c("sex",s.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other/Unknown"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",value:o.heightCm||"",onChange:s=>c("heightCm",s.target.value?parseFloat(s.target.value):void 0),min:"0",max:"300",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",value:o.weightKg||"",onChange:s=>c("weightKg",s.target.value?parseFloat(s.target.value):void 0),min:"0",max:"500",step:"0.1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["BSA (m²)",e.jsx(D,{content:"Body Surface Area - calculated automatically if height and weight provided",children:e.jsx(I,{className:"w-3 h-3 ml-1 inline"})})]}),e.jsx("input",{type:"number",value:o.bsa||"",onChange:s=>c("bsa",s.target.value?parseFloat(s.target.value):void 0),step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medical Record Number (MRN)"}),e.jsx("input",{type:"text",value:o.mrn||"",onChange:s=>c("mrn",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]});case"contact":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:o.email||"",onChange:s=>c("email",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:o.phone||"",onChange:s=>c("phone",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Street Address",value:o.address?.street||"",onChange:s=>c("address.street",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"City",value:o.address?.city||"",onChange:s=>c("address.city",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"State",value:o.address?.state||"",onChange:s=>c("address.state",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"ZIP Code",value:o.address?.zipCode||"",onChange:s=>c("address.zipCode",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Contact Name",value:o.emergencyContact?.name||"",onChange:s=>c("emergencyContact.name",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"Relationship",value:o.emergencyContact?.relationship||"",onChange:s=>c("emergencyContact.relationship",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"tel",placeholder:"Phone Number",value:o.emergencyContact?.phone||"",onChange:s=>c("emergencyContact.phone",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Insurance Information"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Insurance Provider",value:o.insurance?.provider||"",onChange:s=>c("insurance.provider",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"Member ID",value:o.insurance?.memberId||"",onChange:s=>c("insurance.memberId",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"Group Number",value:o.insurance?.groupNumber||"",onChange:s=>c("insurance.groupNumber",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]});case"clinical":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Diagnosis"}),e.jsx("input",{type:"text",value:o.primaryDiagnosis||"",onChange:s=>c("primaryDiagnosis",s.target.value),placeholder:"e.g., Breast Cancer, Lung Adenocarcinoma",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage"}),e.jsx("input",{type:"text",value:o.stage||"",onChange:s=>c("stage",s.target.value),placeholder:"e.g., Stage IIIA, T2N1M0",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Diagnosis"}),e.jsx("input",{type:"date",value:o.dateOfDiagnosis||"",onChange:s=>c("dateOfDiagnosis",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Site"}),e.jsx("input",{type:"text",value:o.primarySite||"",onChange:s=>c("primarySite",s.target.value),placeholder:"e.g., Left breast, Right upper lobe",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Histology"}),e.jsx("input",{type:"text",value:o.histology||"",onChange:s=>c("histology",s.target.value),placeholder:"e.g., Invasive ductal carcinoma, Adenocarcinoma",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ECOG Performance Status",e.jsx(D,{content:"0=Fully active, 1=Restricted strenuous activity, 2=Ambulatory >50% of time, 3=Limited self-care, 4=Completely disabled",children:e.jsx(I,{className:"w-3 h-3 ml-1 inline"})})]}),e.jsxs("select",{value:o.ecogPerformanceStatus||"",onChange:s=>c("ecogPerformanceStatus",s.target.value?parseInt(s.target.value):void 0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select ECOG Score"}),e.jsx("option",{value:"0",children:"0 - Fully active"}),e.jsx("option",{value:"1",children:"1 - Restricted strenuous activity"}),e.jsx("option",{value:"2",children:"2 - Ambulatory, self-care"}),e.jsx("option",{value:"3",children:"3 - Limited self-care"}),e.jsx("option",{value:"4",children:"4 - Completely disabled"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Karnofsky Score",e.jsx(D,{content:"Performance status scale 0-100, where 100 = normal activity",children:e.jsx(I,{className:"w-3 h-3 ml-1 inline"})})]}),e.jsx("input",{type:"number",value:o.karnofskyScore||"",onChange:s=>c("karnofskyScore",s.target.value?parseInt(s.target.value):void 0),min:"0",max:"100",step:"10",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]});case"vitals":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Vital Signs"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BP Systolic"}),e.jsx("input",{type:"number",value:o.vitals?.bloodPressureSystolic||"",onChange:s=>c("vitals.bloodPressureSystolic",s.target.value?parseInt(s.target.value):void 0),placeholder:"mmHg",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BP Diastolic"}),e.jsx("input",{type:"number",value:o.vitals?.bloodPressureDiastolic||"",onChange:s=>c("vitals.bloodPressureDiastolic",s.target.value?parseInt(s.target.value):void 0),placeholder:"mmHg",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heart Rate"}),e.jsx("input",{type:"number",value:o.vitals?.heartRate||"",onChange:s=>c("vitals.heartRate",s.target.value?parseInt(s.target.value):void 0),placeholder:"bpm",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Laboratory Values"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hemoglobin"}),e.jsx("input",{type:"number",value:o.labValues?.hemoglobin||"",onChange:s=>c("labValues.hemoglobin",s.target.value?parseFloat(s.target.value):void 0),placeholder:"g/dL",step:"0.1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WBC"}),e.jsx("input",{type:"number",value:o.labValues?.wbc||"",onChange:s=>c("labValues.wbc",s.target.value?parseFloat(s.target.value):void 0),placeholder:"K/μL",step:"0.1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Platelets"}),e.jsx("input",{type:"number",value:o.labValues?.platelets||"",onChange:s=>c("labValues.platelets",s.target.value?parseFloat(s.target.value):void 0),placeholder:"K/μL",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Creatinine"}),e.jsx("input",{type:"number",value:o.labValues?.creatinine||"",onChange:s=>c("labValues.creatinine",s.target.value?parseFloat(s.target.value):void 0),placeholder:"mg/dL",step:"0.01",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]})]});case"history":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Allergies"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Allergen",value:y.allergen,onChange:s=>v(t=>({...t,allergen:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"Reaction",value:y.reaction,onChange:s=>v(t=>({...t,reaction:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsxs("select",{value:y.severity,onChange:s=>v(t=>({...t,severity:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"mild",children:"Mild"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"severe",children:"Severe"})]}),e.jsx("button",{type:"button",onClick:u,className:"px-3 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Add"})]}),o.allergies&&o.allergies.length>0&&e.jsx("div",{className:"space-y-2",children:o.allergies.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded-md",children:[e.jsxs("span",{children:[s.allergen," - ",s.reaction," (",s.severity,")"]}),e.jsx("button",{type:"button",onClick:()=>g(l=>({...l,allergies:l.allergies?.filter((a,m)=>m!==t)})),className:"text-red-600 hover:text-red-800",children:e.jsx(X,{className:"w-4 h-4"})})]},t))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Medical History"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Condition",value:b.condition,onChange:s=>P(t=>({...t,condition:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"number",placeholder:"Year Diagnosed",value:b.yearDiagnosed,onChange:s=>P(t=>({...t,yearDiagnosed:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsxs("select",{value:b.status,onChange:s=>P(t=>({...t,status:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"chronic",children:"Chronic"}),e.jsx("option",{value:"resolved",children:"Resolved"})]}),e.jsx("button",{type:"button",onClick:C,className:"px-3 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Add"})]}),o.medicalHistory&&o.medicalHistory.length>0&&e.jsx("div",{className:"space-y-2",children:o.medicalHistory.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-md",children:[e.jsxs("span",{children:[s.condition," ",s.yearDiagnosed&&`(${s.yearDiagnosed})`," - ",s.status]}),e.jsx("button",{type:"button",onClick:()=>g(l=>({...l,medicalHistory:l.medicalHistory?.filter((a,m)=>m!==t)})),className:"text-red-600 hover:text-red-800",children:e.jsx(X,{className:"w-4 h-4"})})]},t))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Family History"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Relationship",value:w.relationship,onChange:s=>p(t=>({...t,relationship:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"text",placeholder:"Condition",value:w.condition,onChange:s=>p(t=>({...t,condition:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("input",{type:"number",placeholder:"Age at Diagnosis",value:w.ageAtDiagnosis,onChange:s=>p(t=>({...t,ageAtDiagnosis:s.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("button",{type:"button",onClick:d,className:"px-3 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Add"})]}),o.familyHistory&&o.familyHistory.length>0&&e.jsx("div",{className:"space-y-2",children:o.familyHistory.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-md",children:[e.jsxs("span",{children:[s.relationship," - ",s.condition," ",s.ageAtDiagnosis&&`(age ${s.ageAtDiagnosis})`]}),e.jsx("button",{type:"button",onClick:()=>g(l=>({...l,familyHistory:l.familyHistory?.filter((a,m)=>m!==t)})),className:"text-red-600 hover:text-red-800",children:e.jsx(X,{className:"w-4 h-4"})})]},t))})]})]})]});case"social":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Smoking Status"}),e.jsxs("select",{value:o.socialHistory?.smokingStatus||"",onChange:s=>c("socialHistory.smokingStatus",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"never",children:"Never smoker"}),e.jsx("option",{value:"former",children:"Former smoker"}),e.jsx("option",{value:"current",children:"Current smoker"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pack Years (if applicable)"}),e.jsx("input",{type:"number",value:o.socialHistory?.smokingPackYears||"",onChange:s=>c("socialHistory.smokingPackYears",s.target.value?parseFloat(s.target.value):void 0),step:"0.5",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alcohol Use"}),e.jsxs("select",{value:o.socialHistory?.alcoholUse||"",onChange:s=>c("socialHistory.alcoholUse",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select usage"}),e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"occasional",children:"Occasional"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"heavy",children:"Heavy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marital Status"}),e.jsxs("select",{value:o.socialHistory?.maritalStatus||"",onChange:s=>c("socialHistory.maritalStatus",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"married",children:"Married"}),e.jsx("option",{value:"divorced",children:"Divorced"}),e.jsx("option",{value:"widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),e.jsx("input",{type:"text",value:o.socialHistory?.occupation||"",onChange:s=>c("socialHistory.occupation",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]});case"providers":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Oncologist"}),e.jsx("input",{type:"text",value:o.primaryOncologist||"",onChange:s=>c("primaryOncologist",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referring Physician"}),e.jsx("input",{type:"text",value:o.referringPhysician||"",onChange:s=>c("referringPhysician",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Treatment Center/Hospital"}),e.jsx("input",{type:"text",value:o.treatmentCenter||"",onChange:s=>c("treatmentCenter",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]});default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Patient"}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Complete patient information for comprehensive clinical management"})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:i.map(({id:s,label:t,icon:l})=>e.jsxs("button",{onClick:()=>n(s),className:`flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${x===s?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:t})]},s))})}),e.jsxs("form",{onSubmit:$,className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"p-6",children:R()}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 border border-gray-300 text-gray-700 bg-white rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{const s=i.findIndex(t=>t.id===x);s>0&&n(i[s-1].id)},disabled:i.findIndex(s=>s.id===x)===0,className:"px-6 py-2 border border-gray-300 text-gray-700 bg-white rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{type:"button",onClick:()=>{const s=i.findIndex(t=>t.id===x);s<i.length-1&&n(i[s+1].id)},disabled:i.findIndex(s=>s.id===x)===i.length-1,className:"px-6 py-2 border border-gray-300 text-gray-700 bg-white rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}),e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Patient"})]})]})]})})]})]})})},Ue=()=>{const{state:L,actions:A}=F(),{showToast:x}=ue(),{currentPatient:n,recentPatients:o}=L,[g,y]=f.useState(""),[v,b]=f.useState(!1),P=async s=>{if(!s.trim())return[];try{const{data:l}=await K.auth.getSession(),a=l?.session?.access_token;if(a){const m=new URLSearchParams({q:s,page:"1",pageSize:"10"}),S=await fetch(`/api/patients?${m.toString()}`,{headers:{Authorization:`Bearer ${a}`}});if(S.ok){const k=await S.json();return(Array.isArray(k?.patients)?k.patients:[]).map(r=>r.data||r)}}}catch{}const t=s.toLowerCase();return o.filter(l=>`${l.demographics.firstName} ${l.demographics.lastName}`.toLowerCase().includes(t)||(l.demographics.mrn||"").toLowerCase().includes(t))},[w,p]=f.useState([]),[i,c]=f.useState(!1),[u,C]=f.useState(!1),d=async s=>{if(y(s),s.trim().length===0){p([]);return}c(!0);try{const t=await P(s);p(t)}catch(t){console.error("Search failed:",t)}finally{c(!1)}},h=s=>{A.setCurrentPatient(s),y(""),p([]),C(!1)},O=()=>{g.trim()===""&&(C(!0),p(o))},M=()=>{setTimeout(()=>{C(!1),g.trim()===""&&p([])},200)},$=async s=>{const t={firstName:s.firstName,lastName:s.lastName,dateOfBirth:s.dateOfBirth,sex:s.sex,mrn:s.mrn,heightCm:s.heightCm,weightKg:s.weightKg};let l="guest";try{const{data:m}=await K.auth.getSession();l=m?.session?.user?.id||l}catch{}const a={id:`patient-${Date.now()}`,demographics:t,allergies:s.allergies||[],medications:[],conditions:s.medicalConditions||[],labValues:s.labValues?[s.labValues]:[],genetics:[],vitals:s.vitals?[s.vitals]:[],treatmentHistory:[],notes:[],preferences:{},lastUpdated:new Date().toISOString(),createdBy:l,isActive:!0};A.setCurrentPatient(a);try{const{data:m}=await K.auth.getSession(),S=m?.session?.access_token;S&&(await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({patient:a})}),x("success","Patient created"))}catch{x("warning","Saved locally (offline)")}b(!1)},R=s=>{const t=new Date,l=new Date(s);let a=t.getFullYear()-l.getFullYear();const m=t.getMonth()-l.getMonth();return(m<0||m===0&&t.getDate()<l.getDate())&&a--,a};return e.jsxs("div",{className:"space-y-6",children:[n&&e.jsx(j,{className:"bg-primary-50 border-primary-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-primary-900",children:[n.demographics.firstName," ",n.demographics.lastName]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-primary-700",children:[e.jsxs("span",{children:[R(n.demographics.dateOfBirth)," years old"]}),e.jsx("span",{className:"capitalize",children:n.demographics.sex}),n.demographics.mrn&&e.jsxs("span",{children:["MRN: ",n.demographics.mrn]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(D,{content:"Currently selected patient",children:e.jsx(Te,{className:"w-5 h-5 text-primary-600 fill-current"})})})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(re,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient Search"}),e.jsx(D,{content:"Search for existing patients by name or MRN, or create a new patient profile. Focus on the search field to see all available patients.",type:"help",position:"bottom",children:e.jsx(I,{className:"w-4 h-4 text-gray-400 hover:text-blue-600 cursor-help transition-colors"})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:g,onChange:s=>d(s.target.value),onFocus:O,onBlur:M,placeholder:"Search by patient name or MRN...",className:"block w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),i&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"})})]}),e.jsx(D,{content:"Create a new patient profile with comprehensive clinical information",position:"bottom",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"New Patient"})]})}),e.jsx(D,{content:"Sync patients from server",position:"bottom",children:e.jsxs("button",{onClick:()=>A.syncFromServer(),className:"flex items-center space-x-2 px-3 py-2 bg-white border text-sm font-medium rounded-md hover:bg-gray-50",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Sync"})]})})]}),w.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:u?"Available Patients:":"Search Results:"}),w.map(s=>e.jsx("div",{onClick:()=>h(s),className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s.demographics.firstName," ",s.demographics.lastName]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[R(s.demographics.dateOfBirth)," years • ",s.demographics.sex," • MRN: ",s.demographics.mrn]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(s.lastUpdated).toLocaleDateString()]})]})},s.id))]}),g.length>=1&&w.length===0&&!i&&e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:['No patients found matching "',g,'"']})]}),o.length>0&&e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(_,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Patients"}),e.jsx(D,{content:"Recently accessed patient profiles for quick selection",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:o.slice(0,6).map(s=>e.jsx("div",{onClick:()=>h(s),className:`p-3 border rounded-lg cursor-pointer transition-colors ${n?.id===s.id?"border-primary-300 bg-primary-50":"border-gray-200 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 truncate",children:[s.demographics.firstName," ",s.demographics.lastName]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[R(s.demographics.dateOfBirth)," years • MRN: ",s.demographics.mrn]})]}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600",onClick:async t=>{if(t.stopPropagation(),!confirm("Delete this patient?"))return;const l=s;A.removePatient(s.id),x("success","Patient deleted",5e3,{label:"Undo",onClick:async()=>{A.setCurrentPatient(l);try{const{data:a}=await K.auth.getSession(),m=a?.session?.access_token;m&&await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({patient:l})})}catch{}}})},title:"Delete patient",children:e.jsx(G,{className:"w-4 h-4"})})]})},s.id))})]}),v&&e.jsx(Ge,{onSubmit:$,onCancel:()=>b(!1)})]})},qe=({patientId:L})=>{const{state:A,actions:x}=F(),{currentPatient:n}=A,[o,g]=f.useState(!1),[y,v]=f.useState(null),[b,P]=f.useState("all"),[w,p]=f.useState(""),[i,c]=f.useState({drugName:"",dosage:"",frequency:"",route:"Oral",startDate:new Date().toISOString().split("T")[0],indication:"",prescribedBy:"",isActive:!0,adherence:"good"});if(!n)return e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a patient to manage their medications"})]})});const u=()=>{let s=n.medications||[];return b==="active"?s=s.filter(t=>t.isActive):b==="inactive"&&(s=s.filter(t=>!t.isActive)),w.trim()&&(s=s.filter(t=>t.drugName?.toLowerCase().includes(w.toLowerCase())||t.indication?.toLowerCase().includes(w.toLowerCase())||t.prescribedBy?.toLowerCase().includes(w.toLowerCase()))),s},C=()=>{if(!i.drugName||!i.dosage||!i.frequency){alert("Please fill in all required fields");return}const s={id:`med-${Date.now()}`,drugName:i.drugName,dosage:i.dosage,frequency:i.frequency,route:i.route||"Oral",startDate:i.startDate||new Date().toISOString().split("T")[0],endDate:i.endDate,indication:i.indication||"",prescribedBy:i.prescribedBy||"",isActive:i.isActive!==!1,adherence:i.adherence||"good",sideEffects:i.sideEffects||[]},t=[...n.medications||[],s];x.updatePatientData({medications:t}),c({drugName:"",dosage:"",frequency:"",route:"Oral",startDate:new Date().toISOString().split("T")[0],indication:"",prescribedBy:"",isActive:!0,adherence:"good"}),g(!1)},d=s=>{v(s),c(s),g(!0)},h=()=>{if(!y||!i.drugName||!i.dosage||!i.frequency){alert("Please fill in all required fields");return}const s=n.medications.map(t=>t.id===y.id?{...i,id:y.id}:t);x.updatePatientData({medications:s}),c({drugName:"",dosage:"",frequency:"",route:"Oral",startDate:new Date().toISOString().split("T")[0],indication:"",prescribedBy:"",isActive:!0,adherence:"good"}),v(null),g(!1)},O=s=>{if(confirm("Are you sure you want to remove this medication?")){const t=n.medications.filter(l=>l.id!==s);x.updatePatientData({medications:t})}},M=s=>{const t=n.medications.map(l=>l.id===s?{...l,isActive:!l.isActive,endDate:l.isActive?new Date().toISOString().split("T")[0]:void 0}:l);x.updatePatientData({medications:t})},$=s=>{switch(s){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=u();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Medication Management"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.demographics.firstName," ",n.demographics.lastName," - Current medications and history"]})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Medication"})]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:b,onChange:s=>P(s.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Medications"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search medications...",value:w,onChange:s=>p(s.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[R.length," medication",R.length!==1?"s":""," found"]})]})}),e.jsx("div",{className:"space-y-4",children:R.length===0?e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Medications Found"}),e.jsx("p",{className:"text-gray-400",children:w||b!=="all"?"Try adjusting your search or filter criteria":"Add the first medication to get started"})]})}):R.map(s=>e.jsx(j,{className:`${s.isActive?"":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.drugName}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.isActive?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Inactive"]}),s.adherence&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$(s.adherence)}`,children:[s.adherence," adherence"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Dosage & Frequency:"}),e.jsxs("p",{className:"text-gray-900",children:[s.dosage," ",s.frequency]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Route:"}),e.jsx("p",{className:"text-gray-900",children:s.route})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Start Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.startDate).toLocaleDateString()})]})]}),s.indication&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Indication:"}),e.jsx("p",{className:"text-gray-900",children:s.indication})]}),s.prescribedBy&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Prescribed by:"}),e.jsx("p",{className:"text-gray-900",children:s.prescribedBy})]}),s.endDate&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"End Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.endDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(D,{content:s.isActive?"Mark as inactive":"Mark as active",children:e.jsx("button",{onClick:()=>M(s.id),className:`p-2 rounded-lg ${s.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,children:s.isActive?e.jsx(W,{className:"w-4 h-4"}):e.jsx(_,{className:"w-4 h-4"})})}),e.jsx(D,{content:"Edit medication",children:e.jsx("button",{onClick:()=>d(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(D,{content:"Remove medication",children:e.jsx("button",{onClick:()=>O(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-4 h-4"})})})]})]})},s.id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?"Edit Medication":"Add New Medication"})}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Drug Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.drugName||"",onChange:s=>c({...i,drugName:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Tamoxifen"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Dosage ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.dosage||"",onChange:s=>c({...i,dosage:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 20 mg"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Frequency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:i.frequency||"",onChange:s=>c({...i,frequency:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select frequency"}),e.jsx("option",{value:"Once daily",children:"Once daily"}),e.jsx("option",{value:"Twice daily",children:"Twice daily"}),e.jsx("option",{value:"Three times daily",children:"Three times daily"}),e.jsx("option",{value:"Four times daily",children:"Four times daily"}),e.jsx("option",{value:"Every other day",children:"Every other day"}),e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Every 3 weeks",children:"Every 3 weeks"}),e.jsx("option",{value:"Monthly",children:"Monthly"}),e.jsx("option",{value:"As needed",children:"As needed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route"}),e.jsxs("select",{value:i.route||"Oral",onChange:s=>c({...i,route:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"Oral",children:"Oral"}),e.jsx("option",{value:"IV",children:"Intravenous (IV)"}),e.jsx("option",{value:"IM",children:"Intramuscular (IM)"}),e.jsx("option",{value:"SC",children:"Subcutaneous (SC)"}),e.jsx("option",{value:"Topical",children:"Topical"}),e.jsx("option",{value:"Inhalation",children:"Inhalation"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:i.startDate||"",onChange:s=>c({...i,startDate:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:i.endDate||"",onChange:s=>c({...i,endDate:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indication"}),e.jsx("input",{type:"text",value:i.indication||"",onChange:s=>c({...i,indication:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Breast cancer adjuvant therapy"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prescribed By"}),e.jsx("input",{type:"text",value:i.prescribedBy||"",onChange:s=>c({...i,prescribedBy:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Dr. Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adherence"}),e.jsxs("select",{value:i.adherence||"good",onChange:s=>c({...i,adherence:s.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"excellent",children:"Excellent"}),e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"})]})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.isActive!==!1,onChange:s=>c({...i,isActive:s.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active medication"})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between",children:[e.jsx("button",{onClick:()=>{g(!1),v(null),c({drugName:"",dosage:"",frequency:"",route:"Oral",startDate:new Date().toISOString().split("T")[0],indication:"",prescribedBy:"",isActive:!0,adherence:"good"})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:y?h:C,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:y?"Update Medication":"Add Medication"})]})]})})]})},Ve=({patientId:L})=>{const{state:A,actions:x}=F(),{currentPatient:n}=A,[o,g]=f.useState(!1),[y,v]=f.useState(null),[b,P]=f.useState(""),[w,p]=f.useState("all"),[i,c]=f.useState({geneSymbol:"",alleles:["",""],phenotype:"",metabolizerStatus:"normal",testDate:new Date().toISOString().split("T")[0],testMethod:"",clinicalSignificance:"",notes:""});if(!n)return e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a patient to manage their genomic data"})]})});const u=()=>{let t=n.genetics||[];const l=["CYP2D6","CYP2C19","CYP2C9","CYP3A4","TPMT","UGT1A1","DPYD","NUDT15"];return w==="pharmacogenomic"?t=t.filter(a=>l.includes(a.geneSymbol.toUpperCase())):w==="oncologic"&&(t=t.filter(a=>!l.includes(a.geneSymbol.toUpperCase()))),b.trim()&&(t=t.filter(a=>a.geneSymbol.toLowerCase().includes(b.toLowerCase())||a.phenotype.toLowerCase().includes(b.toLowerCase())||a.clinicalSignificance?.toLowerCase().includes(b.toLowerCase()))),t},C=()=>{if(!i.geneSymbol||!i.phenotype){alert("Please fill in gene symbol and phenotype");return}const t={geneSymbol:i.geneSymbol,alleles:i.alleles.filter(a=>a.trim()!==""),phenotype:i.phenotype,metabolizerStatus:i.metabolizerStatus,testDate:i.testDate||new Date().toISOString().split("T")[0],testMethod:i.testMethod,clinicalSignificance:i.clinicalSignificance,notes:i.notes},l=[...n.genetics||[],t];x.updatePatientData({genetics:l}),c({geneSymbol:"",alleles:["",""],phenotype:"",metabolizerStatus:"normal",testDate:new Date().toISOString().split("T")[0],testMethod:"",clinicalSignificance:"",notes:""}),g(!1)},d=t=>{v(t),c({...t,alleles:t.alleles.length<2?[...t.alleles,"",""]:t.alleles}),g(!0)},h=()=>{if(!y||!i.geneSymbol||!i.phenotype){alert("Please fill in gene symbol and phenotype");return}const t=n.genetics.map(l=>l.geneSymbol===y.geneSymbol&&l.testDate===y.testDate?{...i,geneSymbol:i.geneSymbol,alleles:i.alleles.filter(a=>a.trim()!==""),phenotype:i.phenotype}:l);x.updatePatientData({genetics:t}),c({geneSymbol:"",alleles:["",""],phenotype:"",metabolizerStatus:"normal",testDate:new Date().toISOString().split("T")[0],testMethod:"",clinicalSignificance:"",notes:""}),v(null),g(!1)},O=t=>{if(confirm("Are you sure you want to remove this genetic data?")){const l=n.genetics.filter(a=>!(a.geneSymbol===t.geneSymbol&&a.testDate===t.testDate));x.updatePatientData({genetics:l})}},M=t=>{switch(t){case"poor":return"bg-red-100 text-red-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"normal":return"bg-green-100 text-green-800";case"rapid":return"bg-blue-100 text-blue-800";case"ultra-rapid":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},$=t=>{if(!t)return"bg-gray-100 text-gray-800";const l=t.toLowerCase();return l.includes("high")||l.includes("pathogenic")?"bg-red-100 text-red-800":l.includes("moderate")||l.includes("likely")?"bg-yellow-100 text-yellow-800":l.includes("low")||l.includes("benign")?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"},R=()=>[{gene:"CYP2D6",description:"Metabolizes many antidepressants, antipsychotics, and opioids"},{gene:"CYP2C19",description:"Metabolizes proton pump inhibitors, clopidogrel, and some antidepressants"},{gene:"CYP2C9",description:"Metabolizes warfarin, phenytoin, and NSAIDs"},{gene:"CYP3A4",description:"Metabolizes many medications including some chemotherapy drugs"},{gene:"TPMT",description:"Metabolizes thiopurine drugs (azathioprine, mercaptopurine)"},{gene:"UGT1A1",description:"Metabolizes irinotecan and affects bilirubin levels"},{gene:"DPYD",description:"Metabolizes fluoropyrimidines (5-FU, capecitabine)"},{gene:"NUDT15",description:"Affects thiopurine metabolism, important in Asian populations"}],s=u();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Genomic Profile"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.demographics.firstName," ",n.demographics.lastName," - Genetic testing results and pharmacogenomics"]})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Genetic Data"})]})]})}),s.some(t=>t.metabolizerStatus==="poor"||t.metabolizerStatus==="ultra-rapid")&&e.jsx(ae,{type:"warning",title:"Pharmacogenomic Considerations",children:e.jsx("p",{className:"text-sm",children:"This patient has genetic variants that may affect drug metabolism. Review medication dosing and selection based on pharmacogenomic guidance."})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:w,onChange:t=>p(t.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Genetic Data"}),e.jsx("option",{value:"pharmacogenomic",children:"Pharmacogenomic"}),e.jsx("option",{value:"oncologic",children:"Oncologic"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search genes...",value:b,onChange:t=>P(t.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.length," result",s.length!==1?"s":""," found"]})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Common Pharmacogenes"}),e.jsx(D,{content:"These genes are commonly tested for drug metabolism and dosing guidance",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:R().map(({gene:t,description:l})=>{const a=s.some(m=>m.geneSymbol.toUpperCase()===t);return e.jsxs("div",{className:`p-3 rounded-lg border ${a?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t}),a&&e.jsx(W,{className:"w-4 h-4 text-green-600"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:l})]},t)})})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Genetic Data Found"}),e.jsx("p",{className:"text-gray-400",children:b||w!=="all"?"Try adjusting your search or filter criteria":"Add genetic testing results to enable pharmacogenomic guidance"})]})}):s.map((t,l)=>e.jsx(j,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.geneSymbol}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.metabolizerStatus&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${M(t.metabolizerStatus)}`,children:[t.metabolizerStatus," metabolizer"]}),t.clinicalSignificance&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$(t.clinicalSignificance)}`,children:t.clinicalSignificance})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Alleles:"}),e.jsx("p",{className:"text-gray-900",children:t.alleles.join(" / ")||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Phenotype:"}),e.jsx("p",{className:"text-gray-900",children:t.phenotype})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Test Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.testDate).toLocaleDateString()})]})]}),t.testMethod&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Test Method:"}),e.jsx("p",{className:"text-gray-900",children:t.testMethod})]}),t.geneFunction&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Gene Function:"}),e.jsx("p",{className:"text-gray-900",children:t.geneFunction})]}),t.notes&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900",children:t.notes})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(D,{content:"Edit genetic data",children:e.jsx("button",{onClick:()=>d(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(D,{content:"Remove genetic data",children:e.jsx("button",{onClick:()=>O(t),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-4 h-4"})})})]})]})},`${t.geneSymbol}-${t.testDate}-${l}`))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?"Edit Genetic Data":"Add Genetic Data"})}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gene Symbol ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.geneSymbol||"",onChange:t=>c({...i,geneSymbol:t.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., CYP2D6"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phenotype ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.phenotype||"",onChange:t=>c({...i,phenotype:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Intermediate Metabolizer"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allele 1"}),e.jsx("input",{type:"text",value:i.alleles&&i.alleles[0]||"",onChange:t=>{const l=[...i.alleles||["",""]];l[0]=t.target.value,c({...i,alleles:l})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., *1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allele 2"}),e.jsx("input",{type:"text",value:i.alleles&&i.alleles[1]||"",onChange:t=>{const l=[...i.alleles||["",""]];l[1]=t.target.value,c({...i,alleles:l})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., *4"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Metabolizer Status"}),e.jsxs("select",{value:i.metabolizerStatus||"normal",onChange:t=>c({...i,metabolizerStatus:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"poor",children:"Poor Metabolizer"}),e.jsx("option",{value:"intermediate",children:"Intermediate Metabolizer"}),e.jsx("option",{value:"normal",children:"Normal Metabolizer"}),e.jsx("option",{value:"rapid",children:"Rapid Metabolizer"}),e.jsx("option",{value:"ultra-rapid",children:"Ultra-Rapid Metabolizer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Date"}),e.jsx("input",{type:"date",value:i.testDate||"",onChange:t=>c({...i,testDate:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Method"}),e.jsx("input",{type:"text",value:i.testMethod||"",onChange:t=>c({...i,testMethod:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., PCR-RFLP, Sequencing, Array"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Clinical Significance"}),e.jsx("input",{type:"text",value:i.clinicalSignificance||"",onChange:t=>c({...i,clinicalSignificance:t.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Reduced enzyme activity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:i.notes||"",onChange:t=>c({...i,notes:t.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional clinical notes..."})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between",children:[e.jsx("button",{onClick:()=>{g(!1),v(null),c({geneSymbol:"",alleles:["",""],phenotype:"",metabolizerStatus:"normal",testDate:new Date().toISOString().split("T")[0],testMethod:"",clinicalSignificance:"",notes:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:y?h:C,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:y?"Update Genetic Data":"Add Genetic Data"})]})]})})]})},_e=({patientId:L})=>{const{state:A,actions:x}=F(),{currentPatient:n}=A,[o,g]=f.useState(!1),[y,v]=f.useState(null),[b,P]=f.useState(""),[w,p]=f.useState("all"),[i,c]=f.useState("all"),[u,C]=f.useState({treatmentType:"chemotherapy",regimen:"",drugs:[],startDate:new Date().toISOString().split("T")[0],endDate:"",cycles:1,response:"stable",toxicities:[],notes:""}),[d,h]=f.useState({grade:1,description:"",action:""});if(!n)return e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a patient to view their treatment history"})]})});const O=()=>{let r=n.treatmentHistory||[];return w==="active"?r=r.filter(N=>!N.endDate):w==="completed"&&(r=r.filter(N=>N.endDate)),i!=="all"&&(r=r.filter(N=>N.treatmentType===i)),b.trim()&&(r=r.filter(N=>N.regimen?.toLowerCase().includes(b.toLowerCase())||N.drugs?.some(T=>T.toLowerCase().includes(b.toLowerCase()))||N.notes?.toLowerCase().includes(b.toLowerCase()))),r.sort((N,T)=>new Date(T.startDate).getTime()-new Date(N.startDate).getTime())},M=f.useMemo(()=>(n.treatmentHistory||[]).sort((N,T)=>new Date(N.startDate).getTime()-new Date(T.startDate).getTime()).map((N,T)=>({...N,order:T+1})),[n.treatmentHistory]),$=()=>{if(!u.treatmentType||!u.startDate){alert("Please fill in treatment type and start date");return}const r={id:`treatment-${Date.now()}`,treatmentType:u.treatmentType,regimen:u.regimen||"",drugs:u.drugs||[],startDate:u.startDate,endDate:u.endDate,cycles:u.cycles,response:u.response,toxicities:u.toxicities||[],notes:u.notes},N=[...n.treatmentHistory||[],r];x.updatePatientData({treatmentHistory:N}),C({treatmentType:"chemotherapy",regimen:"",drugs:[],startDate:new Date().toISOString().split("T")[0],endDate:"",cycles:1,response:"stable",toxicities:[],notes:""}),g(!1)},R=r=>{v(r),C(r),g(!0)},s=()=>{if(!y||!u.treatmentType||!u.startDate){alert("Please fill in treatment type and start date");return}const r=n.treatmentHistory.map(N=>N.id===y.id?{...u,id:y.id}:N);x.updatePatientData({treatmentHistory:r}),C({treatmentType:"chemotherapy",regimen:"",drugs:[],startDate:new Date().toISOString().split("T")[0],endDate:"",cycles:1,response:"stable",toxicities:[],notes:""}),v(null),g(!1)},t=r=>{if(confirm("Are you sure you want to remove this treatment?")){const N=n.treatmentHistory.filter(T=>T.id!==r);x.updatePatientData({treatmentHistory:N})}},l=r=>{switch(r){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-blue-100 text-blue-800";case"stable":return"bg-yellow-100 text-yellow-800";case"progression":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},a=r=>{switch(r){case"complete":return e.jsx(W,{className:"w-4 h-4"});case"partial":return e.jsx(B,{className:"w-4 h-4"});case"stable":return e.jsx(ge,{className:"w-4 h-4"});case"progression":return e.jsx(pe,{className:"w-4 h-4"});default:return e.jsx(_,{className:"w-4 h-4"})}},m=r=>{switch(r){case"chemotherapy":return e.jsx(be,{className:"w-5 h-5"});case"radiation":return e.jsx(se,{className:"w-5 h-5"});case"surgery":return e.jsx(ze,{className:"w-5 h-5"});case"immunotherapy":return e.jsx(V,{className:"w-5 h-5"});case"targeted":return e.jsx(se,{className:"w-5 h-5"});default:return e.jsx(Q,{className:"w-5 h-5"})}},S=r=>{switch(r){case 1:return"bg-green-100 text-green-800";case 2:return"bg-yellow-100 text-yellow-800";case 3:return"bg-orange-100 text-orange-800";case 4:return"bg-red-100 text-red-800";case 5:return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},k=()=>{d.description&&d.action&&(C({...u,toxicities:[...u.toxicities||[],{...d,grade:d.grade}]}),h({grade:1,description:"",action:""}))},E=O();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Treatment History"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.demographics.firstName," ",n.demographics.lastName," - Complete treatment timeline and outcomes"]})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Treatment"})]})]})}),M.length>0&&e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Treatment Summary"}),e.jsx(D,{content:"Overview of all treatments and their outcomes",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Treatments"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:M.length})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Complete/Partial Response"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:M.filter(r=>r.response==="complete"||r.response==="partial").length})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Active Treatments"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:M.filter(r=>!r.endDate).length})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Grade 3+ Toxicities"}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:M.reduce((r,N)=>r+(N.toxicities?.filter(T=>T.grade>=3).length||0),0)})]})]})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:w,onChange:r=>p(r.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Treatments"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:i,onChange:r=>c(r.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"chemotherapy",children:"Chemotherapy"}),e.jsx("option",{value:"radiation",children:"Radiation"}),e.jsx("option",{value:"surgery",children:"Surgery"}),e.jsx("option",{value:"immunotherapy",children:"Immunotherapy"}),e.jsx("option",{value:"targeted",children:"Targeted"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search treatments...",value:b,onChange:r=>P(r.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[E.length," treatment",E.length!==1?"s":""," found"]})]})}),e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Treatments Found"}),e.jsx("p",{className:"text-gray-400",children:b||w!=="all"||i!=="all"?"Try adjusting your search or filter criteria":"Add the first treatment to start building the treatment history"})]})}):E.map((r,N)=>e.jsxs(j,{className:"relative",children:[N<E.length-1&&e.jsx("div",{className:"absolute left-8 top-16 w-0.5 h-full bg-gray-200 -z-10"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${r.endDate?"bg-gray-100 text-gray-600":"bg-primary-100 text-primary-600"}`,children:m(r.treatmentType)}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:[r.treatmentType," ",r.regimen&&`- ${r.regimen}`]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!r.endDate&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Active"]}),r.response&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${l(r.response)}`,children:[a(r.response),e.jsxs("span",{className:"ml-1 capitalize",children:[r.response," response"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Start Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(r.startDate).toLocaleDateString()})]}),r.endDate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"End Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(r.endDate).toLocaleDateString()})]}),r.cycles&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Cycles:"}),e.jsx("p",{className:"text-gray-900",children:r.cycles})]})]}),r.drugs&&r.drugs.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Drugs:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:r.drugs.map((T,U)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-50 text-blue-800",children:T},U))})]}),r.toxicities&&r.toxicities.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Toxicities:"}),e.jsx("div",{className:"space-y-1 mt-1",children:r.toxicities.map((T,U)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S(T.grade)}`,children:["Grade ",T.grade]}),e.jsx("span",{className:"text-sm text-gray-900",children:T.description}),e.jsxs("span",{className:"text-xs text-gray-600",children:["(",T.action,")"]})]},U))})]}),r.notes&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:r.notes})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(D,{content:"Edit treatment",children:e.jsx("button",{onClick:()=>R(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(D,{content:"Remove treatment",children:e.jsx("button",{onClick:()=>t(r.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-4 h-4"})})})]})]})})]})]},r.id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?"Edit Treatment":"Add Treatment"})}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Treatment Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:u.treatmentType||"chemotherapy",onChange:r=>C({...u,treatmentType:r.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"chemotherapy",children:"Chemotherapy"}),e.jsx("option",{value:"radiation",children:"Radiation"}),e.jsx("option",{value:"surgery",children:"Surgery"}),e.jsx("option",{value:"immunotherapy",children:"Immunotherapy"}),e.jsx("option",{value:"targeted",children:"Targeted Therapy"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Regimen/Protocol"}),e.jsx("input",{type:"text",value:u.regimen||"",onChange:r=>C({...u,regimen:r.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., FOLFOX, AC-T"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Drugs (comma-separated)"}),e.jsx("input",{type:"text",value:u.drugs?.join(", ")||"",onChange:r=>C({...u,drugs:r.target.value.split(",").map(N=>N.trim()).filter(N=>N)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Doxorubicin, Cyclophosphamide"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:u.startDate||"",onChange:r=>C({...u,startDate:r.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:u.endDate||"",onChange:r=>C({...u,endDate:r.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cycles"}),e.jsx("input",{type:"number",value:u.cycles||"",onChange:r=>C({...u,cycles:r.target.value?parseInt(r.target.value):void 0}),min:"1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response"}),e.jsxs("select",{value:u.response||"stable",onChange:r=>C({...u,response:r.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"complete",children:"Complete Response"}),e.jsx("option",{value:"partial",children:"Partial Response"}),e.jsx("option",{value:"stable",children:"Stable Disease"}),e.jsx("option",{value:"progression",children:"Disease Progression"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Toxicities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:d.grade,onChange:r=>h({...d,grade:parseInt(r.target.value)}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:1,children:"Grade 1"}),e.jsx("option",{value:2,children:"Grade 2"}),e.jsx("option",{value:3,children:"Grade 3"}),e.jsx("option",{value:4,children:"Grade 4"}),e.jsx("option",{value:5,children:"Grade 5"})]})}),e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",placeholder:"Toxicity description",value:d.description,onChange:r=>h({...d,description:r.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),e.jsx("div",{className:"col-span-4",children:e.jsx("input",{type:"text",placeholder:"Action taken",value:d.action,onChange:r=>h({...d,action:r.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("button",{type:"button",onClick:k,className:"w-full h-8 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm",children:"+"})})]}),u.toxicities&&u.toxicities.length>0&&e.jsx("div",{className:"space-y-1",children:u.toxicities.map((r,N)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(r.grade)}`,children:["Grade ",r.grade]}),e.jsx("span",{className:"text-sm",children:r.description}),e.jsxs("span",{className:"text-xs text-gray-600",children:["(",r.action,")"]})]}),e.jsx("button",{type:"button",onClick:()=>C({...u,toxicities:u.toxicities?.filter((T,U)=>U!==N)}),className:"text-red-600 hover:text-red-800",children:e.jsx(G,{className:"w-4 h-4"})})]},N))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:u.notes||"",onChange:r=>C({...u,notes:r.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional treatment notes..."})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between",children:[e.jsx("button",{onClick:()=>{g(!1),v(null),C({treatmentType:"chemotherapy",regimen:"",drugs:[],startDate:new Date().toISOString().split("T")[0],endDate:"",cycles:1,response:"stable",toxicities:[],notes:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:y?s:$,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:y?"Update Treatment":"Add Treatment"})]})]})})]})},Ye=({patientId:L})=>{const{state:A,actions:x}=F(),{currentPatient:n}=A,[o,g]=f.useState(!1),[y,v]=f.useState(null),[b,P]=f.useState("all"),w=()=>{if(!n)return[];const a=n.notes?.filter(m=>m.type==="clinical"&&m.content.startsWith("OUTCOME_DATA:"));return a?a.map(m=>{try{return{...JSON.parse(m.content.replace("OUTCOME_DATA:","")),id:m.id}}catch{return null}}).filter(Boolean):[]},[p,i]=f.useState({type:"response",measurement:"",value:"",unit:"",date:new Date().toISOString().split("T")[0],notes:"",treatmentRelated:""});if(!n)return e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a patient to track their outcomes"})]})});const c=w(),u=b==="all"?c:c.filter(a=>a.type===b),C=()=>{if(!p.measurement||!p.value||!p.date){alert("Please fill in measurement, value, and date");return}const a={id:`outcome-${Date.now()}`,type:p.type,measurement:p.measurement,value:p.value,unit:p.unit,date:p.date,notes:p.notes,treatmentRelated:p.treatmentRelated},m=`OUTCOME_DATA:${JSON.stringify(a)}`,S=[...n.notes||[],{id:a.id,timestamp:new Date().toISOString(),author:"current-user",type:"clinical",content:m}];x.updatePatientData({notes:S}),i({type:"response",measurement:"",value:"",unit:"",date:new Date().toISOString().split("T")[0],notes:"",treatmentRelated:""}),g(!1)},d=a=>{v(a),i(a),g(!0)},h=()=>{if(!y||!p.measurement||!p.value||!p.date){alert("Please fill in measurement, value, and date");return}const a={...p,id:y.id},m=`OUTCOME_DATA:${JSON.stringify(a)}`,S=n.notes?.map(k=>k.id===y.id?{...k,content:m}:k)||[];x.updatePatientData({notes:S}),i({type:"response",measurement:"",value:"",unit:"",date:new Date().toISOString().split("T")[0],notes:"",treatmentRelated:""}),v(null),g(!1)},O=a=>{if(confirm("Are you sure you want to remove this outcome data?")){const m=n.notes?.filter(S=>S.id!==a)||[];x.updatePatientData({notes:m})}},M=a=>{switch(a){case"survival":return e.jsx(xe,{className:"w-4 h-4"});case"response":return e.jsx(se,{className:"w-4 h-4"});case"quality_of_life":return e.jsx(V,{className:"w-4 h-4"});case"biomarker":return e.jsx(oe,{className:"w-4 h-4"});case"functional_status":return e.jsx(B,{className:"w-4 h-4"});default:return e.jsx(I,{className:"w-4 h-4"})}},$=a=>{switch(a){case"survival":return"bg-red-100 text-red-800";case"response":return"bg-green-100 text-green-800";case"quality_of_life":return"bg-blue-100 text-blue-800";case"biomarker":return"bg-purple-100 text-purple-800";case"functional_status":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},R=(a,m)=>{const S=typeof a=="number"?a:parseFloat(a.toString());if(isNaN(S))return null;const k=m.toLowerCase();return k.includes("tumor")||k.includes("lesion")||k.includes("mass")?S<20?"improving":S>50?"worsening":"stable":k.includes("quality")||k.includes("karnofsky")||k.includes("ecog")?S>80?"improving":S<40?"worsening":"stable":null},s=a=>{switch(a){case"improving":return e.jsx(B,{className:"w-4 h-4 text-green-600"});case"worsening":return e.jsx(pe,{className:"w-4 h-4 text-red-600"});case"stable":return e.jsx(ge,{className:"w-4 h-4 text-yellow-600"});default:return null}},t=f.useMemo(()=>{const m=c.filter(r=>r.type==="response").sort((r,N)=>new Date(N.date).getTime()-new Date(r.date).getTime())[0],S=c.filter(r=>r.type==="survival"),k=c.filter(r=>r.type==="quality_of_life"),E=c.filter(r=>r.type==="biomarker");return{totalOutcomes:c.length,latestResponse:m?.value||"Not assessed",survivalData:S.length>0,qolTracked:k.length>0,biomarkersTracked:E.length>0}},[c]),l={survival:["Overall Survival (months)","Disease-Free Survival (months)","Progression-Free Survival (months)"],response:["RECIST Response","Tumor Size (cm)","Target Lesion Sum (cm)","Response Rate (%)"],quality_of_life:["EORTC QLQ-C30 Score","Karnofsky Performance Score","ECOG Performance Status","Pain Score (0-10)"],biomarker:["PSA (ng/mL)","CA 19-9 (U/mL)","CEA (ng/mL)","CA-125 (U/mL)","AFP (ng/mL)"],functional_status:["Activities of Daily Living","Mobility Score","Cognitive Function","Social Function"]};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Outcome Tracking"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.demographics.firstName," ",n.demographics.lastName," - Treatment outcomes and response monitoring"]})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Outcome"})]})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(oe,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Outcome Summary"}),e.jsx(D,{content:"Overview of tracked outcomes and current status",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Outcomes"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.totalOutcomes})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Latest Response"}),e.jsx("div",{className:"text-lg font-bold text-green-900 truncate",children:t.latestResponse})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Survival Data"}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:t.survivalData?"✓":"○"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"QoL Tracked"}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.qolTracked?"✓":"○"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Biomarkers"}),e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.biomarkersTracked?"✓":"○"})]})]})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:b,onChange:a=>P(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Outcome Types"}),e.jsx("option",{value:"survival",children:"Survival Outcomes"}),e.jsx("option",{value:"response",children:"Response Assessment"}),e.jsx("option",{value:"quality_of_life",children:"Quality of Life"}),e.jsx("option",{value:"biomarker",children:"Biomarkers"}),e.jsx("option",{value:"functional_status",children:"Functional Status"})]})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[u.length," outcome",u.length!==1?"s":""," found"]})]})}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Outcomes Found"}),e.jsx("p",{className:"text-gray-400",children:b!=="all"?`No ${b.replace("_"," ")} outcomes recorded yet`:"Start tracking treatment outcomes and patient responses"})]})}):u.sort((a,m)=>new Date(m.date).getTime()-new Date(a.date).getTime()).map(a=>{const m=R(a.value,a.measurement);return e.jsx(j,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$(a.type)}`,children:[M(a.type),e.jsx("span",{className:"ml-1 capitalize",children:a.type.replace("_"," ")})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.measurement}),s(m)]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Value:"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:[a.value," ",a.unit&&a.unit]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(a.date).toLocaleDateString()})]}),a.treatmentRelated&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Related Treatment:"}),e.jsx("p",{className:"text-gray-900",children:a.treatmentRelated})]}),m&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Trend:"}),e.jsx("p",{className:`font-medium capitalize ${m==="improving"?"text-green-600":m==="worsening"?"text-red-600":"text-yellow-600"}`,children:m})]})]}),a.notes&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"}),e.jsx("p",{className:"text-gray-900",children:a.notes})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(D,{content:"Edit outcome",children:e.jsx("button",{onClick:()=>d(a),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(D,{content:"Remove outcome",children:e.jsx("button",{onClick:()=>O(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-4 h-4"})})})]})]})},a.id)})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?"Edit Outcome":"Add Outcome"})}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Outcome Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:p.type||"response",onChange:a=>i({...p,type:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"response",children:"Response Assessment"}),e.jsx("option",{value:"survival",children:"Survival Outcome"}),e.jsx("option",{value:"quality_of_life",children:"Quality of Life"}),e.jsx("option",{value:"biomarker",children:"Biomarker"}),e.jsx("option",{value:"functional_status",children:"Functional Status"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Measurement ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.measurement||"",onChange:a=>i({...p,measurement:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Tumor Size, ECOG Score",list:"measurement-suggestions"}),e.jsx("datalist",{id:"measurement-suggestions",children:p.type&&l[p.type]?.map((a,m)=>e.jsx("option",{value:a},m))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.value||"",onChange:a=>i({...p,value:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 5.2, Complete Response"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("input",{type:"text",value:p.unit||"",onChange:a=>i({...p,unit:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., cm, %, ng/mL"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:p.date||"",onChange:a=>i({...p,date:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Related Treatment"}),e.jsxs("select",{value:p.treatmentRelated||"",onChange:a=>i({...p,treatmentRelated:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select treatment (optional)"}),n.treatmentHistory?.map(a=>e.jsxs("option",{value:a.regimen||a.treatmentType,children:[a.regimen||a.treatmentType," (",new Date(a.startDate).toLocaleDateString(),")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:p.notes||"",onChange:a=>i({...p,notes:a.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional notes about this outcome..."})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between",children:[e.jsx("button",{onClick:()=>{g(!1),v(null),i({type:"response",measurement:"",value:"",unit:"",date:new Date().toISOString().split("T")[0],notes:"",treatmentRelated:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:y?h:C,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:y?"Update Outcome":"Add Outcome"})]})]})})]})},Ke=({patientId:L})=>{const{state:A}=F(),{currentPatient:x}=A,[n,o]=f.useState({demographics:!0,medications:!0,allergies:!0,conditions:!0,vitals:!0,labValues:!0,genetics:!1,treatmentHistory:!0,notes:!1}),[g,y]=f.useState("summary"),[v,b]=f.useState("download"),[P,w]=f.useState(""),[p,i]=f.useState(!0),[c,u]=f.useState(!1);if(!x)return e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a patient to export their data"})]})});const C=()=>{const t={patientInfo:{id:x.id,name:`${x.demographics.firstName} ${x.demographics.lastName}`,mrn:x.demographics.mrn,exportDate:new Date().toISOString(),exportedBy:"current-user"}};return n.demographics&&(t.demographics=x.demographics),n.medications&&(t.medications=x.medications),n.allergies&&(t.allergies=x.allergies),n.conditions&&(t.conditions=x.conditions),n.vitals&&(t.vitals=x.vitals),n.labValues&&(t.labValues=x.labValues),n.genetics&&(t.genetics=x.genetics),n.treatmentHistory&&(t.treatmentHistory=x.treatmentHistory),n.notes&&(t.notes=x.notes),t},d=()=>{const t=C(),l=p?new Date().toLocaleString():"";return`
PATIENT SUMMARY REPORT
${l?`Generated: ${l}`:""}
${"-".repeat(50)}

PATIENT INFORMATION
Name: ${t.patientInfo.name}
MRN: ${t.patientInfo.mrn||"Not specified"}
Date of Birth: ${t.demographics?.dateOfBirth||"Not specified"}
Sex: ${t.demographics?.sex||"Not specified"}
${t.demographics?.heightCm?`Height: ${t.demographics.heightCm} cm`:""}
${t.demographics?.weightKg?`Weight: ${t.demographics.weightKg} kg`:""}

${t.allergies?.length>0?`
ALLERGIES
${t.allergies.map(a=>`• ${a.allergen} (${a.severity}) - ${a.reaction}`).join(`
`)}
`:""}

${t.conditions?.length>0?`
MEDICAL CONDITIONS
${t.conditions.map(a=>`• ${a.name} (${a.status}) - Diagnosed: ${new Date(a.dateOfDiagnosis).toLocaleDateString()}`).join(`
`)}
`:""}

${t.medications?.length>0?`
CURRENT MEDICATIONS
${t.medications.filter(a=>a.isActive).map(a=>`• ${a.drugName} ${a.dosage} ${a.frequency} (${a.route})`).join(`
`)}
`:""}

${t.treatmentHistory?.length>0?`
TREATMENT HISTORY
${t.treatmentHistory.map(a=>`• ${a.treatmentType}${a.regimen?` - ${a.regimen}`:""} (${new Date(a.startDate).toLocaleDateString()}${a.endDate?` to ${new Date(a.endDate).toLocaleDateString()}`:" - ongoing"})`).join(`
`)}
`:""}

${t.vitals?.length>0?`
RECENT VITALS (${new Date(t.vitals[t.vitals.length-1].timestamp).toLocaleDateString()})
${t.vitals[t.vitals.length-1].bloodPressureSystolic?`Blood Pressure: ${t.vitals[t.vitals.length-1].bloodPressureSystolic}/${t.vitals[t.vitals.length-1].bloodPressureDiastolic} mmHg`:""}
${t.vitals[t.vitals.length-1].heartRate?`Heart Rate: ${t.vitals[t.vitals.length-1].heartRate} bpm`:""}
${t.vitals[t.vitals.length-1].temperature?`Temperature: ${t.vitals[t.vitals.length-1].temperature}°C`:""}
${t.vitals[t.vitals.length-1].performanceStatus!==void 0?`ECOG Performance Status: ${t.vitals[t.vitals.length-1].performanceStatus}`:""}
`:""}

${t.labValues?.length>0?`
RECENT LAB VALUES
${t.labValues.slice(-5).map(a=>`• ${a.labType}: ${a.value} ${a.unit} (${new Date(a.timestamp).toLocaleDateString()})${a.isAbnormal?" [ABNORMAL]":""}`).join(`
`)}
`:""}

${t.genetics?.length>0?`
GENETIC INFORMATION
${t.genetics.map(a=>`• ${a.geneSymbol}: ${a.phenotype}${a.metabolizerStatus?` (${a.metabolizerStatus} metabolizer)`:""}`).join(`
`)}
`:""}

${"-".repeat(50)}
This report was generated by OncoSafeRx
CONFIDENTIAL MEDICAL INFORMATION
    `.trim()},h=t=>{if(t.medications){const l=["Drug Name","Dosage","Frequency","Route","Start Date","Status"],a=t.medications.map(m=>[m.drugName||"",m.dosage||"",m.frequency||"",m.route||"",m.startDate||"",m.isActive?"Active":"Inactive"]);return[l,...a].map(m=>m.map(S=>`"${S}"`).join(",")).join(`
`)}return"No data selected for CSV export"},O=async()=>{const t=C();let l,a,m;switch(g){case"json":l=JSON.stringify(t,null,2),a=`patient-${x.demographics.firstName}-${x.demographics.lastName}-${Date.now()}.json`,m="application/json";break;case"csv":l=h(t),a=`patient-medications-${Date.now()}.csv`,m="text/csv";break;case"summary":l=d(),a=`patient-summary-${Date.now()}.txt`,m="text/plain";break;default:return}switch(v){case"download":const S=new Blob([l],{type:m}),k=URL.createObjectURL(S),E=document.createElement("a");E.href=k,E.download=a,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(k);break;case"copy":try{await navigator.clipboard.writeText(l),u(!0),setTimeout(()=>u(!1),2e3)}catch{alert("Failed to copy to clipboard")}break;case"print":const r=window.open("","_blank");r&&(r.document.write(`
            <html>
              <head>
                <title>Patient Report - ${x.demographics.firstName} ${x.demographics.lastName}</title>
                <style>
                  body { font-family: monospace; white-space: pre-wrap; padding: 20px; }
                  @media print { body { margin: 0; } }
                </style>
              </head>
              <body>${l}</body>
            </html>
          `),r.document.close(),r.print());break;case"email":if(!P){alert("Please enter an email address");return}const N=encodeURIComponent(`Patient Report - ${x.demographics.firstName} ${x.demographics.lastName}`),T=encodeURIComponent(l);window.open(`mailto:${P}?subject=${N}&body=${T}`);break}},M=t=>{o(l=>({...l,[t]:!l[t]}))},$=()=>{const t=Object.values(n).every(Boolean),l=Object.keys(n).reduce((a,m)=>({...a,[m]:!t}),{});o(l)},R=()=>{const t=C(),l=JSON.stringify(t),a=new Blob([l]).size;return a<1024?`${a} bytes`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`},s=t=>{if(!x)return 0;switch(t){case"medications":return x.medications?.length||0;case"allergies":return x.allergies?.length||0;case"conditions":return x.conditions?.length||0;case"vitals":return x.vitals?.length||0;case"labValues":return x.labValues?.length||0;case"genetics":return x.genetics?.length||0;case"treatmentHistory":return x.treatmentHistory?.length||0;case"notes":return x.notes?.length||0;case"demographics":return 1;default:return 0}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"w-6 h-6 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Data Export & Sharing"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Export ",x.demographics.firstName," ",x.demographics.lastName,"'s data for reporting, backup, or sharing"]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Export size: ",R()]})]})}),e.jsx(ae,{type:"warning",title:"Privacy & Security Notice",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:"Patient data contains sensitive health information. Please ensure compliance with HIPAA and institutional policies when sharing or exporting data."}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Only share data with authorized healthcare providers"}),e.jsx("li",{children:"Use secure channels for transmission"}),e.jsx("li",{children:"Remove or de-identify data when possible"}),e.jsx("li",{children:"Delete exported files after use"})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Data to Export"})]}),e.jsx("button",{onClick:$,className:"text-sm text-primary-600 hover:text-primary-700",children:Object.values(n).every(Boolean)?"Deselect All":"Select All"})]}),e.jsx("div",{className:"space-y-3",children:Object.entries(n).map(([t,l])=>e.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:()=>M(t),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:t.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s(t)," item",s(t)!==1?"s":""]})]})]}),t==="genetics"&&e.jsx(D,{content:"Genetic data requires special handling and may have additional privacy considerations",children:e.jsx(le,{className:"w-4 h-4 text-yellow-500"})})]},t))})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Re,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Options"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"summary",label:"Summary Report",icon:te},{value:"json",label:"JSON Data",icon:q},{value:"csv",label:"CSV (Medications)",icon:q},{value:"pdf",label:"PDF Report",icon:te,disabled:!0}].map(({value:t,label:l,icon:a,disabled:m})=>e.jsxs("button",{onClick:()=>!m&&y(t),disabled:m,className:`flex items-center space-x-2 p-3 border rounded-lg text-left transition-colors ${g===t&&!m?"border-primary-500 bg-primary-50 text-primary-700":m?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:l}),m&&e.jsx("span",{className:"text-xs",children:"(Coming Soon)"})]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sharing Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"download",label:"Download File",icon:q},{value:"copy",label:"Copy to Clipboard",icon:$e},{value:"print",label:"Print Report",icon:Ie},{value:"email",label:"Email Report",icon:he}].map(({value:t,label:l,icon:a})=>e.jsxs("button",{onClick:()=>b(t),className:`flex items-center space-x-2 p-3 border rounded-lg text-left transition-colors ${v===t?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:l})]},t))})]}),v==="email"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:P,onChange:t=>w(t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"recipient@hospital.org"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t=>i(t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include timestamp in export"})]})})]})]})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ready to Export"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Object.values(n).filter(Boolean).length," section",Object.values(n).filter(Boolean).length!==1?"s":""," selected • ",g.toUpperCase()," format • ",v," method"]})]}),e.jsxs("button",{onClick:O,disabled:!Object.values(n).some(Boolean),className:"flex items-center space-x-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[c?e.jsx(W,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:c?"Copied!":v==="copy"?"Copy Data":v==="email"?"Send Email":v==="print"?"Print Report":"Download"})]})]})})]})},Qe=()=>{const{state:L,actions:A}=F(),{showToast:x}=ue(),{currentPatient:n,alerts:o,isLoading:g,error:y}=L,[v,b]=f.useState("overview");if(g)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Oe,{size:"lg"})});if(!n)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No Patient Selected"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Select a patient to view their clinical profile"})]});const P=d=>{const h=new Date,O=new Date(d);let M=h.getFullYear()-O.getFullYear();const $=h.getMonth()-O.getMonth();return($<0||$===0&&h.getDate()<O.getDate())&&M--,M},w=(d,h)=>!d||!h?null:Math.sqrt(d*h/3600),p=()=>o.filter(d=>d.patientId===n.id&&!d.isAcknowledged),i=()=>n.labValues.sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime()).slice(0,5),c=()=>n.medications.filter(d=>d.isActive),u=()=>n.vitals.sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime())[0],C=[{id:"overview",label:"Overview",icon:Ee},{id:"medications",label:"Medications",icon:J},{id:"labs",label:"Lab Values",icon:ie},{id:"genetics",label:"Genomics",icon:ee},{id:"history",label:"History",icon:Q},{id:"outcomes",label:"Outcomes",icon:V},{id:"export",label:"Export",icon:te}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("button",{onClick:async()=>{if(!n||!confirm("Delete this patient?"))return;const d=n;A.removePatient(n.id),x("success","Patient deleted",5e3,{label:"Undo",onClick:async()=>{A.setCurrentPatient(d);try{const{data:h}=await K.auth.getSession(),O=h?.session?.access_token;O&&await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({patient:d})})}catch{}}})},className:"inline-flex items-center px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:[e.jsx(G,{className:"w-4 h-4 mr-1"})," Delete Patient"]})}),y&&e.jsx(ae,{type:"error",title:"Error",children:y}),p().length>0&&e.jsx("div",{className:"space-y-2",children:p().map((d,h)=>e.jsx(ae,{type:d.severity==="critical"?"error":d.severity==="high"?"warning":"info",title:d.message,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[d.details&&e.jsx("p",{className:"text-sm mt-1",children:d.details}),d.recommendedAction&&e.jsxs("p",{className:"text-sm mt-2 font-medium",children:["Recommended: ",d.recommendedAction]})]}),e.jsx("button",{onClick:()=>A.acknowledgeAlert(d.id),className:"ml-4 px-3 py-1 text-xs bg-white bg-opacity-20 rounded hover:bg-opacity-30",children:"Acknowledge"})]})},d.id||`alert-${h}`))}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n.demographics.firstName," ",n.demographics.lastName]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsxs("span",{children:[P(n.demographics.dateOfBirth)," years old"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"capitalize",children:n.demographics.sex})]}),n.demographics.mrn&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsxs("span",{children:["MRN: ",n.demographics.mrn]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{content:"Edit patient information",children:e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(D,{content:"View clinical alerts",children:e.jsxs("button",{className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 relative",children:[e.jsx(je,{className:"w-4 h-4"}),p().length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"Height/Weight"})]}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:[n.demographics.heightCm?`${n.demographics.heightCm} cm`:"N/A"," / "," ",n.demographics.weightKg?`${n.demographics.weightKg} kg`:"N/A"]}),n.demographics.heightCm&&n.demographics.weightKg&&e.jsxs("div",{className:"text-xs text-gray-500",children:["BSA: ",w(n.demographics.heightCm,n.demographics.weightKg)?.toFixed(2)," m²"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Active Medications"})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:c().length})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Allergies"})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:n.allergies.length})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Last Updated"})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Date(n.lastUpdated).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:C.map(d=>{const h=d.icon;return e.jsxs("button",{onClick:()=>b(d.id),className:`group inline-flex items-center space-x-2 py-4 px-6 border-b-2 font-medium text-sm ${v===d.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:d.label})]},d.id)})})}),e.jsxs("div",{className:"p-6",children:[v==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ne,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contact Information"})]}),e.jsxs("div",{className:"space-y-3",children:[n.demographics.contact?.phone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:n.demographics.contact.phone})]}),n.demographics.contact?.email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:n.demographics.contact.email})]}),n.demographics.contact?.address&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:n.demographics.contact.address})]})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Vitals"}),e.jsx(D,{content:"Most recent vital signs and performance status",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),u()?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u().bloodPressureSystolic&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"BP:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[u().bloodPressureSystolic,"/",u().bloodPressureDiastolic]})]},"blood-pressure"),u().heartRate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"HR:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[u().heartRate," bpm"]})]},"heart-rate"),u().temperature&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Temp:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[u().temperature,"°C"]})]},"temperature"),u().performanceStatus!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"ECOG:"}),e.jsx("span",{className:"ml-1 font-medium",children:u().performanceStatus})]},"performance-status")]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No recent vitals recorded"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Allergies"}),e.jsx(D,{content:"Known drug and environmental allergies with severity levels",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(Y,{className:"w-4 h-4"})})]}),n.allergies.length>0?e.jsx("div",{className:"space-y-2",children:n.allergies.map((d,h)=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${d.severity==="life-threatening"?"border-red-500 bg-red-50":d.severity==="severe"?"border-orange-500 bg-orange-50":d.severity==="moderate"?"border-yellow-500 bg-yellow-50":"border-gray-500 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:d.allergen}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",d.allergenType,")"]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.severity==="life-threatening"?"bg-red-100 text-red-800":d.severity==="severe"?"bg-orange-100 text-orange-800":d.severity==="moderate"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:d.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.reaction})]},d.id||`allergy-${h}`))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No known allergies"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Lab Values"}),e.jsx(D,{content:"Most recent laboratory test results with reference ranges",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),i().length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Test"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i().map((d,h)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm font-medium text-gray-900",children:d.labType}),e.jsxs("td",{className:`px-3 py-2 text-sm ${d.isAbnormal?"text-red-600 font-medium":"text-gray-900"}`,children:[d.value," ",d.unit,d.criticalFlag&&e.jsx("span",{className:"ml-1 text-red-500",children:"⚠"})]}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:d.referenceRange}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:new Date(d.timestamp).toLocaleDateString()})]},`${d.labType}-${d.timestamp}-${h}`))})]})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No recent lab values"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(He,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI & Advanced Features"}),e.jsx(D,{content:"Access powerful AI and analytics tools for this patient",children:e.jsx(I,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"group bg-gradient-to-br from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/ai-decision-engine",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ne,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"AI Decision Engine"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Clinical decision support"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Get AI-powered clinical recommendations and drug interaction analysis"}),e.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-medium group-hover:text-blue-700",children:[e.jsx("span",{children:"Launch AI Analysis"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/safety-alerts",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Safety Alerts"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Real-time monitoring"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Monitor drug safety alerts and potential adverse events"}),e.jsxs("div",{className:"flex items-center text-green-600 text-sm font-medium group-hover:text-green-700",children:[e.jsx("span",{children:"View Safety Dashboard"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/ml-analytics",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"ML Analytics"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Advanced insights"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Access machine learning analytics and predictive models"}),e.jsxs("div",{className:"flex items-center text-orange-600 text-sm font-medium group-hover:text-orange-700",children:[e.jsx("span",{children:"Open Analytics"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/predictive-outcomes",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Predictive Outcomes"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Treatment predictions"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Generate AI-powered treatment outcome predictions"}),e.jsxs("div",{className:"flex items-center text-purple-600 text-sm font-medium group-hover:text-purple-700",children:[e.jsx("span",{children:"Generate Predictions"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/clinical-communication",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Team Communication"}),e.jsx("p",{className:"text-xs text-gray-600",children:"HIPAA-compliant messaging"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Secure team communication and collaboration"}),e.jsxs("div",{className:"flex items-center text-teal-600 text-sm font-medium group-hover:text-teal-700",children:[e.jsx("span",{children:"Open Messenger"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-indigo-50 to-blue-50 border border-indigo-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/iot-monitoring",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"IoT Monitoring"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Connected devices"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Monitor connected health devices and sensors"}),e.jsxs("div",{className:"flex items-center text-indigo-600 text-sm font-medium group-hover:text-indigo-700",children:[e.jsx("span",{children:"View Devices"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"group bg-gradient-to-br from-red-50 to-pink-50 border border-red-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/opioid-risk-report",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Opioid Risk Report"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Addiction risk assessment"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Comprehensive addiction risk and pharmacogenomic analysis"}),e.jsxs("div",{className:"flex items-center text-red-600 text-sm font-medium group-hover:text-red-700",children:[e.jsx("span",{children:"View Risk Assessment"}),e.jsx(H,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})]})]})]}),v==="medications"&&e.jsx(qe,{}),v==="genetics"&&e.jsx(Ve,{}),v==="history"&&e.jsx(_e,{}),v==="outcomes"&&e.jsx(Ye,{}),v==="export"&&e.jsx(Ke,{}),v==="labs"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(ie,{className:"w-12 h-12 mx-auto"})}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Lab Management"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Coming soon in Phase 2"})]})]})]})]})},ws=()=>{const L=De(),{state:A}=F(),{currentPatient:x}=A,n=()=>{x&&L("/interactions?patient="+x.id)},o=()=>{x&&L("/genomics?patient="+x.id)},g=()=>{x&&L("/regimens?patient="+x.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(me,{className:"w-8 h-8 text-primary-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Patient Management"}),e.jsx(D,{content:"Comprehensive patient profile management with clinical data, medication history, and safety alerts",children:e.jsx(I,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Search for existing patients or create new patient profiles to access comprehensive clinical information and decision support tools."}),e.jsx("div",{className:"mt-3",children:e.jsx(ke,{to:"/patients/all",className:"text-sm text-blue-600 hover:underline",children:"View all patients"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ue,{})}),e.jsx("div",{className:"lg:col-span-2",children:x?e.jsx(Qe,{}):e.jsx(j,{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No Patient Selected"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Search for an existing patient or create a new patient profile to begin accessing clinical information and decision support tools."})]})})})]}),x&&e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Common clinical workflows for this patient"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700",children:"Check Interactions"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-md hover:bg-purple-700",children:"Genomic Analysis"}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700",children:"Plan Regimen"})]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Safety Features"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Allergy Checking"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Automatic cross-referencing of patient allergies with drug selections to prevent adverse reactions and ensure safe prescribing practices."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Clinical Alerts"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Real-time alerts for drug interactions, contraindications, dosing concerns, and monitoring requirements based on patient-specific factors."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Genomic Integration"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Integration of pharmacogenomic data to personalize drug selection and dosing based on individual genetic variants and metabolizer status."})]})]})]})})]})};export{ws as default};
//# sourceMappingURL=Patients-LMfw2EHT.js.map
