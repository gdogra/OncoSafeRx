import{c as d,p as X,r,j as e,K as v,e as Z,a as w,v as P,S as ee,F as _,X as te,a4 as se,T as ae}from"./index-4Ly-s4cr.js";import{C as o}from"./Card-DLOVFYwQ.js";import{V as g}from"./video-BISb6mEs.js";import{P as ne}from"./plus-7LXijMKD.js";import{S as E}from"./settings-BG7XI4yB.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ie=d("hash",re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ce=d("image",le);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],de=d("mic-off",oe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],S=d("mic",me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ue=d("paperclip",xe),Ne=()=>{const{state:R}=X(),{currentPatient:n}=R,[i,C]=r.useState(null),[D,y]=r.useState([]),[m,x]=r.useState([]),[u,I]=r.useState(""),[b,$]=r.useState(!1),[c,f]=r.useState(null),[p,j]=r.useState([]),[h,T]=r.useState(""),[pe,he]=r.useState(!1),[N,k]=r.useState([]),M=r.useRef(null),A=r.useRef(null);r.useEffect(()=>{L();const t=setInterval(V,5e3);return()=>clearInterval(t)},[n]),r.useEffect(()=>{J()},[D]);const L=()=>{if(!n)return;const t=[{id:"channel-1",name:"Oncology Team",type:"group",participants:[{id:"dr-smith",name:"Dr. Sarah Smith",role:"Oncologist",status:"online"},{id:"nurse-jones",name:"Nurse Emily Jones",role:"Oncology Nurse",status:"online"},{id:"pharm-brown",name:"Dr. Michael Brown",role:"Clinical Pharmacist",status:"away"},{id:"ai-assistant",name:"OncoAI Assistant",role:"AI Assistant",status:"online"}],patient_id:n.id,unread_count:3,created_at:new Date().toISOString(),security_level:"hipaa_compliant"},{id:"channel-2",name:"Patient Care Coordination",type:"department",participants:[{id:"coord-wilson",name:"Lisa Wilson",role:"Care Coordinator",status:"online"},{id:"soc-worker",name:"James Davis",role:"Social Worker",status:"offline",last_seen:"2 hours ago"},{id:"nutrit-garcia",name:"Maria Garcia",role:"Nutritionist",status:"busy"}],patient_id:n.id,unread_count:1,created_at:new Date().toISOString(),security_level:"phi_secure"},{id:"channel-3",name:"Emergency Consultation",type:"emergency",participants:[{id:"er-doc",name:"Dr. Robert Lee",role:"Emergency Physician",status:"online"},{id:"intensivist",name:"Dr. Jennifer Chen",role:"Intensivist",status:"online"}],unread_count:0,created_at:new Date().toISOString(),security_level:"hipaa_compliant"},{id:"channel-4",name:"AI Clinical Assistant",type:"ai_consultation",participants:[{id:"ai-clinical",name:"OncoSafeRx AI",role:"AI Assistant",status:"online"},{id:"current-user",name:"You",role:"Physician",status:"online"}],patient_id:n.id,unread_count:0,created_at:new Date().toISOString(),security_level:"standard"}],s=[{id:"msg-1",type:"text",sender:{id:"dr-smith",name:"Dr. Sarah Smith",role:"physician"},content:"Lab results for CBC are in. Neutrophil count looks good for next cycle.",timestamp:new Date(Date.now()-36e5).toISOString(),read_by:["current-user"],priority:"normal",patient_id:n.id,encryption_level:"hipaa",tags:["lab-results","neutrophils"]},{id:"msg-2",type:"alert",sender:{id:"system",name:"OncoSafeRx System",role:"system"},content:"Drug interaction alert: New medication may interact with current regimen.",timestamp:new Date(Date.now()-18e5).toISOString(),read_by:[],priority:"high",patient_id:n.id,encryption_level:"phi_encrypted",tags:["drug-interaction","alert"]},{id:"msg-3",type:"text",sender:{id:"nurse-jones",name:"Nurse Emily Jones",role:"nurse"},content:"Patient reports mild nausea this morning. Administered ondansetron 4mg IV as ordered.",timestamp:new Date(Date.now()-9e5).toISOString(),read_by:["dr-smith"],priority:"normal",patient_id:n.id,encryption_level:"hipaa",tags:["side-effects","medication-admin"]},{id:"msg-4",type:"text",sender:{id:"ai-assistant",name:"OncoAI Assistant",role:"ai_assistant"},content:"Based on latest lab values and patient response, treatment appears to be well-tolerated. Consider continuing current regimen.",timestamp:new Date(Date.now()-3e5).toISOString(),read_by:[],priority:"normal",patient_id:n.id,encryption_level:"standard",tags:["ai-recommendation","treatment-plan"]}];x(t),y(s),C("channel-1")},V=()=>{const t=[()=>F(),()=>H(),()=>U()],s=t[Math.floor(Math.random()*t.length)];Math.random()<.3&&s()},F=()=>{const t=["dr-smith","nurse-jones","ai-assistant"],s=t[Math.floor(Math.random()*t.length)];k(a=>[...a,s]),setTimeout(()=>{k(a=>a.filter(l=>l!==s))},3e3)},H=()=>{x(t=>t.map(s=>({...s,participants:s.participants.map(a=>({...a,status:Math.random()<.1?["online","away","busy"][Math.floor(Math.random()*3)]:a.status}))})))},U=()=>{if(!n)return;const t=["New clinical trial matching patient profile found. Would you like me to provide details?","Reminder: Patient due for follow-up labs in 2 days.","Drug interaction check complete. No significant interactions detected.","Patient vital signs monitoring shows stable trends.","New evidence-based treatment recommendation available based on recent publications."],s={id:`msg-${Date.now()}`,type:"text",sender:{id:"ai-assistant",name:"OncoAI Assistant",role:"ai_assistant"},content:t[Math.floor(Math.random()*t.length)],timestamp:new Date().toISOString(),read_by:[],priority:"normal",patient_id:n.id,encryption_level:"standard",tags:["ai-update"]};y(a=>[...a,s]),x(a=>a.map(l=>l.id===i?{...l,unread_count:l.unread_count+1,last_message:s}:l))},O=()=>{if(!u.trim()||!n||!i)return;const t={id:`msg-${Date.now()}`,type:"text",sender:{id:"current-user",name:"You",role:"physician"},content:u,timestamp:new Date().toISOString(),read_by:["current-user"],priority:"normal",patient_id:n.id,encryption_level:"hipaa",attachments:p.length>0?p.map((s,a)=>({id:`att-${Date.now()}-${a}`,name:s.name,type:s.type,size:s.size,url:URL.createObjectURL(s)})):void 0};y(s=>[...s,t]),I(""),j([]),x(s=>s.map(a=>a.id===i?{...a,last_message:t}:a))},z=()=>{const t={id:`call-${Date.now()}`,participants:["current-user"],status:"ongoing",start_time:new Date().toISOString(),recording_available:!1,patient_consent:!0,call_type:"consultation"};f(t)},B=()=>{c&&(f({...c,status:"ended",end_time:new Date().toISOString()}),setTimeout(()=>f(null),2e3))},J=()=>{A.current?.scrollIntoView({behavior:"smooth"})},K=t=>{switch(t){case"voice":return e.jsx(S,{className:"w-4 h-4"});case"video":return e.jsx(g,{className:"w-4 h-4"});case"file":return e.jsx(_,{className:"w-4 h-4"});case"image":return e.jsx(ce,{className:"w-4 h-4"});case"alert":return e.jsx(ae,{className:"w-4 h-4"});case"system":return e.jsx(E,{className:"w-4 h-4"});default:return e.jsx(v,{className:"w-4 h-4"})}},W=t=>{switch(t){case"physician":return"text-blue-600";case"nurse":return"text-green-600";case"pharmacist":return"text-purple-600";case"ai_assistant":return"text-orange-600";case"system":return"text-gray-600";default:return"text-gray-600"}},q=t=>{switch(t){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}},Q=t=>{switch(t){case"urgent":return"border-l-4 border-red-500 bg-red-50";case"high":return"border-l-4 border-orange-500 bg-orange-50";case"normal":return"border-l-4 border-blue-500 bg-blue-50";case"low":return"border-l-4 border-gray-500 bg-gray-50";default:return"border-l-4 border-gray-500 bg-gray-50"}},Y=D.filter(t=>i&&t.patient_id===n?.id&&(h===""||t.content.toLowerCase().includes(h.toLowerCase())||t.sender.name.toLowerCase().includes(h.toLowerCase())));return n?e.jsxs("div",{className:"h-screen flex flex-col space-y-4",children:[e.jsx(o,{className:"bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clinical Communication Hub"}),e.jsxs("p",{className:"text-gray-600",children:["Secure communication for ",n.demographics.firstName," ",n.demographics.lastName]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{content:"HIPAA-compliant secure messaging",children:e.jsx(w,{className:"w-5 h-5 text-green-600"})}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"End-to-End Encrypted"})]})]})}),c&&e.jsx(o,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Video Call Active"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.call_type," - Started ",new Date(c.start_time).toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 bg-white bg-opacity-50 rounded-lg hover:bg-opacity-75",children:e.jsx(S,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{className:"p-2 bg-white bg-opacity-50 rounded-lg hover:bg-opacity-75",children:e.jsx(g,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:B,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:e.jsx(P,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4 h-0",children:[e.jsxs(o,{className:"col-span-1 p-0 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Channels"}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search channels...",value:h,onChange:t=>T(t.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:m.map(t=>e.jsxs("div",{onClick:()=>C(t.id),className:`p-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${i===t.id?"bg-blue-50 border-blue-200":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:t.name})]}),t.unread_count>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:t.unread_count})]}),e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[t.participants.slice(0,3).map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${q(s.status)}`}),e.jsx("span",{className:"text-xs text-gray-600 truncate",children:s.name.split(" ")[0]})]},a)),t.participants.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.participants.length-3]})]}),t.last_message&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[t.last_message.sender.name,": ",t.last_message.content]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.type==="emergency"?"bg-red-100 text-red-600":t.type==="ai_consultation"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-600"}`,children:t.type.replace("_"," ")}),t.security_level==="hipaa_compliant"&&e.jsx(w,{className:"w-3 h-3 text-green-500"})]})]},t.id))})]}),e.jsxs(o,{className:"col-span-3 p-0 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:i&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.find(t=>t.id===i)?.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[m.find(t=>t.id===i)?.participants.length," members"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[m.find(t=>t.id===i)?.participants.filter(t=>t.status==="online").length," online"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:z,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(g,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg",children:e.jsx(E,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Y.map(t=>e.jsxs("div",{className:`flex space-x-3 ${Q(t.priority)} p-3 rounded-lg`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-600",children:t.sender.name.split(" ").map(s=>s[0]).join("").substring(0,2)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`font-medium ${W(t.sender.role)}`,children:t.sender.name}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.timestamp).toLocaleTimeString()}),K(t.type),t.priority!=="normal"&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.priority==="urgent"?"bg-red-100 text-red-600":t.priority==="high"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:t.priority})]}),e.jsx("p",{className:"text-gray-800",children:t.content}),t.attachments&&t.attachments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:t.attachments.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-50 rounded",children:[e.jsx(_,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-600 hover:underline cursor-pointer",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(s.size/1024).toFixed(1)," KB)"]})]},s.id))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.tags.map((s,a)=>e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["#",s]},a))})]})]},t.id)),N.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 italic",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsxs("span",{className:"text-sm",children:[N.join(", ")," ",N.length>1?"are":"is"," typing..."]})]}),e.jsx("div",{ref:A})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[p.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:p.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:t.name}),e.jsx("button",{onClick:()=>j(a=>a.filter((l,G)=>G!==s)),className:"text-blue-600 hover:text-blue-800",children:e.jsx(te,{className:"w-3 h-3"})})]},s))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M.current?.click(),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(!b),className:`p-2 rounded-lg ${b?"text-red-600 bg-red-50 hover:bg-red-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:b?e.jsx(de,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:u,onChange:t=>I(t.target.value),onKeyPress:t=>t.key==="Enter"&&O(),placeholder:"Type a secure message...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[e.jsx(w,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:"Encrypted"})]})]}),e.jsx("button",{onClick:O,disabled:!u.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:e.jsx(se,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"Messages are HIPAA-compliant and end-to-end encrypted"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Patient ID: ",n.id]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Secure Channel"})]})]})]})]})]}),e.jsx("input",{ref:M,type:"file",multiple:!0,onChange:t=>{t.target.files&&j(s=>[...s,...Array.from(t.target.files)])},className:"hidden"})]}):e.jsx(o,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"Clinical Communication Hub"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Select a patient to access secure clinical communication and collaboration tools"})]})})};export{Ne as default};
//# sourceMappingURL=ClinicalCommunicationHub-DGT_zBr5.js.map
