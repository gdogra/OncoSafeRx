import{j as e,r as n}from"./index-8LC8IQKY.js";import{c as w}from"./App-oj_FpO4B.js";import{u as E,R as z}from"./rbac-DpwsYsqu.js";import{u as A}from"./index-DcGTfjVj.js";import{c as C}from"./createLucideIcon-DlukwGQd.js";import{S as b}from"./shield-BY4b8Nc2.js";import{R as H}from"./refresh-cw-COcu3qHG.js";import{U as F}from"./user-check-CZtgUogz.js";import{M as B}from"./monitor-DSWzcTCy.js";import{U as o}from"./users-CyD4O_24.js";import{C as m}from"./chart-column-Cpp69poi.js";import{S as p}from"./settings-BOlIvdsj.js";import{F as u}from"./file-text-CyEOTfEa.js";import{A as V}from"./activity-BXSagPiR.js";import{C as q}from"./clock-cnhIl4So.js";import{T as v}from"./triangle-alert-BOEc2-VO.js";import{C as J}from"./circle-check-big-CYsdojUB.js";import{P as Q}from"./plus-BSkQUrbd.js";import{S as Y}from"./search-Cd1nfMpK.js";import{S as G}from"./square-pen-5H-W882X.js";import{L as K}from"./lock-Dr1fWQdF.js";import{E as W}from"./eye-DBjH61aH.js";import{C as X}from"./chevron-right-gr4R8e8i.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ee=C("lock-open",Z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],te=C("log-out",se),ae=()=>{const{actions:x,state:i}=w(),t=A(),h=()=>{x.logout(),t("/login")};return e.jsxs("button",{onClick:h,className:"fixed top-4 right-4 z-50 flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors shadow-lg",style:{zIndex:9999},children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:i.isAuthenticated?"Logout":"Not Logged In"})]})},Le=()=>{const{state:x}=w(),{user:i}=x,t=E(i),h=A(),[l,c]=n.useState("overview"),[S,L]=n.useState([]),[a,U]=n.useState(null),[k,j]=n.useState(!0),[d,_]=n.useState("");n.useEffect(()=>{t.canAccessAdminConsole()&&M()},[]);const M=async()=>{j(!0);try{await new Promise(s=>setTimeout(s,1e3)),L([{id:"user-1",email:"admin@oncosaferx.com",firstName:"System",lastName:"Administrator",roles:["super_admin"],isActive:!0,lastLogin:new Date().toISOString(),loginCount:156,organizationId:"org-1"},{id:"user-2",email:"analytics@oncosaferx.com",firstName:"Analytics",lastName:"Manager",roles:["analytics_admin"],isActive:!0,lastLogin:new Date(Date.now()-7200*1e3).toISOString(),loginCount:89,organizationId:"org-1"},{id:"user-3",email:"dr.smith@hospital.com",firstName:"Dr. Sarah",lastName:"Smith",roles:["oncologist"],isActive:!0,lastLogin:new Date(Date.now()-1800*1e3).toISOString(),loginCount:234,organizationId:"org-2"},{id:"user-4",email:"pharmacist@hospital.com",firstName:"Michael",lastName:"Johnson",roles:["pharmacist"],isActive:!1,lastLogin:new Date(Date.now()-10080*60*1e3).toISOString(),loginCount:45,organizationId:"org-2"}]),U({totalUsers:1247,activeUsers:892,onlineUsers:43,systemUptime:"15d 4h 32m",memoryUsage:68.5,cpuUsage:23.1,databaseConnections:12,errorRate:.02})}catch(s){console.error("Failed to load admin data:",s)}finally{j(!1)}},D=s=>s?"bg-green-100 text-green-800":"bg-red-100 text-red-800",N=s=>{const r=z[s.toUpperCase()];return r?r.name:s},R=s=>{const r=new Date,I=new Date(s),g=r.getTime()-I.getTime(),f=Math.floor(g/(1e3*60)),y=Math.floor(g/(1e3*60*60)),$=Math.floor(g/(1e3*60*60*24));return f<60?`${f}m ago`:y<24?`${y}h ago`:`${$}d ago`},P=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?.totalUsers})]}),e.jsx(o,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Online Now"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a?.onlineUsers})]}),e.jsx(V,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a?.systemUptime})]}),e.jsx(q,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Error Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[(a?.errorRate||0).toFixed(2),"%"]})]}),e.jsx(v,{className:"w-8 h-8 text-orange-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Performance"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Memory Usage"}),e.jsxs("span",{className:"font-medium",children:[a?.memoryUsage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a?.memoryUsage}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"CPU Usage"}),e.jsxs("span",{className:"font-medium",children:[a?.cpuUsage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a?.cpuUsage}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?.databaseConnections}),e.jsx("p",{className:"text-sm text-gray-600",children:"DB Connections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?.activeUsers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1 bg-green-100 rounded-full",children:e.jsx(J,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"System backup completed"}),e.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1 bg-blue-100 rounded-full",children:e.jsx(o,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"New user registered"}),e.jsx("p",{className:"text-xs text-gray-500",children:"15 minutes ago"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1 bg-orange-100 rounded-full",children:e.jsx(v,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"High memory usage detected"}),e.jsx("p",{className:"text-xs text-gray-500",children:"1 hour ago"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-1 bg-purple-100 rounded-full",children:e.jsx(m,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Analytics report generated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"3 hours ago"})]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.hasPermission("manage_users")&&e.jsxs("button",{onClick:()=>c("users"),className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(o,{className:"w-6 h-6 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Manage Users"})]}),t.hasPermission("view_visitor_analytics")&&e.jsxs("button",{onClick:()=>c("analytics"),className:"flex items-center space-x-3 p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(m,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"View Analytics"})]}),t.hasPermission("view_audit_logs")&&e.jsxs("button",{onClick:()=>c("audit"),className:"flex items-center space-x-3 p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors",children:[e.jsx(u,{className:"w-6 h-6 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"Audit Logs"})]}),t.hasPermission("manage_system_settings")&&e.jsxs("button",{onClick:()=>c("system"),className:"flex items-center space-x-3 p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors",children:[e.jsx(p,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{className:"font-medium text-orange-900",children:"System Settings"})]})]})})]})]}),O=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage user accounts, roles, and permissions"})]}),t.hasPermission("manage_users")&&e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:"Add User"})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:d,onChange:s=>_(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"system_admin",children:"System Admin"}),e.jsx("option",{value:"analytics_admin",children:"Analytics Admin"}),e.jsx("option",{value:"oncologist",children:"Oncologist"}),e.jsx("option",{value:"pharmacist",children:"Pharmacist"}),e.jsx("option",{value:"nurse",children:"Nurse"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Login Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.filter(s=>s.firstName.toLowerCase().includes(d.toLowerCase())||s.lastName.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase())).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[s.firstName[0],s.lastName[0]]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles.map(r=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold bg-purple-100 text-purple-800 rounded-full",children:N(r)},r))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(s.isActive)}`,children:s.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R(s.lastLogin)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.loginCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[t.hasPermission("manage_users")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.isActive?e.jsx(K,{className:"w-4 h-4"}):e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(W,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]}),T=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Analytics Dashboard Access"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Access comprehensive visitor analytics and real-time tracking data."}),e.jsxs("button",{onClick:()=>h("/visitor-analytics"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Open Analytics Dashboard"}),e.jsx(X,{className:"w-4 h-4"})]})]})});return t.canAccessAdminConsole()?k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Loading admin console..."})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx(ae,{}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Console"}),e.jsx("p",{className:"text-gray-600",children:"System administration and visitor analytics management"})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Logged in as: ",i?.firstName," ",i?.lastName," (",i?.roles.map(s=>N(s)).join(", "),")"]})]}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Hierarchy Level: ",t.getUserHierarchyLevel()]})]})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:B,permission:null},{id:"users",label:"Users",icon:o,permission:"manage_users"},{id:"analytics",label:"Analytics",icon:m,permission:"view_visitor_analytics"},{id:"system",label:"System",icon:p,permission:"manage_system_settings"},{id:"audit",label:"Audit Logs",icon:u,permission:"view_audit_logs"}].filter(s=>!s.permission||t.hasPermission(s.permission)).map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>c(s.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${l===s.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:s.label})]},s.id)})})}),l==="overview"&&P(),l==="users"&&O(),l==="analytics"&&T(),l==="system"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"System Settings"}),e.jsx("p",{className:"text-gray-600",children:"System configuration and settings management."})]}),l==="audit"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Audit Logs"}),e.jsx("p",{className:"text-gray-600",children:"System audit trails and compliance logging."})]})]}):e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(b,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700",children:"You don't have permission to access the admin console."}),e.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Required permissions: Admin Console Access"})]})})};export{Le as default};
