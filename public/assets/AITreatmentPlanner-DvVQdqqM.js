import{j as e,r as n}from"./index-8LC8IQKY.js";import{C as m}from"./Card-D3HCI77k.js";import{L as A}from"./LoadingSpinner-Dl5grMUf.js";import{T as $}from"./Tooltip-CCp_Mki3.js";import{F as le}from"./FeatureErrorBoundary-C-SWZJ4k.js";import{B as E}from"./brain-CKq3hGqe.js";import{E as se}from"./eye-DBjH61aH.js";import{D as te}from"./dna-CkqnhaTf.js";import{T as I}from"./target-BsLO2_W8.js";import{F as H}from"./file-text-CyEOTfEa.js";import{C as F}from"./calculator-CIMTtdvV.js";import{C as q}from"./chart-column-Cpp69poi.js";import{C as w}from"./circle-check-big-CYsdojUB.js";import{A as Y}from"./activity-BXSagPiR.js";import{Z as Ve}from"./zap-BTYUmM9b.js";import{S as _e}from"./settings-BOlIvdsj.js";import{R as Ue}from"./rotate-ccw-EnHyOvNu.js";import{P as Qe}from"./play-vVF7W7nB.js";import{M as We}from"./microscope-DXfhDYoD.js";import{F as Ke}from"./flask-conical-C6l_pjLP.js";import{T as j}from"./triangle-alert-BOEc2-VO.js";import{S as ie}from"./shield-BY4b8Nc2.js";import{D as Xe}from"./database-B2dB_f4w.js";import{B as Ze}from"./beaker-D4wMNWRs.js";import{T as ae}from"./test-tube-Hkyfs53W.js";import{S as Je}from"./star-BHZprFQJ.js";import{M as es}from"./map-pin-DAr6LCg8.js";import{U as ss}from"./users-CyD4O_24.js";import{C as re}from"./calendar-B3krNJ8E.js";import{P as ts}from"./phone-BDjQDKh0.js";import{M as is}from"./mail-CBMmcK37.js";import{E as as}from"./external-link-Do2W_skG.js";import{F as rs}from"./funnel-BoLak_RK.js";import{T as ne}from"./trending-up-B8-67GCO.js";import{L as ns}from"./layers-CM17wt9t.js";import{M as ls}from"./mouse-pointer-9kOaojMk.js";import{M as cs}from"./maximize-2-Bx0sx1br.js";import{C as ds}from"./clock-cnhIl4So.js";import{T as os}from"./trending-down-DFu57dNF.js";import"./info-BEmptaGI.js";import"./createLucideIcon-DlukwGQd.js";import"./circle-alert-DFeyOpEy.js";import"./circle-question-mark-UIDQGT3E.js";import"./refresh-cw-COcu3qHG.js";import"./house-svls-J_z.js";const ms=()=>{const[hs,ps]=n.useState(null),[d,ce]=n.useState(null),[O,de]=n.useState([]),[c,V]=n.useState(null),[_,oe]=n.useState([]),[L,u]=n.useState(!1),[p,me]=n.useState(null),[l,f]=n.useState({isRunning:!1,currentStep:0,totalSteps:5,scenarios:[],activeScenario:null,comparison:null}),[S,xe]=n.useState(!1),[b,C]=n.useState({dosageReduction:0,addSupportiveCare:!1,alternativeSchedule:!1,combinationTherapy:!1}),[o,he]=n.useState(null),[k,pe]=n.useState(!1),[D,U]=n.useState(!1),[M,ge]=n.useState(null),[R,ue]=n.useState(!1),[z,Q]=n.useState(!1),[gs,us]=n.useState(null),[y,je]=n.useState(null),[P,fe]=n.useState(!1),[x,W]=n.useState("setup"),[be,ye]=n.useState(!0),[ve,K]=n.useState(!1),[v,Ne]=n.useState("timeline"),[G,X]=n.useState("overview"),[T,we]=n.useState(!0),[N,Se]=n.useState(!0);n.useEffect(()=>{Ce()},[]);const Ce=async()=>{u(!0);try{await new Promise(a=>setTimeout(a,1500));const s={hlaTypes:["HLA-B*5701","HLA-DQA1*05:01"],cypVariants:{CYP2D6:"*1/*4",CYP3A4:"*1/*1",CYP2C19:"*1/*2"},dpydVariants:["c.1905+1G>A"],otherVariants:{TPMT:"*1/*3C",UGT1A1:"*28/*28"},riskScore:.75,pharmacogenomics:{metabolizerStatus:{CYP2D6:{gene:"CYP2D6",genotype:"*1/*4",phenotype:"Intermediate",activityScore:1,clinicalImplications:["Reduced enzyme activity","50% of normal metabolism","Higher drug concentrations possible"],drugRecommendations:[{drug:"Codeine",recommendation:"Alternative",rationale:"Reduced conversion to active metabolite",evidenceLevel:"High",sources:["CPIC Guidelines","PharmGKB"]},{drug:"Tamoxifen",recommendation:"Standard",monitoringRequired:["Enhanced monitoring for efficacy"],rationale:"Intermediate metabolism may affect active metabolite levels",evidenceLevel:"Moderate",sources:["CPIC Guidelines"]}]},CYP2C19:{gene:"CYP2C19",genotype:"*1/*2",phenotype:"Intermediate",activityScore:1.5,clinicalImplications:["Reduced enzyme activity for some substrates","May affect clopidogrel activation","Proton pump inhibitor metabolism affected"],drugRecommendations:[{drug:"Clopidogrel",recommendation:"Alternative",rationale:"Reduced conversion to active metabolite",evidenceLevel:"High",sources:["FDA","CPIC Guidelines"]},{drug:"Omeprazole",recommendation:"Reduced",dosageAdjustment:"50% dose reduction",rationale:"Reduced metabolism may lead to higher exposure",evidenceLevel:"Moderate",sources:["CPIC Guidelines"]}]},TPMT:{gene:"TPMT",genotype:"*1/*3C",phenotype:"Intermediate",activityScore:.5,clinicalImplications:["Reduced thiopurine metabolism","Increased risk of myelosuppression","Dose reduction required"],drugRecommendations:[{drug:"6-Mercaptopurine",recommendation:"Reduced",dosageAdjustment:"30-70% dose reduction",monitoringRequired:["Weekly CBC for 4 weeks","Then monthly CBC"],rationale:"Reduced enzyme activity increases toxicity risk",evidenceLevel:"High",sources:["FDA","CPIC Guidelines"]},{drug:"Azathioprine",recommendation:"Reduced",dosageAdjustment:"30-70% dose reduction",monitoringRequired:["Enhanced CBC monitoring"],rationale:"Intermediate metabolizer status",evidenceLevel:"High",sources:["CPIC Guidelines"]}]}},hlaRisks:[{allele:"HLA-B*5701",drugs:["Abacavir","Carbamazepine"],riskType:"Hypersensitivity",riskLevel:"High",recommendations:["Avoid abacavir - high risk of severe hypersensitivity","Consider alternative antiretrovirals","Use carbamazepine with extreme caution"]},{allele:"HLA-DQA1*05:01",drugs:["Lumiracoxib"],riskType:"Toxicity",riskLevel:"Moderate",recommendations:["Enhanced liver function monitoring if lumiracoxib used","Consider alternative COX-2 inhibitors"]}],otherBiomarkers:[{gene:"UGT1A1",variant:"*28/*28",impact:"Reduced glucuronidation capacity",affectedDrugs:["Irinotecan","Bilirubin"],recommendation:"Reduce irinotecan dose by 25-50% to prevent severe toxicity"}],overallRiskScore:.72,lastUpdated:new Date().toISOString()}},t=[{id:"proto-001",name:"AI-Optimized FOLFOX + Bevacizumab",drugs:[{name:"Oxaliplatin",dosing:"85 mg/m² (reduced 15% based on CYP variants)",genomicOptimization:"Dose adjusted for CYP2D6 *1/*4 genotype",efficacyPrediction:87,safetyScore:92},{name:"5-Fluorouracil",dosing:"2400 mg/m² (standard - DPYD compatible)",genomicOptimization:"Safe dosing confirmed by DPYD analysis",efficacyPrediction:82,safetyScore:88},{name:"Bevacizumab",dosing:"5 mg/kg (optimized for HLA profile)",genomicOptimization:"HLA-compatible, low immunogenicity risk",efficacyPrediction:78,safetyScore:85}],duration:"6 months",expectedOutcome:{responseRate:84,survivalBenefit:76,qualityOfLife:82,confidence:91},genomicCompatibility:94,evidenceLevel:"I",cost:45e3,monitoring:["CBC weekly","LFTs bi-weekly","Neuropathy assessment"],contraindications:["Severe renal impairment","Active bleeding"],alternatives:["CAPOX regimen","FOLFIRI alternative"]},{id:"proto-002",name:"Precision Immunotherapy Protocol",drugs:[{name:"Pembrolizumab",dosing:"200mg Q3W (HLA-optimized)",genomicOptimization:"HLA-B*5701 compatible, enhanced response predicted",efficacyPrediction:91,safetyScore:86}],duration:"2 years",expectedOutcome:{responseRate:89,survivalBenefit:85,qualityOfLife:88,confidence:87},genomicCompatibility:91,evidenceLevel:"II",cost:18e4,monitoring:["Immune markers monthly","Thyroid function","Liver enzymes"],contraindications:["Autoimmune disease","Organ transplant"],alternatives:["Nivolumab","Combination checkpoint inhibitors"]}],i=[{type:"optimization",title:"Genomic Optimization Opportunity",description:"CYP2D6 *1/*4 genotype suggests 15% dose reduction for oxaliplatin to optimize efficacy/toxicity ratio",confidence:94,actionable:!0,priority:"high",source:"PharmGKB + Real-world Evidence"},{type:"warning",title:"DPYD Variant Detected",description:"c.1905+1G>A variant detected. Standard 5-FU dosing is safe, but enhanced monitoring recommended",confidence:98,actionable:!0,priority:"medium",source:"CPIC Guidelines"},{type:"trial",title:"Clinical Trial Match",description:"Patient eligible for NCT04567890: AI-guided precision oncology trial with 89% match score",confidence:89,actionable:!0,priority:"medium",source:"ClinicalTrials.gov AI Matcher"}];ce(s),de(t),V(t[0]),oe(i)}catch(s){console.error("Error loading patient data:",s)}finally{u(!1)}},ke=async s=>{u(!0);try{await new Promise(i=>setTimeout(i,2e3)),me({outcomeTimeline:[{month:1,responseRate:25,survivalRate:100,qualityOfLife:85},{month:3,responseRate:65,survivalRate:98,qualityOfLife:82},{month:6,responseRate:84,survivalRate:94,qualityOfLife:84},{month:12,responseRate:78,survivalRate:88,qualityOfLife:87},{month:24,responseRate:72,survivalRate:76,qualityOfLife:89}],biomarkerPredictions:{CEA:{baseline:45,predicted:[35,18,8,12,15]},"CA 19-9":{baseline:120,predicted:[95,45,22,28,32]}},riskFactors:[{factor:"Neuropathy",risk:35,mitigation:"Dose reduction protocol"},{factor:"Neutropenia",risk:22,mitigation:"G-CSF support"},{factor:"GI Toxicity",risk:18,mitigation:"Prophylactic medications"}]})}catch(t){console.error("Error generating predictions:",t)}finally{u(!1)}},Re=async s=>{u(!0);try{await new Promise(i=>setTimeout(i,1500));const t=[{id:"scenario-1",name:"Dose-Reduced Regimen",description:"20% dose reduction with enhanced supportive care",modifications:{dosageAdjustments:{Oxaliplatin:-20,"5-Fluorouracil":-15},drugSubstitutions:{},scheduleChanges:{},additionalDrugs:["Ondansetron","Dexamethasone"],removedDrugs:[]},predictedOutcomes:{responseRate:78,survivalBenefit:72,qualityOfLife:91,toxicityReduction:45,confidence:89},riskProfile:{severity:"low",factors:["Reduced neuropathy risk","Better tolerance"]}},{id:"scenario-2",name:"Alternative Schedule",description:"Modified infusion schedule with split dosing",modifications:{dosageAdjustments:{},drugSubstitutions:{},scheduleChanges:{Oxaliplatin:"Split dose over 2 days"},additionalDrugs:[],removedDrugs:[]},predictedOutcomes:{responseRate:81,survivalBenefit:74,qualityOfLife:88,toxicityReduction:28,confidence:85},riskProfile:{severity:"low",factors:["Improved infusion tolerance"]}},{id:"scenario-3",name:"Combination Enhancement",description:"Add targeted therapy based on genomic profile",modifications:{dosageAdjustments:{},drugSubstitutions:{},scheduleChanges:{},additionalDrugs:["Panitumumab"],removedDrugs:[]},predictedOutcomes:{responseRate:92,survivalBenefit:88,qualityOfLife:79,toxicityReduction:-15,confidence:82},riskProfile:{severity:"medium",factors:["Increased skin toxicity risk","Higher efficacy potential"]}}];f(i=>({...i,scenarios:t,comparison:{baseline:s,scenarios:t}}))}catch(t){console.error("Error generating scenarios:",t)}finally{u(!1)}},Pe=async s=>{f(t=>({...t,isRunning:!0,currentStep:0,activeScenario:s}));for(let t=1;t<=l.totalSteps;t++)await new Promise(i=>setTimeout(i,800)),f(i=>({...i,currentStep:t}));f(t=>({...t,isRunning:!1}))},Te=()=>{f(s=>({...s,isRunning:!1,currentStep:0,activeScenario:null}))},Ae=async s=>{U(!0);try{await new Promise(r=>setTimeout(r,2e3));const t=[{nct_id:"NCT05123456",title:"AI-Guided Precision Oncology with Genomic-Optimized FOLFOX",phase:"Phase 3",status:"Recruiting",condition:"Colorectal Cancer",biomarkers:["KRAS wild-type","MSI-stable"],eligibilityScore:94,matchReasons:["Genomic profile matches inclusion criteria","Current treatment aligns with trial protocol","Age and performance status compatible"],location:{name:"Memorial Sloan Kettering Cancer Center",city:"New York",state:"NY",distance:2.3},contact:{name:"Dr. Sarah Johnson",phone:"(212) 639-2000",email:"trialsinfo@mskcc.org"},interventions:["AI-Optimized FOLFOX","Precision Dosing Algorithm"],enrollmentStatus:{current:287,target:450,estimatedCompletion:"2025-12-31"},keyEligibility:{ageRange:"18-75 years",performanceStatus:"ECOG 0-1",priorTreatments:"No prior chemotherapy for metastatic disease",biomarkerRequirements:["KRAS wild-type","Adequate genomic profile"]}},{nct_id:"NCT05234567",title:"Combination Immunotherapy with AI-Selected Biomarkers",phase:"Phase 2",status:"Recruiting",condition:"Advanced Solid Tumors",biomarkers:["PD-L1+","TMB-High"],eligibilityScore:87,matchReasons:["Biomarker profile suggests good response","Innovative AI-guided approach","Potential for improved outcomes"],location:{name:"Dana-Farber Cancer Institute",city:"Boston",state:"MA",distance:45.7},contact:{name:"Dr. Lisa Wang",phone:"(617) 632-3000",email:"precision@dfci.harvard.edu"},interventions:["Pembrolizumab","AI-Selected Combination"],enrollmentStatus:{current:67,target:120,estimatedCompletion:"2025-06-30"},keyEligibility:{ageRange:"18+ years",performanceStatus:"ECOG 0-2",priorTreatments:"Progression on standard therapy",biomarkerRequirements:["PD-L1 expression","TMB testing"]}},{nct_id:"NCT05345678",title:"Real-Time Adaptation Protocol with Liquid Biopsy",phase:"Phase 2",status:"Recruiting",condition:"Metastatic Cancer",biomarkers:["ctDNA monitoring","Dynamic biomarkers"],eligibilityScore:82,matchReasons:["Real-time monitoring aligns with AI approach","Adaptive dosing protocol","Cutting-edge biomarker strategy"],location:{name:"UCSF Helen Diller Family Comprehensive Cancer Center",city:"San Francisco",state:"CA",distance:12.1},contact:{name:"Dr. Emily Rodriguez",phone:"(415) 476-1000",email:"liquidbiopsy@ucsf.edu"},interventions:["Liquid Biopsy-Guided Therapy","Dynamic Treatment Adaptation"],enrollmentStatus:{current:134,target:200,estimatedCompletion:"2025-12-31"},keyEligibility:{ageRange:"18+ years",performanceStatus:"ECOG 0-1",priorTreatments:"≥1 prior systemic therapy",biomarkerRequirements:["Measurable disease","ctDNA detectable"]}}],i=[{criteria:"Performance Status",currentValue:"ECOG 2",requiredValue:"ECOG 0-1",actionNeeded:"Improve functional status or consider supportive care"},{criteria:"Prior Treatments",currentValue:"3 prior regimens",requiredValue:"≤2 prior regimens",actionNeeded:"Consider trials for heavily pretreated patients"}],a={matchedTrials:t,totalMatches:t.length,highConfidenceMatches:t.filter(r=>r.eligibilityScore>=90).length,alternativeTrials:t.filter(r=>r.eligibilityScore<90),eligibilityGaps:i};he(a)}catch(t){console.error("Error matching clinical trials:",t)}finally{U(!1)}},Z=s=>{switch(s){case"Phase 1":return"bg-blue-100 text-blue-800";case"Phase 2":return"bg-green-100 text-green-800";case"Phase 3":return"bg-purple-100 text-purple-800";case"Phase 4":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},J=s=>s>=90?"text-green-600":s>=75?"text-yellow-600":"text-red-600",Ie=s=>{switch(s){case"Poor":return"bg-red-100 text-red-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Normal":return"bg-green-100 text-green-800";case"Rapid":return"bg-blue-100 text-blue-800";case"Ultrarapid":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},B=s=>{switch(s){case"High":return"bg-red-100 text-red-800 border-red-200";case"Moderate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Oe=s=>{switch(s){case"Standard":return"bg-green-100 text-green-800";case"Reduced":return"bg-yellow-100 text-yellow-800";case"Increased":return"bg-blue-100 text-blue-800";case"Alternative":return"bg-orange-100 text-orange-800";case"Avoid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Le=async s=>{Q(!0);try{await new Promise(i=>setTimeout(i,2e3));const t={analysisId:"PGX-2024-001",patientId:"PT-12345",timestamp:new Date().toISOString(),drugAnalysis:s.map(i=>({drug:i,riskAssessment:{overallRisk:Math.random()>.7?"High":Math.random()>.4?"Moderate":"Low",efficacyPrediction:Math.floor(Math.random()*30)+70,toxicityRisk:Math.floor(Math.random()*40)+10,recommendations:["Monitor closely for first 4 weeks","Consider dose adjustment based on response","Regular pharmacokinetic monitoring recommended"]},genomicFactors:[{gene:"CYP2D6",impact:"Reduced metabolism",confidence:94},{gene:"CYP2C19",impact:"Standard metabolism",confidence:87}]})),pathwayAnalysis:{primaryPathways:[{pathway:"CYP2D6-mediated metabolism",status:"Impaired",affectedDrugs:s.slice(0,2),clinicalSignificance:"High"},{pathway:"Phase II conjugation",status:"Normal",affectedDrugs:s.slice(1),clinicalSignificance:"Low"}],interactions:[{type:"Gene-Gene",description:"CYP2D6 and CYP2C19 combined effect",impact:"Moderate reduction in overall drug clearance"}]},clinicalDecisionSupport:{alerts:[{level:"High",message:"HLA-B*5701 positive - Avoid abacavir",action:"Select alternative antiretroviral"},{level:"Medium",message:"TPMT intermediate - Reduce thiopurine doses",action:"Use 30-70% dose reduction"}],dosingGuidance:s.map(i=>({drug:i,standardDose:"100mg daily",recommendedDose:Math.random()>.5?"75mg daily":"100mg daily",rationale:"Based on CYP2D6 intermediate metabolizer status"}))}};je(t)}catch(t){console.error("Error analyzing pharmacogenomics:",t)}finally{Q(!1)}},De=({data:s,detailed:t=!1})=>{const i=s?.outcomeTimeline||[];return Math.max(...i.map(a=>a.responseRate)),e.jsxs("div",{className:"relative h-64 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h6",{className:"font-semibold text-gray-900",children:"Treatment Response Timeline"}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"Response Rate"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Survival Rate"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Quality of Life"})]})]})]}),e.jsxs("div",{className:"relative h-40",children:[e.jsx("div",{className:"absolute inset-0 grid grid-rows-5 opacity-20",children:[...Array(5)].map((a,r)=>e.jsx("div",{className:"border-t border-gray-300"},r))}),e.jsxs("div",{className:"absolute left-0 top-0 h-full flex flex-col justify-between text-xs text-gray-500 -ml-8",children:[e.jsx("span",{children:"100%"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"0%"})]}),e.jsx("div",{className:"relative h-full flex items-end justify-between px-4",children:i.map((a,r)=>e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full shadow-sm cursor-pointer hover:scale-125 transition-transform",style:{transform:`translateY(-${a.responseRate/100*140}px)`},title:`Response: ${a.responseRate}%`}),e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm cursor-pointer hover:scale-125 transition-transform absolute left-0",style:{transform:`translateY(-${a.survivalRate/100*140}px)`},title:`Survival: ${a.survivalRate}%`}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full shadow-sm cursor-pointer hover:scale-125 transition-transform absolute left-0",style:{transform:`translateY(-${a.qualityOfLife/100*140}px)`},title:`QoL: ${a.qualityOfLife}%`})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:[e.jsx("div",{children:"Month"}),e.jsx("div",{className:"font-semibold",children:a.month})]}),t&&e.jsxs("div",{className:"absolute -top-16 left-1/2 transform -translate-x-1/2 bg-white p-2 rounded shadow-lg border text-xs z-10 opacity-0 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{children:["Response: ",a.responseRate,"%"]}),e.jsxs("div",{children:["Survival: ",a.survivalRate,"%"]}),e.jsxs("div",{children:["QoL: ",a.qualityOfLife,"%"]})]})]},r))}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"responseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:"0.1"})]})}),e.jsx("path",{d:`M ${i.map((a,r)=>`${r/(i.length-1)*100}% ${100-a.responseRate}%`).join(" L ")}`,className:"stroke-green-500 stroke-2 fill-none",style:{strokeDasharray:N?"5,5":"none"}})]})]})]})},Me=({protocol:s})=>{const t=[{label:"Response Rate",value:s.expectedOutcome.responseRate,color:"bg-green-500",target:85},{label:"Survival Benefit",value:s.expectedOutcome.survivalBenefit,color:"bg-blue-500",target:80},{label:"Quality of Life",value:s.expectedOutcome.qualityOfLife,color:"bg-purple-500",target:75},{label:"Confidence",value:s.expectedOutcome.confidence,color:"bg-orange-500",target:90}];return e.jsxs("div",{className:"p-4 bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h6",{className:"font-semibold text-gray-900",children:"Outcome Predictions vs Targets"}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Genomic Compatibility: ",s.genomicCompatibility,"%"]})]}),e.jsx("div",{className:"space-y-4",children:t.map((i,a)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[i.value,"%"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Target: ",i.target,"%"]})]})]}),e.jsxs("div",{className:"relative h-6 bg-gray-200 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 h-full w-0.5 bg-gray-600 z-10",style:{left:`${i.target}%`},title:`Target: ${i.target}%`}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${i.color}`,style:{width:N?`${i.value}%`:"0%",background:i.value>=i.target?`linear-gradient(90deg, ${i.color.replace("bg-","").replace("-500","")}, #10B981)`:void 0}}),e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 w-3 h-3 bg-white border-2 border-gray-600 rounded-full shadow-sm",style:{left:`calc(${i.value}% - 6px)`}})]}),e.jsx("div",{className:"flex justify-end mt-1",children:i.value>=i.target?e.jsxs("span",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),"Above target"]}):e.jsxs("span",{className:"text-xs text-orange-600 flex items-center",children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),"Below target"]})})]},a))})]})},ze=({data:s})=>{const t=s?.biomarkerPredictions||{};return e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h6",{className:"font-semibold text-gray-900",children:"Biomarker Trends"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Predicted trajectory over 24 months"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t).map(([i,a])=>e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h7",{className:"font-medium text-gray-900",children:i}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Baseline: ",a.baseline]})]}),e.jsxs("div",{className:"relative h-20",children:[e.jsx("div",{className:"flex items-end justify-between h-full",children:a.predicted.map((r,ee)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-4 bg-gradient-to-t from-emerald-600 to-emerald-400 rounded-t transition-all duration-500",style:{height:`${Math.max((1-r/a.baseline)*60,5)}px`,opacity:N?1:.3}}),e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[ee*6,"m"]})]},ee))}),e.jsx("div",{className:"absolute w-full border-t border-dashed border-gray-400 opacity-50",style:{top:"60px"},children:e.jsx("span",{className:"absolute -left-12 -top-2 text-xs text-gray-500",children:"Baseline"})})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Current trend: ",a.predicted[a.predicted.length-1]<a.baseline?e.jsx("span",{className:"text-green-600",children:"Improving ↓"}):e.jsx("span",{className:"text-red-600",children:"Worsening ↑"})]})]},i))})]})},Ge=({genomicProfile:s})=>{if(!s)return null;const t=[{name:"CYP2D6",risk:s.pharmacogenomics.metabolizerStatus.CYP2D6?.phenotype==="Poor"?.8:s.pharmacogenomics.metabolizerStatus.CYP2D6?.phenotype==="Intermediate"?.6:.3,category:"Metabolism"},{name:"HLA-B*5701",risk:s.pharmacogenomics.hlaRisks.find(a=>a.allele==="HLA-B*5701")?.9:.1,category:"Hypersensitivity"},{name:"TPMT",risk:s.pharmacogenomics.metabolizerStatus.TPMT?.phenotype==="Poor"?.8:s.pharmacogenomics.metabolizerStatus.TPMT?.phenotype==="Intermediate"?.5:.2,category:"Toxicity"},{name:"UGT1A1",risk:s.pharmacogenomics.otherBiomarkers.find(a=>a.gene==="UGT1A1")?.7:.3,category:"Clearance"}],i=["Metabolism","Hypersensitivity","Toxicity","Clearance"];return e.jsxs("div",{className:"p-4 bg-gradient-to-br from-red-50 to-orange-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h6",{className:"font-semibold text-gray-900",children:"Genomic Risk Heat Map"}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsx("span",{children:"Low"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-200 rounded"}),e.jsx("div",{className:"w-3 h-3 bg-orange-200 rounded"}),e.jsx("div",{className:"w-3 h-3 bg-red-200 rounded"})]}),e.jsx("span",{children:"High"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map(a=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:a}),e.jsx("div",{className:"space-y-1",children:t.filter(r=>r.category===a).map(r=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`h-8 rounded cursor-pointer transition-all duration-300 ${r.risk>=.8?"bg-red-400 hover:bg-red-500":r.risk>=.6?"bg-orange-400 hover:bg-orange-500":r.risk>=.4?"bg-yellow-400 hover:bg-yellow-500":"bg-green-400 hover:bg-green-500"}`,style:{opacity:.7+r.risk*.3}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:r.name}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 text-white text-xs p-2 rounded whitespace-nowrap z-10",children:["Risk Score: ",(r.risk*100).toFixed(0),"%"]})]},r.name))})]},a))}),e.jsx("div",{className:"mt-4 text-xs text-gray-600",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"High Risk Factors:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:t.filter(a=>a.risk>=.7).map(a=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),a.name]},a.name))})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Overall Risk Score:"}),e.jsxs("div",{className:"mt-1 text-lg font-bold text-orange-600",children:[(s.pharmacogenomics.overallRiskScore*100).toFixed(0),"%"]})]})]})})]})},Be=s=>{switch(s){case"high":return e.jsx(j,{className:"w-4 h-4 text-red-500"});case"medium":return e.jsx(ds,{className:"w-4 h-4 text-yellow-500"});case"low":return e.jsx(w,{className:"w-4 h-4 text-green-500"});default:return e.jsx(Y,{className:"w-4 h-4 text-gray-500"})}},$e=s=>{const t={I:"bg-green-100 text-green-800",II:"bg-blue-100 text-blue-800",III:"bg-yellow-100 text-yellow-800",IV:"bg-gray-100 text-gray-800"};return t[s]||t.IV},h=[{id:"setup",title:"Patient Setup",description:"Review genomic profile and AI insights",icon:I},{id:"review",title:"Protocol Review",description:"Select and customize treatment protocols",icon:H},{id:"simulate",title:"Simulate Options",description:"Explore treatment scenarios",icon:F},{id:"results",title:"View Results",description:"Analyze predictions and outcomes",icon:q}],g=()=>h.findIndex(s=>s.id===x),Ee=s=>{const t=h.findIndex(a=>a.id===s),i=g();return t<i},He=()=>{switch(x){case"setup":return d&&_.length>0;case"review":return c;case"simulate":return l.scenarios.length>0;default:return!0}},Fe=()=>{const s=g();s<h.length-1&&W(h[s+1].id)},qe=()=>{const s=g();s>0&&W(h[s-1].id)},Ye=s=>({setup:"Load and analyze patient genomic data, view AI-generated treatment insights and compatibility scores.",review:"Compare different treatment protocols, see efficacy predictions and select the best option for your patient.",simulate:"Modify treatment parameters, explore alternative dosing schedules, and compare predicted outcomes.",results:"View comprehensive predictions, outcome timelines, biomarker trends, and risk assessments."})[s]||"Treatment planning step";return L&&!O.length?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(A,{size:"lg"}),e.jsx("span",{className:"ml-3 text-lg",children:"Analyzing genomic profile and generating treatment protocols..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Treatment Planner"}),e.jsx("p",{className:"text-gray-600",children:"Step-by-step genomic-optimized treatment planning"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[be&&e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Take Tour"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-600"}),e.jsx($,{content:"Genomic compatibility score indicates how well your patient's genetic profile matches with available treatments. Higher scores suggest better predicted outcomes.",type:"clinical",position:"bottom-left",children:e.jsx("span",{className:"text-sm font-medium text-green-600 cursor-help border-b border-dotted border-green-400",children:d?.riskScore?`${(d.riskScore*100).toFixed(0)}% compatibility`:"Loading..."})})]})]})]}),e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Treatment Planning Workflow"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",g()+1," of ",h.length]})]}),e.jsx("div",{className:"flex items-center justify-between mb-8",children:h.map((s,t)=>{const i=s.icon,a=s.id===x,r=Ee(s.id);return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`flex flex-col items-center ${t!==h.length-1?"flex-1":""}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${a?"bg-purple-600 border-purple-600 text-white":r?"bg-green-600 border-green-600 text-white":"bg-gray-100 border-gray-300 text-gray-400"}`,children:r?e.jsx(w,{className:"w-5 h-5"}):e.jsx(i,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:`text-sm font-medium ${a?"text-purple-600":r?"text-green-600":"text-gray-500"}`,children:s.title}),e.jsx($,{content:Ye(s.id),type:"help",position:"bottom",children:e.jsx("div",{className:"text-xs text-gray-400 max-w-20 cursor-help",children:s.description})})]})]}),t!==h.length-1&&e.jsx("div",{className:`flex-1 h-px mx-4 ${r?"bg-green-300":"bg-gray-200"}`})]},s.id)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:qe,disabled:g()===0,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{className:"text-sm",children:"← Previous"})}),e.jsx("div",{className:"text-sm text-gray-500",children:h[g()].description}),e.jsx("button",{onClick:Fe,disabled:!He()||g()===h.length-1,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx("span",{className:"text-sm",children:"Next →"})})]})]})}),x==="setup"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Step 1: Patient Setup & AI Insights"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Review your patient's genomic profile and get AI-powered insights to guide treatment planning."}),!d&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Loading genomic data and generating insights..."})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"This usually takes 10-15 seconds"})]})]})}),x==="setup"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ve,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"AI-Generated Insights"}),e.jsx($,{content:"These insights are generated by analyzing your patient's genomic profile against current clinical evidence and treatment databases.",type:"help",iconOnly:!0})]}),e.jsx("div",{className:"space-y-3",children:_.map((s,t)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[Be(s.priority),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[s.confidence,"% confidence"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Source: ",s.source]})]}),s.actionable&&e.jsx("button",{className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Act"})]},t))})]})}),x==="simulate"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(F,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Step 3: Treatment Simulation"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Explore different treatment scenarios and see predicted outcomes for various modifications."})]})}),x==="simulate"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Treatment Simulator"}),e.jsx("p",{className:"text-sm text-gray-600",children:'Explore "what-if" scenarios and optimize treatment plans'})]})]}),e.jsx("button",{onClick:()=>xe(!S),className:`px-4 py-2 rounded-lg transition-colors ${S?"bg-purple-600 text-white hover:bg-purple-700":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,children:S?"Hide Simulator":"Open Simulator"})]}),S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Scenario Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dosage Adjustment: ",b.dosageReduction,"%"]}),e.jsx("input",{type:"range",min:"-50",max:"25",step:"5",value:b.dosageReduction,onChange:s=>C(t=>({...t,dosageReduction:Number(s.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"-50% (Reduce)"}),e.jsx("span",{children:"0% (Standard)"}),e.jsx("span",{children:"+25% (Intensify)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:b.addSupportiveCare,onChange:s=>C(t=>({...t,addSupportiveCare:s.target.checked})),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Add enhanced supportive care"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:b.alternativeSchedule,onChange:s=>C(t=>({...t,alternativeSchedule:s.target.checked})),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Modified infusion schedule"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:b.combinationTherapy,onChange:s=>C(t=>({...t,combinationTherapy:s.target.checked})),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Add combination therapy"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Simulation Controls"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>c&&Re(c),disabled:!c||L,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:"Generate Scenarios"})]}),e.jsxs("button",{onClick:Te,disabled:!l.scenarios.length,className:"flex items-center space-x-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset"})]})]}),l.isRunning&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Simulation Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[l.currentStep,"/",l.totalSteps]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${l.currentStep/l.totalSteps*100}%`}})})]})]})]})]}),l.scenarios.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Generated Scenarios"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:l.scenarios.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.riskProfile.severity==="low"?"bg-green-100 text-green-800":s.riskProfile.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[s.riskProfile.severity," risk"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Response Rate:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[s.predictedOutcomes.responseRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Quality of Life:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[s.predictedOutcomes.qualityOfLife,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Toxicity Reduction:"}),e.jsxs("span",{className:`font-medium ${s.predictedOutcomes.toxicityReduction>=0?"text-green-600":"text-red-600"}`,children:[s.predictedOutcomes.toxicityReduction>=0?"+":"",s.predictedOutcomes.toxicityReduction,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Confidence:"}),e.jsxs("span",{className:"font-medium text-purple-600",children:[s.predictedOutcomes.confidence,"%"]})]})]}),e.jsxs("button",{onClick:()=>Pe(s),disabled:l.isRunning,className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Run Simulation"})]})]},s.id))})]}),l.comparison&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Scenario Comparison"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Baseline"}),l.comparison.scenarios.map(s=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.name},s.id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Response Rate"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[l.comparison.baseline.expectedOutcome.responseRate,"%"]}),l.comparison.scenarios.map(s=>e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s.predictedOutcomes.responseRate,"%"]},`${s.id}-response`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Quality of Life"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[l.comparison.baseline.expectedOutcome.qualityOfLife,"%"]}),l.comparison.scenarios.map(s=>e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s.predictedOutcomes.qualityOfLife,"%"]},`${s.id}-qol`))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Survival Benefit"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[l.comparison.baseline.expectedOutcome.survivalBenefit,"%"]}),l.comparison.scenarios.map(s=>e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s.predictedOutcomes.survivalBenefit,"%"]},`${s.id}-survival`))]})]})]})})]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(We,{className:"w-6 h-6 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Genomic Biomarker Analysis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive pharmacogenomics and biomarker assessment"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>c&&Le(c.drugs.map(s=>s.name)),disabled:!c||z,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{children:z?"Analyzing...":"Analyze Genomics"})]}),e.jsx("button",{onClick:()=>ue(!R),className:`px-4 py-2 rounded-lg transition-colors ${R?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:R?"Hide Analysis":"Show Analysis"})]})]}),z&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(A,{size:"lg"}),e.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Running comprehensive pharmacogenomic analysis..."})]}),R&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h4",{className:"font-semibold text-indigo-900",children:"Metabolizer Profile"})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:Object.keys(d.pharmacogenomics.metabolizerStatus).length}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Genes analyzed"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-yellow-900",children:"HLA Risks"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:d.pharmacogenomics.hlaRisks.length}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Risk alleles detected"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-900",children:"Risk Score"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(d.pharmacogenomics.overallRiskScore*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-green-600",children:"Overall safety"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Xe,{className:"w-5 h-5 text-purple-600 mr-2"}),"Pharmacogenomic Profile"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Object.entries(d.pharmacogenomics.metabolizerStatus).map(([s,t])=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:t.gene}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Genotype: ",t.genotype]}),e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${Ie(t.phenotype)}`,children:[t.phenotype," Metabolizer"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:t.activityScore}),e.jsx("div",{className:"text-xs text-gray-500",children:"Activity Score"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Clinical Implications:"}),e.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:t.clinicalImplications.map((i,a)=>e.jsxs("li",{className:"flex items-start space-x-1",children:[e.jsx("span",{className:"text-gray-400 mt-1",children:"•"}),e.jsx("span",{children:i})]},a))})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Drug Recommendations:"}),e.jsx("div",{className:"space-y-2",children:t.drugRecommendations.slice(0,2).map((i,a)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:i.drug}),e.jsx("span",{className:`px-2 py-0.5 rounded ${Oe(i.recommendation)}`,children:i.recommendation})]}),e.jsx("p",{className:"text-gray-600",children:i.rationale}),i.dosageAdjustment&&e.jsxs("p",{className:"text-indigo-600 font-medium mt-1",children:["Dose: ",i.dosageAdjustment]})]},a))})]})]},s))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 text-red-600 mr-2"}),"HLA-Associated Drug Risks"]}),e.jsx("div",{className:"space-y-3",children:d.pharmacogenomics.hlaRisks.map((s,t)=>e.jsxs("div",{className:`p-4 rounded-lg border-2 ${B(s.riskLevel)}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:s.allele}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Risk Type: ",s.riskType]}),e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${B(s.riskLevel)}`,children:[s.riskLevel," Risk"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Affected Drugs:"}),e.jsx("div",{className:"text-xs text-gray-600",children:s.drugs.join(", ")})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Clinical Recommendations:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:s.recommendations.map((i,a)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx(w,{className:"w-4 h-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:i})]},a))})]})]},t))})]}),d.pharmacogenomics.otherBiomarkers.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ze,{className:"w-5 h-5 text-green-600 mr-2"}),"Additional Biomarkers"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.pharmacogenomics.otherBiomarkers.map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:s.gene}),e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:s.variant})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.impact}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[e.jsx("strong",{children:"Affected drugs:"})," ",s.affectedDrugs.join(", ")]}),e.jsxs("div",{className:"p-2 bg-blue-50 rounded text-xs text-blue-700",children:[e.jsx("strong",{children:"Recommendation:"})," ",s.recommendation]})]},t))})]}),y&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600 mr-2"}),"Treatment-Specific Analysis"]}),e.jsxs("div",{className:"space-y-4",children:[y.clinicalDecisionSupport.alerts.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Clinical Alerts:"}),e.jsx("div",{className:"space-y-2",children:y.clinicalDecisionSupport.alerts.map((s,t)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${s.level==="High"?"bg-red-50 border-red-500 text-red-700":s.level==="Medium"?"bg-yellow-50 border-yellow-500 text-yellow-700":"bg-blue-50 border-blue-500 text-blue-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(j,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.message}),e.jsxs("p",{className:"text-sm mt-1",children:["Action: ",s.action]})]})]})},t))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Drug-Specific Genomic Assessment:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Drug"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Risk Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Efficacy"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toxicity Risk"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dosing"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.drugAnalysis.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.drug}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${B(s.riskAssessment.overallRisk)}`,children:s.riskAssessment.overallRisk})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s.riskAssessment.efficacyPrediction,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[s.riskAssessment.toxicityRisk,"%"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:y.clinicalDecisionSupport.dosingGuidance.find(i=>i.drug===s.drug)?.recommendedDose||"Standard"})]},t))})]})})]})]})]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Clinical Trial Matcher"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Find trials matching your treatment plan and patient profile"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>Ae(),disabled:!c||D,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:D?"Searching...":"Find Matching Trials"})]}),e.jsx("button",{onClick:()=>pe(!k),className:`px-4 py-2 rounded-lg transition-colors ${k?"bg-green-600 text-white hover:bg-green-700":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:k?"Hide Trials":"Show Trial Details"})]})]}),o&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:o.totalMatches}),e.jsx("div",{className:"text-sm text-green-600",children:"Total Matches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:o.highConfidenceMatches}),e.jsx("div",{className:"text-sm text-blue-600",children:"High Confidence"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:o.alternativeTrials.length}),e.jsx("div",{className:"text-sm text-purple-600",children:"Alternative Options"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:o.eligibilityGaps.length}),e.jsx("div",{className:"text-sm text-orange-600",children:"Eligibility Gaps"})]})]})}),D&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(A,{size:"lg"}),e.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Analyzing patient profile and searching trials..."})]}),k&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Je,{className:"w-5 h-5 text-yellow-500 mr-2"}),"High Confidence Matches (",o.highConfidenceMatches,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.matchedTrials.filter(s=>s.eligibilityScore>=90).map(s=>e.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-mono text-sm text-blue-600",children:s.nct_id}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${Z(s.phase)}`,children:s.phase}),e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:s.status})]}),e.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.condition})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${J(s.eligibilityScore)}`,children:[s.eligibilityScore,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Match Score"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Location & Contact:"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(es,{className:"w-3 h-3"}),e.jsx("span",{children:s.location.name})]}),e.jsxs("div",{children:[s.location.city,", ",s.location.state]}),s.location.distance&&e.jsxs("div",{className:"text-blue-600",children:[s.location.distance," km away"]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:s.contact.name}),e.jsx("div",{children:s.contact.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Enrollment Status:"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ss,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.enrollmentStatus.current,"/",s.enrollmentStatus.target," enrolled"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(re,{className:"w-3 h-3"}),e.jsxs("span",{children:["Est. completion: ",s.enrollmentStatus.estimatedCompletion]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.enrollmentStatus.current/s.enrollmentStatus.target*100}%`}})})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this trial matches:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.matchReasons.map((t,i)=>e.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:t},i))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Key Eligibility:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Age:"})," ",s.keyEligibility.ageRange]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Performance:"})," ",s.keyEligibility.performanceStatus]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Prior Tx:"})," ",s.keyEligibility.priorTreatments]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Biomarkers:"})," ",s.keyEligibility.biomarkerRequirements.join(", ")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-green-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>window.open(`tel:${s.contact.phone}`),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[e.jsx(ts,{className:"w-3 h-3"}),e.jsx("span",{children:"Call"})]}),e.jsxs("button",{onClick:()=>window.open(`mailto:${s.contact.email}`),className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:[e.jsx(is,{className:"w-3 h-3"}),e.jsx("span",{children:"Email"})]}),e.jsxs("button",{onClick:()=>window.open(`https://clinicaltrials.gov/ct2/show/${s.nct_id}`,"_blank"),className:"flex items-center space-x-1 px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:[e.jsx(as,{className:"w-3 h-3"}),e.jsx("span",{children:"View Details"})]})]}),e.jsx("button",{onClick:()=>ge(M?.nct_id===s.nct_id?null:s),className:"px-3 py-1 bg-purple-100 text-purple-700 rounded text-sm hover:bg-purple-200",children:M?.nct_id===s.nct_id?"Hide Details":"Show Full Details"})]}),M?.nct_id===s.nct_id&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Interventions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.interventions.map((t,i)=>e.jsx("span",{className:"text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded",children:t},i))})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm font-medium text-gray-700 mb-1",children:"Required Biomarkers:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.biomarkers.map((t,i)=>e.jsx("span",{className:"text-xs bg-yellow-50 text-yellow-700 px-2 py-1 rounded",children:t},i))})]})]})]},s.nct_id))})]}),o.alternativeTrials.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(rs,{className:"w-5 h-5 text-blue-500 mr-2"}),"Alternative Options (",o.alternativeTrials.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.alternativeTrials.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm text-blue-600",children:s.nct_id}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${Z(s.phase)}`,children:s.phase})]}),e.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:s.title})]}),e.jsxs("div",{className:`text-lg font-bold ${J(s.eligibilityScore)}`,children:[s.eligibilityScore,"%"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsxs("div",{children:[s.location.city,", ",s.location.state]}),s.location.distance&&e.jsxs("div",{className:"text-blue-600",children:[s.location.distance," km away"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>window.open(`https://clinicaltrials.gov/ct2/show/${s.nct_id}`,"_blank"),className:"text-xs text-blue-600 hover:text-blue-800",children:"View Details →"})})]},s.nct_id))})]}),o.eligibilityGaps.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 text-orange-500 mr-2"}),"Eligibility Considerations (",o.eligibilityGaps.length,")"]}),e.jsx("div",{className:"space-y-3",children:o.eligibilityGaps.map((s,t)=>e.jsx("div",{className:"border border-orange-200 rounded-lg p-4 bg-orange-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:s.criteria}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Current:"})," ",s.currentValue]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Required:"})," ",s.requiredValue]})]}),e.jsxs("div",{className:"text-sm text-orange-700 bg-orange-100 p-2 rounded",children:[e.jsx("strong",{children:"Action needed:"})," ",s.actionNeeded]})]})]})},t))})]})]})]})}),x==="review"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Step 2: Protocol Review & Selection"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the most suitable treatment protocol based on genomic compatibility and expected outcomes."}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(w,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Ready to Review Protocols"})]}),e.jsxs("p",{className:"text-xs text-green-600",children:[O.length," protocols available • Look for high genomic compatibility scores (",">","80%) • Consider evidence levels I-II for best outcomes"]})]})]})}),x==="review"&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:O.map(s=>e.jsx(m,{className:`cursor-pointer transition-all ${c?.id===s.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-lg"}`,onClick:()=>{V(s),ke()},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${$e(s.evidenceLevel)}`,children:["Evidence Level ",s.evidenceLevel]}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[s.genomicCompatibility,"% genomic match"]})]})]}),e.jsx(I,{className:"w-6 h-6 text-blue-600"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Response Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[s.expectedOutcome.responseRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Confidence"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[s.expectedOutcome.confidence,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Key Drugs:"}),e.jsx("div",{className:"space-y-1",children:s.drugs.slice(0,2).map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-green-600",children:[t.efficacyPrediction,"%"]}),e.jsx(ie,{className:"w-3 h-3 text-blue-500"}),e.jsxs("span",{className:"text-blue-600",children:[t.safetyScore,"%"]})]})]},i))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Duration: ",s.duration]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",s.cost.toLocaleString()]})]})]})]})},s.id))}),x==="review"&&c&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Detailed Protocol Analysis"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Genomic-Optimized Drug Regimen"}),e.jsx("div",{className:"space-y-4",children:c.drugs.map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded",children:["Efficacy: ",s.efficacyPrediction,"%"]}),e.jsxs("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Safety: ",s.safetyScore,"%"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Dosing:"})," ",s.dosing]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Genomic Optimization:"})," ",s.genomicOptimization]})]},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Predicted Outcomes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Response Rate"}),e.jsxs("span",{className:"font-semibold text-green-800",children:[c.expectedOutcome.responseRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Survival Benefit"}),e.jsxs("span",{className:"font-semibold text-blue-800",children:[c.expectedOutcome.survivalBenefit,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"Quality of Life"}),e.jsxs("span",{className:"font-semibold text-purple-800",children:[c.expectedOutcome.qualityOfLife,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-yellow-700",children:"AI Confidence"}),e.jsxs("span",{className:"font-semibold text-yellow-800",children:[c.expectedOutcome.confidence,"%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Monitoring Requirements"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:c.monitoring.map((s,t)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:s})]},t))})]})]})]})]})}),x==="results"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(q,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Step 4: Results & Analysis"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"View detailed predictions, outcomes, and visualizations for your selected treatment approach."})]})}),x==="results"&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"w-6 h-6 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Enhanced Visualizations"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Interactive charts and analytics for treatment insights"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>Se(!N),className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm ${N?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600"}`,children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Animations"})]}),e.jsx("button",{onClick:()=>fe(!P),className:`px-4 py-2 rounded-lg transition-colors ${P?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:P?"Hide Charts":"Show Charts"})]})]}),P&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{key:"timeline",label:"Timeline",icon:re},{key:"outcomes",label:"Outcomes",icon:I},{key:"biomarkers",label:"Biomarkers",icon:Y},{key:"risk-matrix",label:"Risk Matrix",icon:ns}].map(({key:s,label:t,icon:i})=>e.jsxs("button",{onClick:()=>Ne(s),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm transition-colors ${v===s?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:t})]},s))})]}),e.jsxs("div",{className:"transition-all duration-300",children:[v==="timeline"&&p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Treatment Response Timeline"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>X("overview"),className:`px-3 py-1 rounded text-sm ${G==="overview"?"bg-blue-100 text-blue-700":"text-gray-600"}`,children:"Overview"}),e.jsx("button",{onClick:()=>X("detailed"),className:`px-3 py-1 rounded text-sm ${G==="detailed"?"bg-blue-100 text-blue-700":"text-gray-600"}`,children:"Detailed"})]})]}),e.jsx(De,{data:p,detailed:G==="detailed"})]}),v==="outcomes"&&c&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Outcome Predictions Analysis"}),e.jsx(Me,{protocol:c})]}),v==="biomarkers"&&p&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Biomarker Trend Analysis"}),e.jsx(ze,{data:p})]}),v==="risk-matrix"&&d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Genomic Risk Assessment"}),e.jsx(Ge,{genomicProfile:d})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"Interactive elements enabled"})]}),T&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"Click elements for details"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>we(!T),className:`px-3 py-1 rounded text-sm ${T?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:T?"Interactive":"Static"}),e.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",onClick:()=>{alert("Chart export functionality would be implemented here")},children:"Export"})]})]})]})]})}),p&&e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(E,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-xl font-semibold",children:"AI Outcome Predictions"}),L&&e.jsx(A,{size:"sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Treatment Timeline"}),e.jsx("div",{className:"space-y-2",children:p.outcomeTimeline.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Month ",s.month]}),e.jsxs("div",{className:"flex space-x-4 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:["Response: ",s.responseRate,"%"]}),e.jsxs("span",{className:"text-blue-600",children:["Survival: ",s.survivalRate,"%"]}),e.jsxs("span",{className:"text-purple-600",children:["QoL: ",s.qualityOfLife,"%"]})]})]},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Risk Assessment"}),e.jsx("div",{className:"space-y-2",children:p.riskFactors.map((s,t)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.factor}),e.jsxs("span",{className:`text-sm font-semibold ${s.risk<25?"text-green-600":s.risk<50?"text-yellow-600":"text-red-600"}`,children:[s.risk,"% risk"]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:s.mitigation})]},t))})]})]})]})}),ve&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-purple-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Welcome to AI Treatment Planner!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let's get you started with genomic-optimized treatment planning"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"🎯 How it works:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Step 1:"})," Review genomic profile and AI insights"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Step 2:"})," Compare and select treatment protocols"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Step 3:"})," Simulate different treatment scenarios"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Step 4:"})," Analyze predictions and outcomes"]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"💡 Pro Tips:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-green-800",children:[e.jsx("li",{children:"• Hover over terms with dotted underlines for explanations"}),e.jsx("li",{children:"• Look for help icons (?) for detailed information"}),e.jsx("li",{children:"• Use the workflow progress bar to navigate steps"}),e.jsx("li",{children:"• Each step builds on the previous one"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>ye(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:"Don't show again"}),e.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Get Started"})]})]})})})]})},xs=()=>e.jsx(le,{featureName:"AI Treatment Planner",fallbackMessage:"The AI Treatment Planner is temporarily unavailable. This advanced feature requires AI processing and genomic analysis.",children:e.jsx(ms,{})}),ct=()=>e.jsx(le,{featureName:"AI Treatment Planner Page",fallbackMessage:"The AI Treatment Planner page is temporarily unavailable.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"AI Treatment Planner"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Revolutionary genomic-optimized treatment protocols powered by artificial intelligence and real-world evidence."})]}),e.jsx(xs,{})]})});export{ct as default};
