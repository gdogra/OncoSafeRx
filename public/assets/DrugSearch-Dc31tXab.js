import{c as Ge,u as we,f as Re,j as e,P as ce,e as B,T as Ue,C as He,A as oe,D as Ke,r as i,d as Oe,h as Pe,_ as Ve,X as Se,S as K,i as Ae,b as le,U as _e,H as Ce,Z as ye,B as ae,k as We,l as Je,a as Xe,m as qe,n as Ze,I as Qe}from"./index-Bhw970Mt.js";import{d as Ie}from"./api-BP-rjOFz.js";import{C as F}from"./Card-xxJ0N2iO.js";import{analytics as ue}from"./analytics-DcoOYTyl.js";import{i as Ye}from"./biomarkers-Bb0NK789.js";import{S as U}from"./star-CZ330yHD.js";import{T as ea}from"./tag-C5vktzFW.js";import{M as aa}from"./map-pinned-BZOyKss3.js";import{S as ta}from"./share-2-BaxNWgwY.js";import{A as Ne}from"./Alert-Ce4CVrwB.js";import{D as te}from"./database-DVBy81T8.js";import{G as he}from"./globe-BSKpiTHs.js";import{F as fe}from"./funnel-BH8iwznT.js";import{C as ke}from"./circle-check-big-BS3hXAhd.js";import{C as sa}from"./check-CF29A6wX.js";import{S as Ee}from"./sparkles-mm-HJFwJ.js";import{M as ze}from"./microscope-kEe6ZUaY.js";import{D as ra}from"./download-BdaDgNV1.js";import{F as na}from"./FeatureErrorBoundary-DQef_fs0.js";import{H as ia}from"./history-0FG2O_UK.js";import"./circle-x-pntuk0KV.js";import"./refresh-cw-CEIIBFss.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ca=Ge("loader-circle",la),be="oncosaferx_pins";function se(){try{const a=localStorage.getItem(be);return a?JSON.parse(a):{}}catch{return{}}}function oa(a){return a?!!se()[a]:!1}function ge(a,s){const c=se();c[a]?delete c[a]:c[a]={name:s,t:Date.now()};try{localStorage.setItem(be,JSON.stringify(c))}catch{}return c}function da(){try{localStorage.removeItem(be)}catch{}}function ma(a){const s=se(),c={};let t=Date.now();for(const o of a){const m=s[o];m&&(c[o]={name:m.name,t:t--})}Object.entries(s).forEach(([o,m])=>{c[o]||(c[o]=m)});try{localStorage.setItem(be,JSON.stringify(c))}catch{}}const pe=({drug:a,onClick:s,showDetails:c=!1,showTooltips:t=!0,className:o=""})=>{const m=we(),S=Re(),h=()=>{s?.(a)},y=r=>{if(!r)return"bg-gray-100 text-gray-700";switch(r.toLowerCase()){case"scd":case"sbd":return"bg-primary-100 text-primary-700";case"gpck":case"bpck":return"bg-warning-100 text-warning-700";default:return"bg-gray-100 text-gray-700"}},f=r=>r?{SCD:"Clinical Drug",SBD:"Branded Drug",GPCK:"Generic Pack",BPCK:"Branded Pack"}[r.toUpperCase()]||r:"Unknown",N=()=>e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"font-semibold",children:"Drug Information:"}),e.jsxs("div",{children:["Name: ",a.name]}),e.jsxs("div",{children:["RXCUI: ",a.rxcui]}),a.tty&&e.jsxs("div",{children:["Type: ",f(a.tty)]}),a.generic_name&&e.jsxs("div",{children:["Generic: ",a.generic_name]}),a.therapeutic_class&&e.jsxs("div",{children:["Class: ",a.therapeutic_class]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsx("div",{className:"text-gray-300",children:s?"Click for more details":"Drug details"})})]}),v=r=>{const u={SCD:"Semantic Clinical Drug - A clinical drug with specific ingredient(s), strength(s), and dose form",SBD:"Semantic Branded Drug - A branded drug with specific ingredient(s), strength(s), and dose form",GPCK:"Generic Pack - A collection of generic drugs in a package",BPCK:"Branded Pack - A collection of branded drugs in a package"};return r?u[r.toUpperCase()]||`${r} - Drug type classification`:"Drug type classification from RxNorm terminology"},A=()=>e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"font-semibold text-amber-200",children:"Clinical Safety:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Always verify drug name and strength"}),e.jsx("li",{children:"Check for patient allergies"}),e.jsx("li",{children:"Review contraindications"}),e.jsx("li",{children:"Consider drug interactions"})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-amber-200",children:e.jsx("div",{className:"text-amber-200",children:"Consult clinical guidelines and patient-specific factors"})})]}),p=oa(a.rxcui);return e.jsxs(F,{className:`transition-all duration-200 ${s?"cursor-pointer hover:shadow-md hover:border-primary-300":""} ${o}`,padding:"md",children:[e.jsxs("div",{className:"flex items-start justify-between",onClick:s?h:void 0,children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-5 h-5 text-primary-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:a.name}),p&&e.jsx(B,{content:"Pinned",children:e.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx(U,{className:"w-3 h-3 mr-1"})," Pinned"]})}),t&&e.jsx(B,{content:N(),type:"info",iconOnly:!0,position:"top",maxWidth:"max-w-xs"})]}),a.synonym&&a.synonym!==a.name&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Also known as: ",a.synonym]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ea,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["RXCUI: ",a.rxcui]}),t&&e.jsx(B,{content:"RxNorm Concept Unique Identifier - A unique identifier for this medication in the RxNorm database",type:"help",iconOnly:!0,position:"top",maxWidth:"max-w-xs"})]}),a.tty&&e.jsx(B,{content:v(a.tty),type:"help",disabled:!t,maxWidth:"max-w-sm",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${y(a.tty)}`,children:f(a.tty)})}),t&&e.jsx(B,{content:A(),type:"warning",iconOnly:!0,position:"top",maxWidth:"max-w-xs",children:e.jsx(Ue,{className:"w-4 h-4 text-amber-500"})})]}),c&&e.jsxs("div",{className:"mt-3 space-y-2",children:[a.generic_name&&a.generic_name!==a.name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Generic: "}),e.jsx("span",{className:"text-sm text-gray-600",children:a.generic_name})]}),a.therapeutic_class&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Class: "}),e.jsx("span",{className:"text-sm text-gray-600",children:a.therapeutic_class})]}),a.indication&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Indication: "}),e.jsx("span",{className:"text-sm text-gray-600",children:a.indication})]}),a.brand_names&&a.brand_names.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Brand Names: "}),e.jsx("span",{className:"text-sm text-gray-600",children:a.brand_names.join(", ")})]})]})]})]}),s&&e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx(He,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx(B,{content:p?"Unpin this drug":"Pin this drug",children:e.jsxs("button",{type:"button",onClick:()=>{ge(a.rxcui,a.name)},className:`inline-flex items-center px-3 py-1.5 text-xs rounded ${p?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700"} hover:bg-gray-200`,"aria-pressed":p,"aria-label":p?"Unpin drug":"Pin drug",children:[e.jsx(U,{className:`w-3 h-3 mr-1 ${p?"":"opacity-70"}`})," ",p?"Pinned":"Pin"]})}),e.jsxs("button",{type:"button",onClick:()=>{S.addDrug(a);try{ue.logSelection(a.rxcui,a.name,"card_action_interactions")}catch{}m("/interactions")},className:"inline-flex items-center px-3 py-1.5 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"})," Use in Interactions"]}),e.jsxs("button",{type:"button",onClick:()=>{S.addDrug(a);try{ue.logSelection(a.rxcui,a.name,"card_action_genomics")}catch{}m("/genomics")},className:"inline-flex items-center px-3 py-1.5 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"})," Analyze Genomics"]}),e.jsxs("button",{type:"button",onClick:()=>{S.addDrug(a);const r=Ye(a.name);try{ue.logSelection(a.rxcui,a.name,"card_action_trials")}catch{}m(r?`/trials?biomarker=${encodeURIComponent(r)}`:"/trials")},className:"inline-flex items-center px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:[e.jsx(aa,{className:"w-3 h-3 mr-1"})," Find Trials"]}),s&&e.jsxs("button",{type:"button",onClick:h,onMouseDown:()=>{try{ue.logSelection(a.rxcui,a.name,"card_action_details")}catch{}},className:"inline-flex items-center px-3 py-1.5 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:[e.jsx(ta,{className:"w-3 h-3 mr-1"})," View Details"]})]})]})};function ua(a,s){const c=(s||"").toLowerCase(),t=(a.name||"").toLowerCase();if(!c)return 0;if(t===c)return 100;if(t.startsWith(c))return 80;if(t.includes(c))return 60;const o=pa(t,c);return Math.floor(o*40)}function pa(a,s){const c=a.length>s.length?a:s,t=a.length>s.length?s:a;if(c.length===0)return 1;const o=xa(c,t);return(c.length-o)/c.length}function xa(a,s){const c=Array(s.length+1).fill(null).map(()=>Array(a.length+1).fill(null));for(let t=0;t<=a.length;t++)c[0][t]=t;for(let t=0;t<=s.length;t++)c[t][0]=t;for(let t=1;t<=s.length;t++)for(let o=1;o<=a.length;o++){const m=a[o-1]===s[t-1]?0:1;c[t][o]=Math.min(c[t][o-1]+1,c[t-1][o]+1,c[t-1][o-1]+m)}return c[s.length][a.length]}const ha=({results:a,loading:s,error:c,onDrugSelect:t,filters:o})=>{let m={};try{m=JSON.parse(localStorage.getItem("oncosaferx_popularity")||"{}")}catch{}const S=i.useMemo(()=>{if(!a||!a.results.length)return null;const r={"Brand Names":[],"Generic Names":[],Ingredients:[],Combinations:[],Other:[]},u=["aspirin","ibuprofen","acetaminophen","warfarin","metformin","atorvastatin"],w=["pembrolizumab","nivolumab","fluorouracil","cisplatin","doxorubicin","paclitaxel"];return a.results.filter(x=>{const P=!o?.tty||o.tty.size===0||(x.tty?o.tty.has(x.tty):!1),I=["pembrolizumab","nivolumab","fluorouracil","cisplatin","doxorubicin","paclitaxel","tamoxifen","imatinib"].some($=>(x.name||"").toLowerCase().includes($)),O=!o?.onlyOncology||I;return P&&O}).forEach(x=>{const P=u.some(O=>x.name.toLowerCase().includes(O.toLowerCase())),g=w.some(O=>x.name.toLowerCase().includes(O.toLowerCase())),I={...x,isPopular:P,isOncology:g,relevanceScore:ua(x,a.query||""),popularityScore:Number(m[x.rxcui]||0)};switch(x.tty){case"BN":r["Brand Names"].push(I);break;case"IN":case"PIN":r.Ingredients.push(I);break;case"MIN":r.Combinations.push(I);break;case"SCD":case"SBD":r["Generic Names"].push(I);break;default:r.Other.push(I);break}}),Object.keys(r).forEach(x=>{r[x].sort((P,g)=>P.isPopular&&!g.isPopular?-1:!P.isPopular&&g.isPopular?1:P.isOncology&&!g.isOncology?-1:!P.isOncology&&g.isOncology?1:P.popularityScore!==g.popularityScore?g.popularityScore-P.popularityScore:g.relevanceScore-P.relevanceScore)}),r},[a]),h=i.useMemo(()=>se(),[a]),y=i.useMemo(()=>!a||!a.results.length?[]:S?Object.values(S).flat():a.results,[a,S]),[f,N]=i.useState(-1),v=i.useRef(null);i.useEffect(()=>{N(-1)},[a,o]);const A=r=>{y.length!==0&&N(u=>u<0?r>0?0:y.length-1:(u+r+y.length)%y.length)},p=r=>{if(r.key==="ArrowDown"||r.key.toLowerCase()==="j")r.preventDefault(),A(1);else if(r.key==="ArrowUp"||r.key.toLowerCase()==="k")r.preventDefault(),A(-1);else if(r.key==="Enter"&&f>=0&&y[f]){r.preventDefault();const u=y[f];t?.(u);try{const{rxcui:w,name:R}=u;(async()=>(await Ve(async()=>{const{analytics:x}=await import("./analytics-DcoOYTyl.js");return{analytics:x}},[])).analytics.logSelection(w,R,"search_results"))()}catch{}}else if(r.key.toLowerCase()==="p"&&f>=0&&y[f]){r.preventDefault();const u=y[f];try{togglePin(u.rxcui,u.name),setPinTick(w=>w+1)}catch{}}};return s?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((r,u)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})]})})},u))}):c?e.jsx(Ne,{type:"error",title:"Search Error",children:c}):a?a.count===0?e.jsxs(Ne,{type:"info",title:"No Results Found",children:['No drugs found matching your search query "',a.query,'". Please try a different search term.']}):e.jsxs("div",{className:"space-y-6 outline-none",tabIndex:0,onKeyDown:p,ref:v,role:"listbox","aria-label":"Drug search results","aria-activedescendant":f>=0&&y[f]?`drug-option-${y[f].rxcui}`:void 0,children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{children:['Search Results for "',a.query,'"']})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",a.count," drug",a.count!==1?"s":""," • Ranked by relevance and popularity"]})]}),a.sources&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsx(B,{content:"Results from local OncoSafeRx database",children:e.jsxs("div",{className:"flex items-center space-x-1 cursor-help",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsxs("span",{children:["Local: ",a.sources.local]})]})}),e.jsx(B,{content:"Results from RxNorm (National Library of Medicine) database",children:e.jsxs("div",{className:"flex items-center space-x-1 cursor-help",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsxs("span",{children:["RxNorm: ",a.sources.rxnorm]})]})})]})]}),S&&e.jsx("div",{className:"flex flex-wrap gap-3 pt-3 border-t border-gray-100",children:Object.entries(S).map(([r,u])=>{if(u.length===0)return null;const w=x=>{switch(x){case"Brand Names":return e.jsx(U,{className:"w-3 h-3"});case"Generic Names":return e.jsx(ce,{className:"w-3 h-3"});case"Ingredients":return e.jsx(fe,{className:"w-3 h-3"});case"Combinations":return e.jsx(te,{className:"w-3 h-3"});default:return e.jsx(he,{className:"w-3 h-3"})}},R=x=>{switch(x){case"Brand Names":return"Proprietary/commercial drug names (e.g., Tylenol, Advil)";case"Generic Names":return"Scientific/chemical drug names (e.g., acetaminophen, ibuprofen)";case"Ingredients":return"Active pharmaceutical ingredients and components";case"Combinations":return"Multi-ingredient formulations and combination products";default:return"Other drug terminology types"}};return e.jsx(B,{content:R(r),children:e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600 cursor-help",children:[w(r),e.jsxs("span",{children:[r,": ",u.length]})]})},r)})})]}),Object.keys(h).length>0&&a&&a.results.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-2 rounded-lg border text-yellow-700 bg-yellow-50 border-yellow-200",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("h4",{className:"font-medium",children:"Pinned"}),e.jsxs("span",{className:"text-sm",children:["(",Object.keys(h).filter(r=>a.results.find(u=>u.rxcui===r)).length,")"]})]}),e.jsx("div",{className:"space-y-3",children:a.results.filter(r=>!!h[r.rxcui]).map(r=>e.jsx("div",{className:"relative",children:e.jsx(pe,{drug:r,onClick:t,className:"ring-2 ring-yellow-200"})},`${r.rxcui}-${r.tty}`))})]}),S?e.jsx("div",{className:"space-y-6",children:Object.entries(S).map(([r,u])=>{if(u.length===0)return null;const w=x=>{switch(x){case"Brand Names":return"text-purple-600 bg-purple-50 border-purple-200";case"Generic Names":return"text-blue-600 bg-blue-50 border-blue-200";case"Ingredients":return"text-green-600 bg-green-50 border-green-200";case"Combinations":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},R=x=>{switch(x){case"Brand Names":return e.jsx(U,{className:"w-4 h-4"});case"Generic Names":return e.jsx(ce,{className:"w-4 h-4"});case"Ingredients":return e.jsx(fe,{className:"w-4 h-4"});case"Combinations":return e.jsx(te,{className:"w-4 h-4"});default:return e.jsx(he,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-2 rounded-lg border ${w(r)}`,children:[R(r),e.jsx("h4",{className:"font-medium",children:r}),e.jsxs("span",{className:"text-sm",children:["(",u.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:u.map(x=>e.jsxs("div",{id:`drug-option-${x.rxcui}`,className:"relative",role:"option","aria-selected":f>=0&&y[f]?.rxcui===x.rxcui,children:[e.jsx(B,{content:h[x.rxcui]?"Unpin this drug":"Pin this drug",children:e.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),togglePin(x.rxcui,x.name),setPinTick(g=>g+1)},className:`absolute top-2 left-2 z-10 inline-flex items-center justify-center w-6 h-6 rounded-full border ${h[x.rxcui]?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-white border-gray-200 text-gray-500"} hover:bg-yellow-50`,"aria-label":h[x.rxcui]?"Unpin":"Pin",children:e.jsx(U,{className:"w-3 h-3"})})}),e.jsx(pe,{drug:x,onClick:t,className:`${x.isPopular?"ring-2 ring-yellow-200":""} ${x.isOncology?"ring-2 ring-purple-200":""} ${f>=0&&y[f]?.rxcui===x.rxcui?"ring-2 ring-blue-300":""}`}),e.jsxs("div",{className:"absolute top-2 right-2 flex items-center space-x-1",children:[x.isPopular&&e.jsx(B,{content:"Commonly prescribed medication with high usage frequency",children:e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium cursor-help",children:[e.jsx(Oe,{className:"w-3 h-3"}),e.jsx("span",{children:"Popular"})]})}),x.isOncology&&e.jsx(B,{content:"Oncology/cancer treatment medication - requires specialized handling and monitoring",children:e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium cursor-help",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"Oncology"})]})}),x.relevanceScore>=80&&e.jsx(B,{content:"High relevance match based on search query similarity",children:e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium cursor-help",children:[e.jsx(Pe,{className:"w-3 h-3"}),e.jsxs("span",{children:[x.relevanceScore,"% match"]})]})})]})]},`${x.rxcui}-${x.tty}`))})]},r)})}):e.jsx("div",{className:"space-y-4",children:a.results.map(r=>e.jsxs("div",{className:"relative",children:[e.jsx(B,{content:h[r.rxcui]?"Unpin this drug":"Pin this drug",children:e.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),togglePin(r.rxcui,r.name),setPinTick(w=>w+1)},className:`absolute top-2 left-2 z-10 inline-flex items-center justify-center w-6 h-6 rounded-full border ${h[r.rxcui]?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-white border-gray-200 text-gray-500"} hover:bg-yellow-50`,"aria-label":h[r.rxcui]?"Unpin":"Pin",children:e.jsx(U,{className:"w-3 h-3"})})}),e.jsx(pe,{drug:r,onClick:t,className:h[r.rxcui]?"ring-2 ring-yellow-200":""})]},`${r.rxcui}-${r.tty}`))}),a.count>a.results.length&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"px-6 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 flex items-center space-x-2 mx-auto",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsxs("span",{children:["Load More Results (",a.count-a.results.length," remaining)"]})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Search for drugs"}),e.jsx("p",{className:"text-sm",children:"Enter a drug name to search our database and external sources"})]})})},De=[{id:"pembrolizumab",label:"Pembrolizumab (Keytruda)",value:"pembrolizumab",type:"drug",category:"PD-1 Inhibitor",description:"Immune checkpoint inhibitor for various cancers",aliases:["keytruda","mk-3475"],frequency:95,fdaApproved:!0,isOncology:!0,targetGenes:["PD1","PDL1"],relatedTerms:["immunotherapy","checkpoint inhibitor","PD-1"]},{id:"nivolumab",label:"Nivolumab (Opdivo)",value:"nivolumab",type:"drug",category:"PD-1 Inhibitor",description:"Anti-PD-1 monoclonal antibody",aliases:["opdivo","bms-936558"],frequency:88,fdaApproved:!0,isOncology:!0,targetGenes:["PD1"],relatedTerms:["immunotherapy","melanoma","lung cancer"]},{id:"trastuzumab",label:"Trastuzumab (Herceptin)",value:"trastuzumab",type:"drug",category:"HER2 Inhibitor",description:"Monoclonal antibody targeting HER2",aliases:["herceptin"],frequency:92,fdaApproved:!0,isOncology:!0,targetGenes:["HER2","ERBB2"],relatedTerms:["breast cancer","HER2 positive","targeted therapy"]},{id:"imatinib",label:"Imatinib (Gleevec)",value:"imatinib",type:"drug",category:"Tyrosine Kinase Inhibitor",description:"BCR-ABL tyrosine kinase inhibitor",aliases:["gleevec","sti571"],frequency:85,fdaApproved:!0,isOncology:!0,targetGenes:["BCR-ABL","KIT","PDGFR"],relatedTerms:["CML","leukemia","GIST"]},{id:"osimertinib",label:"Osimertinib (Tagrisso)",value:"osimertinib",type:"drug",category:"EGFR Inhibitor",description:"Third-generation EGFR inhibitor",aliases:["tagrisso","azd9291"],frequency:82,fdaApproved:!0,isOncology:!0,targetGenes:["EGFR","T790M"],relatedTerms:["NSCLC","lung cancer","EGFR mutation"]},{id:"bevacizumab",label:"Bevacizumab (Avastin)",value:"bevacizumab",type:"drug",category:"VEGF Inhibitor",description:"Anti-VEGF monoclonal antibody",aliases:["avastin"],frequency:89,fdaApproved:!0,isOncology:!0,targetGenes:["VEGF"],relatedTerms:["angiogenesis","colorectal cancer","anti-angiogenic"]},{id:"rituximab",label:"Rituximab (Rituxan)",value:"rituximab",type:"drug",category:"CD20 Inhibitor",description:"Anti-CD20 monoclonal antibody",aliases:["rituxan","mabthera"],frequency:87,fdaApproved:!0,isOncology:!0,targetGenes:["CD20"],relatedTerms:["lymphoma","B-cell","hematologic malignancy"]},{id:"paclitaxel",label:"Paclitaxel (Taxol)",value:"paclitaxel",type:"drug",category:"Taxane",description:"Microtubule stabilizing agent",aliases:["taxol"],frequency:91,fdaApproved:!0,isOncology:!0,relatedTerms:["chemotherapy","breast cancer","ovarian cancer"]},{id:"doxorubicin",label:"Doxorubicin (Adriamycin)",value:"doxorubicin",type:"drug",category:"Anthracycline",description:"DNA intercalating agent",aliases:["adriamycin"],frequency:86,fdaApproved:!0,isOncology:!0,relatedTerms:["chemotherapy","cardiotoxicity","sarcoma"]},{id:"carboplatin",label:"Carboplatin",value:"carboplatin",type:"drug",category:"Platinum Compound",description:"DNA crosslinking agent",frequency:84,fdaApproved:!0,isOncology:!0,relatedTerms:["chemotherapy","ovarian cancer","lung cancer"]},{id:"aspirin",label:"Aspirin (Acetylsalicylic Acid)",value:"aspirin",type:"drug",category:"NSAID",description:"Anti-inflammatory, pain reliever, blood thinner",aliases:["acetylsalicylic acid","ASA","asa","asp"],frequency:99,fdaApproved:!0,isOncology:!1,relatedTerms:["pain relief","inflammation","heart disease","blood thinner","stroke prevention"]},{id:"acetaminophen",label:"Acetaminophen (Tylenol)",value:"acetaminophen",type:"drug",category:"Analgesic",description:"Pain reliever and fever reducer",aliases:["tylenol","paracetamol","acet"],frequency:98,fdaApproved:!0,isOncology:!1,relatedTerms:["pain relief","fever","headache"]},{id:"ibuprofen",label:"Ibuprofen (Advil, Motrin)",value:"ibuprofen",type:"drug",category:"NSAID",description:"Anti-inflammatory pain reliever",aliases:["advil","motrin","ibu"],frequency:97,fdaApproved:!0,isOncology:!1,relatedTerms:["pain relief","inflammation","fever","arthritis"]},{id:"naproxen",label:"Naproxen (Aleve)",value:"naproxen",type:"drug",category:"NSAID",description:"Long-acting anti-inflammatory",aliases:["aleve","naprosyn"],frequency:85,fdaApproved:!0,isOncology:!1,relatedTerms:["pain relief","inflammation","arthritis"]},{id:"diphenhydramine",label:"Diphenhydramine (Benadryl)",value:"diphenhydramine",type:"drug",category:"Antihistamine",description:"Allergy relief and sleep aid",aliases:["benadryl","dph"],frequency:82,fdaApproved:!0,isOncology:!1,relatedTerms:["allergy","sleep","antihistamine","itching"]},{id:"loratadine",label:"Loratadine (Claritin)",value:"loratadine",type:"drug",category:"Antihistamine",description:"Non-drowsy allergy medication",aliases:["claritin"],frequency:78,fdaApproved:!0,isOncology:!1,relatedTerms:["allergy","antihistamine","non-drowsy"]},{id:"cetirizine",label:"Cetirizine (Zyrtec)",value:"cetirizine",type:"drug",category:"Antihistamine",description:"Allergy and hives treatment",aliases:["zyrtec"],frequency:76,fdaApproved:!0,isOncology:!1,relatedTerms:["allergy","hives","antihistamine"]},{id:"omeprazole",label:"Omeprazole (Prilosec)",value:"omeprazole",type:"drug",category:"PPI",description:"Proton pump inhibitor for acid reflux",aliases:["prilosec","ppi"],frequency:89,fdaApproved:!0,isOncology:!1,relatedTerms:["acid reflux","heartburn","GERD","stomach acid"]},{id:"ranitidine",label:"Ranitidine (Zantac)",value:"ranitidine",type:"drug",category:"H2 Blocker",description:"Histamine H2 receptor antagonist",aliases:["zantac"],frequency:75,fdaApproved:!1,isOncology:!1,relatedTerms:["acid reflux","heartburn","H2 blocker"]},{id:"simvastatin",label:"Simvastatin (Zocor)",value:"simvastatin",type:"drug",category:"Statin",description:"Cholesterol-lowering medication",aliases:["zocor"],frequency:88,fdaApproved:!0,isOncology:!1,relatedTerms:["cholesterol","statin","heart disease","lipids"]},{id:"sertraline",label:"Sertraline (Zoloft)",value:"sertraline",type:"drug",category:"Antidepressant",description:"SSRI for depression and anxiety",aliases:["zoloft","lustral"],frequency:95,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","anxiety","SSRI","mental health"]},{id:"fluoxetine",label:"Fluoxetine (Prozac)",value:"fluoxetine",type:"drug",category:"Antidepressant",description:"SSRI for depression and OCD",aliases:["prozac"],frequency:93,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","OCD","SSRI","mental health"]},{id:"escitalopram",label:"Escitalopram (Lexapro)",value:"escitalopram",type:"drug",category:"Antidepressant",description:"SSRI for depression and anxiety disorders",aliases:["lexapro","cipralex"],frequency:91,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","anxiety","SSRI","panic disorder"]},{id:"alprazolam",label:"Alprazolam (Xanax)",value:"alprazolam",type:"drug",category:"Benzodiazepine",description:"Short-acting benzodiazepine for anxiety",aliases:["xanax"],frequency:89,fdaApproved:!0,isOncology:!1,relatedTerms:["anxiety","panic disorder","benzodiazepine"]},{id:"lorazepam",label:"Lorazepam (Ativan)",value:"lorazepam",type:"drug",category:"Benzodiazepine",description:"Benzodiazepine for anxiety and seizures",aliases:["ativan"],frequency:87,fdaApproved:!0,isOncology:!1,relatedTerms:["anxiety","seizures","benzodiazepine"]},{id:"risperidone",label:"Risperidone (Risperdal)",value:"risperidone",type:"drug",category:"Antipsychotic",description:"Atypical antipsychotic",aliases:["risperdal"],frequency:83,fdaApproved:!0,isOncology:!1,relatedTerms:["schizophrenia","bipolar","antipsychotic"]},{id:"quetiapine",label:"Quetiapine (Seroquel)",value:"quetiapine",type:"drug",category:"Antipsychotic",description:"Atypical antipsychotic for bipolar and schizophrenia",aliases:["seroquel"],frequency:85,fdaApproved:!0,isOncology:!1,relatedTerms:["bipolar disorder","schizophrenia","antipsychotic"]},{id:"bupropion",label:"Bupropion (Wellbutrin)",value:"bupropion",type:"drug",category:"Antidepressant",description:"Atypical antidepressant and smoking cessation aid",aliases:["wellbutrin","zyban"],frequency:88,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","smoking cessation","NDRI"]},{id:"levodopa",label:"Levodopa/Carbidopa (Sinemet)",value:"levodopa",type:"drug",category:"Neurological",description:"Dopamine precursor for Parkinson's disease",aliases:["sinemet","l-dopa"],frequency:90,fdaApproved:!0,isOncology:!1,relatedTerms:["parkinsons","dopamine","movement disorder"]},{id:"gabapentin",label:"Gabapentin (Neurontin)",value:"gabapentin",type:"drug",category:"Anticonvulsant",description:"Anticonvulsant for neuropathic pain and seizures",aliases:["neurontin"],frequency:92,fdaApproved:!0,isOncology:!1,relatedTerms:["neuropathic pain","seizures","epilepsy"]},{id:"pregabalin",label:"Pregabalin (Lyrica)",value:"pregabalin",type:"drug",category:"Anticonvulsant",description:"Anticonvulsant for neuropathic pain and fibromyalgia",aliases:["lyrica"],frequency:89,fdaApproved:!0,isOncology:!1,relatedTerms:["neuropathic pain","fibromyalgia","seizures"]},{id:"phenytoin",label:"Phenytoin (Dilantin)",value:"phenytoin",type:"drug",category:"Anticonvulsant",description:"Classic anticonvulsant for epilepsy",aliases:["dilantin"],frequency:85,fdaApproved:!0,isOncology:!1,relatedTerms:["epilepsy","seizures","anticonvulsant"]},{id:"valproic_acid",label:"Valproic Acid (Depakote)",value:"valproic acid",type:"drug",category:"Anticonvulsant",description:"Anticonvulsant and mood stabilizer",aliases:["depakote","divalproex"],frequency:87,fdaApproved:!0,isOncology:!1,relatedTerms:["epilepsy","bipolar disorder","migraine prevention"]},{id:"donepezil",label:"Donepezil (Aricept)",value:"donepezil",type:"drug",category:"Cholinesterase Inhibitor",description:"Cholinesterase inhibitor for Alzheimer's disease",aliases:["aricept"],frequency:88,fdaApproved:!0,isOncology:!1,relatedTerms:["alzheimers","dementia","cognitive impairment"]},{id:"morphine",label:"Morphine",value:"morphine",type:"drug",category:"Opioid",description:"Strong opioid for severe pain",aliases:["ms contin","kadian"],frequency:90,fdaApproved:!0,isOncology:!1,relatedTerms:["severe pain","opioid","cancer pain"]},{id:"oxycodone",label:"Oxycodone (OxyContin)",value:"oxycodone",type:"drug",category:"Opioid",description:"Opioid for moderate to severe pain",aliases:["oxycontin","percocet","roxicodone"],frequency:89,fdaApproved:!0,isOncology:!1,relatedTerms:["moderate pain","severe pain","opioid"]},{id:"hydrocodone",label:"Hydrocodone (Vicodin)",value:"hydrocodone",type:"drug",category:"Opioid",description:"Opioid for moderate pain",aliases:["vicodin","norco","lortab"],frequency:88,fdaApproved:!0,isOncology:!1,relatedTerms:["moderate pain","opioid","dental pain"]},{id:"fentanyl",label:"Fentanyl",value:"fentanyl",type:"drug",category:"Opioid",description:"Potent opioid for severe pain",aliases:["duragesic","actiq"],frequency:85,fdaApproved:!0,isOncology:!1,relatedTerms:["severe pain","cancer pain","breakthrough pain"]},{id:"tramadol",label:"Tramadol (Ultram)",value:"tramadol",type:"drug",category:"Opioid",description:"Mild opioid for moderate pain",aliases:["ultram","conzip"],frequency:87,fdaApproved:!0,isOncology:!1,relatedTerms:["moderate pain","chronic pain","weak opioid"]},{id:"celecoxib",label:"Celecoxib (Celebrex)",value:"celecoxib",type:"drug",category:"COX-2 Inhibitor",description:"Selective COX-2 inhibitor for pain and inflammation",aliases:["celebrex"],frequency:86,fdaApproved:!0,isOncology:!1,relatedTerms:["arthritis","inflammation","COX-2","joint pain"]},{id:"diclofenac",label:"Diclofenac (Voltaren)",value:"diclofenac",type:"drug",category:"NSAID",description:"NSAID for pain and inflammation",aliases:["voltaren","cataflam"],frequency:84,fdaApproved:!0,isOncology:!1,relatedTerms:["arthritis","inflammation","topical pain relief"]},{id:"venlafaxine",label:"Venlafaxine (Effexor)",value:"venlafaxine",type:"drug",category:"SNRI",description:"SNRI for depression and anxiety",aliases:["effexor"],frequency:86,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","anxiety","SNRI"]},{id:"duloxetine",label:"Duloxetine (Cymbalta)",value:"duloxetine",type:"drug",category:"SNRI",description:"SNRI for depression and neuropathic pain",aliases:["cymbalta"],frequency:85,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","neuropathic pain","fibromyalgia"]},{id:"citalopram",label:"Citalopram (Celexa)",value:"citalopram",type:"drug",category:"Antidepressant",description:"SSRI for depression",aliases:["celexa"],frequency:83,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","SSRI"]},{id:"paroxetine",label:"Paroxetine (Paxil)",value:"paroxetine",type:"drug",category:"Antidepressant",description:"SSRI for depression and anxiety",aliases:["paxil"],frequency:82,fdaApproved:!0,isOncology:!1,relatedTerms:["depression","anxiety","SSRI"]},{id:"lithium",label:"Lithium",value:"lithium",type:"drug",category:"Mood Stabilizer",description:"Mood stabilizer for bipolar disorder",aliases:["lithobid","eskalith"],frequency:81,fdaApproved:!0,isOncology:!1,relatedTerms:["bipolar disorder","mood stabilizer","mania"]},{id:"breast_cancer",label:"Breast Cancer",value:"breast cancer",type:"indication",category:"Solid Tumor",description:"Most common cancer in women",frequency:95,relatedTerms:["HER2","ER","PR","triple negative","ductal carcinoma"]},{id:"lung_cancer",label:"Lung Cancer",value:"lung cancer",type:"indication",category:"Solid Tumor",description:"Leading cause of cancer death",frequency:93,relatedTerms:["NSCLC","SCLC","EGFR","ALK","smoking"]},{id:"colorectal_cancer",label:"Colorectal Cancer",value:"colorectal cancer",type:"indication",category:"Solid Tumor",description:"Cancer of colon or rectum",frequency:88,relatedTerms:["KRAS","BRAF","MSI","CRC","adenocarcinoma"]},{id:"melanoma",label:"Melanoma",value:"melanoma",type:"indication",category:"Skin Cancer",description:"Aggressive skin cancer",frequency:86,relatedTerms:["BRAF","MEK","immunotherapy","metastatic"]},{id:"leukemia",label:"Leukemia",value:"leukemia",type:"indication",category:"Hematologic Malignancy",description:"Blood cancer affecting white blood cells",frequency:84,relatedTerms:["AML","CML","ALL","CLL","bone marrow"]},{id:"lymphoma",label:"Lymphoma",value:"lymphoma",type:"indication",category:"Hematologic Malignancy",description:"Cancer of lymphatic system",frequency:82,relatedTerms:["Hodgkin","non-Hodgkin","B-cell","T-cell"]},{id:"prostate_cancer",label:"Prostate Cancer",value:"prostate cancer",type:"indication",category:"Solid Tumor",description:"Most common cancer in men",frequency:89,relatedTerms:["PSA","androgen","hormone therapy","Gleason score"]},{id:"ovarian_cancer",label:"Ovarian Cancer",value:"ovarian cancer",type:"indication",category:"Solid Tumor",description:"Gynecologic malignancy",frequency:78,relatedTerms:["BRCA","PARP","CA-125","serous carcinoma"]},{id:"pancreatic_cancer",label:"Pancreatic Cancer",value:"pancreatic cancer",type:"indication",category:"Solid Tumor",description:"Aggressive digestive system cancer",frequency:75,relatedTerms:["KRAS","BRCA2","gemcitabine","poor prognosis"]},{id:"renal_cell_carcinoma",label:"Renal Cell Carcinoma",value:"renal cell carcinoma",type:"indication",category:"Solid Tumor",description:"Most common kidney cancer",frequency:73,relatedTerms:["VHL","clear cell","sunitinib","immunotherapy"]},{id:"checkpoint_inhibitor",label:"Checkpoint Inhibitor",value:"checkpoint inhibitor",type:"mechanism",category:"Immunotherapy",description:"Blocks immune checkpoint proteins",frequency:92,relatedTerms:["PD-1","PD-L1","CTLA-4","immunotherapy"]},{id:"tyrosine_kinase_inhibitor",label:"Tyrosine Kinase Inhibitor",value:"tyrosine kinase inhibitor",type:"mechanism",category:"Targeted Therapy",description:"Inhibits tyrosine kinase enzymes",frequency:90,relatedTerms:["EGFR","BCR-ABL","VEGFR","targeted therapy"]},{id:"monoclonal_antibody",label:"Monoclonal Antibody",value:"monoclonal antibody",type:"mechanism",category:"Targeted Therapy",description:"Engineered antibodies targeting specific antigens",frequency:88,relatedTerms:["mAb","targeted therapy","binding","specificity"]},{id:"alkylating_agent",label:"Alkylating Agent",value:"alkylating agent",type:"mechanism",category:"Chemotherapy",description:"Forms covalent bonds with DNA",frequency:85,relatedTerms:["DNA damage","cyclophosphamide","cisplatin"]},{id:"antimetabolite",label:"Antimetabolite",value:"antimetabolite",type:"mechanism",category:"Chemotherapy",description:"Interferes with DNA/RNA synthesis",frequency:83,relatedTerms:["folate antagonist","purine analog","pyrimidine analog"]},{id:"topoisomerase_inhibitor",label:"Topoisomerase Inhibitor",value:"topoisomerase inhibitor",type:"mechanism",category:"Chemotherapy",description:"Prevents DNA unwinding",frequency:81,relatedTerms:["topotecan","irinotecan","etoposide"]},{id:"proteasome_inhibitor",label:"Proteasome Inhibitor",value:"proteasome inhibitor",type:"mechanism",category:"Targeted Therapy",description:"Blocks protein degradation pathway",frequency:76,relatedTerms:["bortezomib","carfilzomib","protein degradation"]},{id:"angiogenesis_inhibitor",label:"Angiogenesis Inhibitor",value:"angiogenesis inhibitor",type:"mechanism",category:"Targeted Therapy",description:"Prevents blood vessel formation",frequency:79,relatedTerms:["VEGF","bevacizumab","anti-angiogenic"]},{id:"her2_positive",label:"HER2 Positive",value:"HER2 positive",type:"biomarker",category:"Protein Expression",description:"Overexpression of HER2 protein",frequency:94,relatedTerms:["breast cancer","trastuzumab","pertuzumab"]},{id:"er_pr_positive",label:"ER/PR Positive",value:"ER/PR positive",type:"biomarker",category:"Hormone Receptor",description:"Estrogen/Progesterone receptor positive",frequency:92,relatedTerms:["breast cancer","hormone therapy","tamoxifen"]},{id:"triple_negative",label:"Triple Negative",value:"triple negative",type:"biomarker",category:"Receptor Status",description:"ER-, PR-, HER2- breast cancer",frequency:87,relatedTerms:["breast cancer","chemotherapy","BRCA"]},{id:"egfr_mutation",label:"EGFR Mutation",value:"EGFR mutation",type:"biomarker",category:"Genetic Mutation",description:"Epidermal growth factor receptor mutations",frequency:89,relatedTerms:["lung cancer","osimertinib","erlotinib"]},{id:"kras_mutation",label:"KRAS Mutation",value:"KRAS mutation",type:"biomarker",category:"Genetic Mutation",description:"Kirsten rat sarcoma viral oncogene mutations",frequency:85,relatedTerms:["colorectal cancer","lung cancer","pancreatic cancer"]},{id:"brca_mutation",label:"BRCA Mutation",value:"BRCA mutation",type:"biomarker",category:"Genetic Mutation",description:"BRCA1/2 tumor suppressor gene mutations",frequency:88,relatedTerms:["breast cancer","ovarian cancer","PARP inhibitor"]},{id:"pd_l1_positive",label:"PD-L1 Positive",value:"PD-L1 positive",type:"biomarker",category:"Protein Expression",description:"Programmed death-ligand 1 expression",frequency:86,relatedTerms:["immunotherapy","pembrolizumab","checkpoint inhibitor"]},{id:"msi_high",label:"MSI-High",value:"MSI-high",type:"biomarker",category:"Molecular Feature",description:"Microsatellite instability high",frequency:83,relatedTerms:["colorectal cancer","immunotherapy","mismatch repair"]},{id:"tmb_high",label:"TMB-High",value:"TMB-high",type:"biomarker",category:"Molecular Feature",description:"Tumor mutational burden high",frequency:81,relatedTerms:["immunotherapy","checkpoint inhibitor","mutation load"]},{id:"braf",label:"BRAF",value:"BRAF",type:"gene",category:"Oncogene",description:"Proto-oncogene B-Raf",frequency:84,relatedTerms:["melanoma","colorectal cancer","dabrafenib"]},{id:"alk",label:"ALK",value:"ALK",type:"gene",category:"Fusion Gene",description:"Anaplastic lymphoma kinase",frequency:78,relatedTerms:["lung cancer","crizotinib","alectinib"]},{id:"ros1",label:"ROS1",value:"ROS1",type:"gene",category:"Fusion Gene",description:"ROS proto-oncogene 1",frequency:72,relatedTerms:["lung cancer","crizotinib","entrectinib"]},{id:"ntrk",label:"NTRK",value:"NTRK",type:"gene",category:"Fusion Gene",description:"Neurotrophic tyrosine receptor kinase",frequency:68,relatedTerms:["solid tumors","larotrectinib","entrectinib"]},{id:"ret",label:"RET",value:"RET",type:"gene",category:"Fusion Gene",description:"Rearranged during transfection",frequency:70,relatedTerms:["lung cancer","thyroid cancer","selpercatinib"]}],Le=({placeholder:a="Search drugs, indications, mechanisms...",onSelect:s,onInputChange:c,value:t="",maxResults:o=10,showCategories:m=!0,allowMultiple:S=!1,selectedOptions:h=[],disabled:y=!1,loading:f=!1,className:N="",onOfflineChange:v})=>{const[A,p]=i.useState(t),[r,u]=i.useState(!1),[w,R]=i.useState([]),[x,P]=i.useState(-1),[g,I]=i.useState([]),[O,$]=i.useState([]),[ve,re]=i.useState(!1),V=i.useRef(null),X=i.useRef(null);i.useEffect(()=>{const d=localStorage.getItem("oncosaferx_recent_searches");if(d)try{I(JSON.parse(d))}catch(k){console.warn("Failed to parse recent searches:",k)}},[]),i.useEffect(()=>{let d=!1;if(A.trim().length<2){$([]),re(!1);return}const k=setTimeout(async()=>{try{const W=await fetch(`/api/drugs/search?q=${encodeURIComponent(A)}`);if(!W.ok)throw new Error("suggestions failed");const Z=await W.json(),ne=(Z.results||[]).slice(0,o).map(b=>({id:b.id||b.rxcui||b.name,label:b.name,value:b.name,type:"drug",category:"Drug"}));if(!d){$(ne);const b=!Z.sources?.rxnorm||Z.sources.rxnorm===0;re(b),v?.(b)}}catch{d||$([])}},250);return()=>{d=!0,clearTimeout(k)}},[A,o,v]),i.useEffect(()=>{if(!A.trim()){const b=De.filter(C=>C.type==="drug"&&C.frequency&&C.frequency>80).sort((C,G)=>(G.frequency||0)-(C.frequency||0)).slice(0,o);R(b);return}const d=A.toLowerCase().trim(),k=(b,C)=>{if(b=b.toLowerCase(),C=C.toLowerCase(),b===C)return{matches:!0,score:100};if(b.startsWith(C))return{matches:!0,score:90};if(b.includes(C))return{matches:!0,score:80};if(C.includes("-")||C.includes(" ")||C.includes(".")){const G=C.replace(/[-\s.]/g,"");if(b.includes(G))return{matches:!0,score:70}}if(C.length>=2){if(b.split(/[\s-()]/).map(H=>H.charAt(0)).join("").includes(C))return{matches:!0,score:60};let J=0;for(const H of C){const de=b.indexOf(H,J);if(de===-1||(J=de+1,J>=b.length))break}if(J>0&&C.length>=3)return{matches:!0,score:50}}if(C.length>=3){let G=0,L=-1;for(const J of C){const H=b.indexOf(J,L+1);H>L&&(G++,L=H)}if(G/C.length>=.7)return{matches:!0,score:40}}return{matches:!1,score:0}},Z=De.filter(b=>b.type!=="drug"?!1:!!(k(b.label,d).matches||k(b.value,d).matches||b.aliases?.some(L=>k(L,d).matches)||b.relatedTerms?.some(L=>k(L,d).matches)||b.description&&k(b.description,d).matches||k(b.category,d).matches)).map(b=>{const C=k(b.label,d),G=k(b.value,d),L=b.aliases?Math.max(...b.aliases.map(H=>k(H,d).score)):0,J=Math.max(C.score,G.score,L);return{...b,relevanceScore:J}}).sort((b,C)=>{if(b.relevanceScore!==C.relevanceScore)return C.relevanceScore-b.relevanceScore;if(b.type==="drug"&&C.type==="drug"){if(b.fdaApproved&&!C.fdaApproved)return-1;if(!b.fdaApproved&&C.fdaApproved)return 1}return(C.frequency||0)-(b.frequency||0)}),ne=O.length>0?O.slice(0,o):Z.slice(0,o);R(ne),P(-1)},[A,o,O]);const l=d=>{const k=d.target.value;p(k),c?.(k),u(!0)},D=d=>{S?h.find(W=>W.id===d.id)||s(d):(p(d.label),s(d));const k=[d.value,...g.filter(W=>W!==d.value)].slice(0,10);I(k),localStorage.setItem("oncosaferx_recent_searches",JSON.stringify(k)),u(!1),P(-1)},_=d=>{if(r)switch(d.key){case"ArrowDown":d.preventDefault(),P(k=>k<w.length-1?k+1:k);break;case"ArrowUp":d.preventDefault(),P(k=>k>0?k-1:k);break;case"Enter":d.preventDefault(),x>=0&&w[x]&&D(w[x]);break;case"Escape":u(!1),P(-1),V.current?.blur();break}},E=d=>{switch(d){case"drug":return e.jsx(ce,{className:"h-4 w-4 text-blue-500"});case"indication":return e.jsx(le,{className:"h-4 w-4 text-red-500"});case"mechanism":return e.jsx(ye,{className:"h-4 w-4 text-purple-500"});case"biomarker":return e.jsx(oe,{className:"h-4 w-4 text-green-500"});case"gene":return e.jsx(Ce,{className:"h-4 w-4 text-pink-500"});case"class":return e.jsx(_e,{className:"h-4 w-4 text-orange-500"});default:return e.jsx(K,{className:"h-4 w-4 text-gray-500"})}},z=d=>{console.log("Remove option:",d)};return e.jsxs("div",{className:`relative ${N}`,children:[S&&h.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:h.map(d=>e.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-violet-100 text-violet-800 rounded-full text-sm",children:[E(d.type),e.jsx("span",{children:d.label}),e.jsx("button",{onClick:()=>z(d.id),className:"text-violet-600 hover:text-violet-800",children:e.jsx(Se,{className:"h-3 w-3"})})]},d.id))}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{ref:V,type:"text",value:A,onChange:l,onKeyDown:_,onFocus:()=>u(!0),onBlur:()=>setTimeout(()=>u(!1),200),placeholder:a,disabled:y||f,className:`w-full pl-10 pr-10 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-violet-500 ${y?"bg-gray-100 cursor-not-allowed":"bg-white"}`}),f&&e.jsx(ca,{className:"absolute right-8 top-1/2 transform -translate-y-1/2 h-5 w-5 text-violet-600 animate-spin"}),e.jsx(Ae,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-hidden",children:[A.trim()===""&&e.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b text-sm text-gray-600",children:g.length>0?"Recent searches & Popular options":"Popular options"}),w.length>0?e.jsx("ul",{ref:X,className:"max-h-80 overflow-y-auto",children:w.map((d,k)=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>D(d),className:`w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 ${k===x?"bg-violet-50 border-l-4 border-violet-500":""}`,children:[E(d.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:d.label}),d.fdaApproved&&e.jsx(ke,{className:"h-3 w-3 text-green-500 flex-shrink-0"}),d.isOncology&&e.jsx(le,{className:"h-3 w-3 text-red-500 flex-shrink-0"})]}),m&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[d.type," • ",d.category]}),d.frequency&&d.frequency>85&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-xs text-yellow-600",children:"Popular"})]})]}),d.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate",children:d.description})]}),d.type==="drug"&&e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("div",{className:"text-xs text-gray-500",children:d.fdaApproved?"FDA Approved":"Investigational"})})]})},d.id))}):e.jsxs("div",{className:"px-4 py-6 text-center text-gray-500",children:[e.jsx(K,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No matches found"}),e.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]}),w.length>0&&e.jsxs("div",{className:"px-4 py-2 bg-gray-50 border-t text-xs text-gray-500 text-center",children:["Showing ",w.length," result",w.length!==1?"s":"",A.trim()&&` for "${A}"`]})]})]})},ga=[{value:"antineoplastic",label:"Antineoplastic Agents",description:"Drugs that inhibit or prevent cancer growth",count:1247,popular:!0},{value:"immunotherapy",label:"Immunotherapy",description:"Treatments that use the immune system",count:324,popular:!0},{value:"targeted_therapy",label:"Targeted Therapy",description:"Drugs targeting specific cancer mechanisms",count:456,popular:!0},{value:"chemotherapy",label:"Chemotherapy",description:"Traditional cytotoxic agents",count:892,popular:!0},{value:"hormone_therapy",label:"Hormone Therapy",description:"Treatments that block hormones",count:156},{value:"supportive_care",label:"Supportive Care",description:"Drugs for managing side effects",count:234},{value:"pain_management",label:"Pain Management",description:"Analgesics and pain control",count:187},{value:"antiemetic",label:"Antiemetic",description:"Anti-nausea medications",count:89},{value:"growth_factor",label:"Growth Factor",description:"Stimulate blood cell production",count:67},{value:"bisphosphonate",label:"Bisphosphonate",description:"Bone strengthening agents",count:45},{value:"radioprotective",label:"Radioprotective",description:"Protect from radiation damage",count:23},{value:"differentiation_agent",label:"Differentiation Agent",description:"Promote cell maturation",count:34}],ya=[{value:"kinase_inhibitor",label:"Kinase Inhibitor",description:"Blocks protein kinase enzymes",count:234,popular:!0},{value:"monoclonal_antibody",label:"Monoclonal Antibody",description:"Engineered antibodies",count:187,popular:!0},{value:"checkpoint_inhibitor",label:"Checkpoint Inhibitor",description:"Immune checkpoint blockade",count:45,popular:!0},{value:"alkylating_agent",label:"Alkylating Agent",description:"DNA crosslinking compounds",count:156},{value:"antimetabolite",label:"Antimetabolite",description:"Interferes with DNA/RNA synthesis",count:123},{value:"topoisomerase_inhibitor",label:"Topoisomerase Inhibitor",description:"Prevents DNA unwinding",count:98},{value:"proteasome_inhibitor",label:"Proteasome Inhibitor",description:"Blocks protein degradation",count:34},{value:"angiogenesis_inhibitor",label:"Angiogenesis Inhibitor",description:"Prevents blood vessel formation",count:67},{value:"histone_deacetylase_inhibitor",label:"HDAC Inhibitor",description:"Epigenetic modifier",count:29},{value:"mtor_inhibitor",label:"mTOR Inhibitor",description:"Blocks mTOR pathway",count:23},{value:"cyclin_dependent_kinase_inhibitor",label:"CDK Inhibitor",description:"Cell cycle inhibitor",count:18},{value:"poly_adp_ribose_polymerase_inhibitor",label:"PARP Inhibitor",description:"DNA repair inhibitor",count:12}],fa=[{value:"breast_cancer",label:"Breast Cancer",description:"Malignant breast tumors",count:456,popular:!0},{value:"lung_cancer",label:"Lung Cancer",description:"Non-small cell and small cell",count:423,popular:!0},{value:"colorectal_cancer",label:"Colorectal Cancer",description:"Colon and rectal cancers",count:234,popular:!0},{value:"melanoma",label:"Melanoma",description:"Malignant skin cancer",count:156,popular:!0},{value:"leukemia",label:"Leukemia",description:"Blood cancer varieties",count:189},{value:"lymphoma",label:"Lymphoma",description:"Lymphatic system cancers",count:167},{value:"prostate_cancer",label:"Prostate Cancer",description:"Male reproductive cancer",count:145},{value:"ovarian_cancer",label:"Ovarian Cancer",description:"Female reproductive cancer",count:123},{value:"pancreatic_cancer",label:"Pancreatic Cancer",description:"Digestive system cancer",count:98},{value:"renal_cell_carcinoma",label:"Renal Cell Carcinoma",description:"Kidney cancer",count:87},{value:"hepatocellular_carcinoma",label:"Hepatocellular Carcinoma",description:"Liver cancer",count:76},{value:"glioblastoma",label:"Glioblastoma",description:"Aggressive brain tumor",count:65},{value:"sarcoma",label:"Sarcoma",description:"Connective tissue cancer",count:54},{value:"multiple_myeloma",label:"Multiple Myeloma",description:"Plasma cell cancer",count:43},{value:"bladder_cancer",label:"Bladder Cancer",description:"Urinary system cancer",count:32}],ba=[{value:"her2_positive",label:"HER2 Positive",description:"HER2 protein overexpression",count:234,popular:!0},{value:"er_pr_positive",label:"ER/PR Positive",description:"Hormone receptor positive",count:198,popular:!0},{value:"triple_negative",label:"Triple Negative",description:"ER-, PR-, HER2- breast cancer",count:123,popular:!0},{value:"egfr_mutation",label:"EGFR Mutation",description:"EGFR gene alterations",count:187,popular:!0},{value:"kras_mutation",label:"KRAS Mutation",description:"KRAS oncogene mutations",count:156},{value:"brca_mutation",label:"BRCA Mutation",description:"BRCA1/2 gene mutations",count:89},{value:"pd_l1_positive",label:"PD-L1 Positive",description:"PD-L1 expression ≥1%",count:167},{value:"msi_high",label:"MSI-High",description:"Microsatellite instability",count:78},{value:"tmb_high",label:"TMB-High",description:"High tumor mutation burden",count:67},{value:"braf_mutation",label:"BRAF Mutation",description:"BRAF V600E mutations",count:98},{value:"alk_fusion",label:"ALK Fusion",description:"ALK gene rearrangements",count:45},{value:"ros1_fusion",label:"ROS1 Fusion",description:"ROS1 gene fusions",count:23},{value:"ntrk_fusion",label:"NTRK Fusion",description:"NTRK gene fusions",count:18},{value:"ret_fusion",label:"RET Fusion",description:"RET gene rearrangements",count:34},{value:"met_amplification",label:"MET Amplification",description:"MET gene amplification",count:29}],va=[{value:"fda_approved",label:"FDA Approved",description:"Full FDA approval",count:1456,popular:!0},{value:"accelerated_approval",label:"Accelerated Approval",description:"FDA accelerated pathway",count:89},{value:"breakthrough_therapy",label:"Breakthrough Therapy",description:"FDA breakthrough designation",count:67},{value:"fast_track",label:"Fast Track",description:"FDA fast track status",count:123},{value:"orphan_drug",label:"Orphan Drug",description:"Rare disease designation",count:234},{value:"priority_review",label:"Priority Review",description:"Expedited FDA review",count:156},{value:"ema_approved",label:"EMA Approved",description:"European approval",count:1234},{value:"conditional_approval",label:"Conditional Approval",description:"Conditional marketing authorization",count:45},{value:"investigational",label:"Investigational",description:"In clinical trials",count:567}],ja=[{value:"approved",label:"FDA Approved",description:"Marketed drugs",count:1456,popular:!0},{value:"phase_4",label:"Phase IV",description:"Post-marketing surveillance",count:234},{value:"phase_3",label:"Phase III",description:"Large-scale efficacy trials",count:345,popular:!0},{value:"phase_2",label:"Phase II",description:"Dose-finding and efficacy",count:567},{value:"phase_1",label:"Phase I",description:"First-in-human safety",count:789},{value:"phase_1_2",label:"Phase I/II",description:"Combined early phases",count:123},{value:"phase_2_3",label:"Phase II/III",description:"Combined late phases",count:89},{value:"investigational",label:"Investigational",description:"All trial phases",count:1234}],Na=({options:a,selectedValues:s,onSelectionChange:c,placeholder:t="Select options...",label:o,maxSelection:m,searchable:S=!0,showCounts:h=!0,className:y=""})=>{const[f,N]=i.useState(!1),[v,A]=i.useState(""),[p,r]=i.useState(a),u=i.useRef(null),w=i.useRef(null);i.useEffect(()=>{if(v.trim()){const g=a.filter(I=>I.label.toLowerCase().includes(v.toLowerCase())||I.description?.toLowerCase().includes(v.toLowerCase())||I.value.toLowerCase().includes(v.toLowerCase()));r(g)}else{const g=[...a].sort((I,O)=>I.popular&&!O.popular?-1:!I.popular&&O.popular?1:(O.count||0)-(I.count||0));r(g)}},[v,a]),i.useEffect(()=>{const g=I=>{u.current&&!u.current.contains(I.target)&&N(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const R=g=>{const I=s.includes(g);let O;if(I)O=s.filter($=>$!==g);else{if(m&&s.length>=m)return;O=[...s,g]}c(O)},x=g=>{c(s.filter(I=>I!==g))},P=()=>{c([])};return e.jsxs("div",{ref:u,className:`relative ${y}`,children:[o&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),s.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[s.map(g=>{const I=a.find(O=>O.value===g);return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-violet-100 text-violet-800",children:[I?.label||g,e.jsx("button",{onClick:()=>x(g),className:"ml-1 text-violet-600 hover:text-violet-800",children:e.jsx(Se,{className:"h-3 w-3"})})]},g)}),s.length>1&&e.jsx("button",{onClick:P,className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600 hover:bg-gray-200",children:"Clear all"})]}),e.jsxs("button",{onClick:()=>N(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 focus:ring-2 focus:ring-violet-500 focus:border-violet-500",children:[e.jsx("span",{className:`text-sm ${s.length===0?"text-gray-500":"text-gray-900"}`,children:s.length===0?t:`${s.length} selected`}),e.jsx(Ae,{className:`h-4 w-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-hidden",children:[S&&e.jsx("div",{className:"p-3 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{ref:w,type:"text",value:v,onChange:g=>A(g.target.value),placeholder:"Search options...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-violet-500 focus:border-violet-500"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:p.length>0?p.map(g=>e.jsxs("button",{onClick:()=>R(g.value),className:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-gray-50 focus:bg-gray-50",disabled:m&&s.length>=m&&!s.includes(g.value),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-sm font-medium ${s.includes(g.value)?"text-violet-700":"text-gray-900"}`,children:g.label}),g.popular&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Popular"})]}),g.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:g.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[h&&g.count&&e.jsx("span",{className:"text-xs text-gray-400",children:g.count}),s.includes(g.value)&&e.jsx(sa,{className:"h-4 w-4 text-violet-600"})]})]},g.value)):e.jsxs("div",{className:"px-3 py-4 text-center text-gray-500",children:[e.jsx(K,{className:"h-6 w-6 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No options found"})]})}),p.length>0&&e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border-t text-xs text-gray-500 text-center",children:[s.length>0&&e.jsxs("span",{children:[s.length," selected • "]}),p.length," option",p.length!==1?"s":"",m&&e.jsxs("span",{children:[" • Max ",m]})]})]})]})},wa=({onOfflineChange:a})=>{const[s,c]=i.useState({query:"",drugType:[],therapeuticClass:[],mechanismOfAction:[],indication:[],biomarker:[],approvalStatus:[],clinicalTrialPhase:[],hasInteractions:!1,hasGenomicFactors:!1,requiresMonitoring:!1,isOncologyDrug:!1,isOrphanDrug:!1,hasBlackBoxWarning:!1}),[t,o]=i.useState([]),[m,S]=i.useState([]),[h,y]=i.useState(!1),[f,N]=i.useState(!1),[v,A]=i.useState("search"),[p,r]=i.useState("therapeutic"),[u,w]=i.useState([]),[R,x]=i.useState(!1),[P,g]=i.useState(!1),I=async l=>!l||l.length<2?[]:[{type:"drug",text:"pembrolizumab",confidence:.95,category:"PD-1 Inhibitor",description:"Checkpoint inhibitor for multiple cancer types",relevantDrugs:["nivolumab","atezolizumab"],alternativeTerms:["Keytruda","PD-1 inhibitor"]},{type:"indication",text:"non-small cell lung cancer",confidence:.88,category:"Oncology",description:"Most common type of lung cancer",relevantDrugs:["osimertinib","erlotinib","gefitinib"]},{type:"mechanism",text:"EGFR tyrosine kinase inhibitor",confidence:.82,category:"Targeted Therapy",description:"Targets EGFR signaling pathway",relevantDrugs:["osimertinib","erlotinib","afatinib"]}].filter(_=>_.text.toLowerCase().includes(l.toLowerCase())||_.category.toLowerCase().includes(l.toLowerCase())||_.alternativeTerms?.some(E=>E.toLowerCase().includes(l.toLowerCase())));i.useEffect(()=>{const l=setTimeout(async()=>{if(s.query){const D=await I(s.query);o(D)}},300);return()=>clearTimeout(l)},[s.query]),i.useEffect(()=>{let l=!1;if(!s.query||s.query.trim().length<2){w([]),x(!1);return}g(!0);const D=setTimeout(async()=>{try{const _=await fetch(`/api/drugs/suggestions?q=${encodeURIComponent(s.query)}&limit=8`);if(!_.ok)throw new Error("suggestions failed");const E=await _.json();if(l)return;w((E.suggestions||[]).map(z=>({name:z.name,rxcui:z.rxcui}))),x(!!E.offline),a?.(!!E.offline)}catch{l||(w([]),x(!1))}finally{l||g(!1)}},300);return()=>{l=!0,clearTimeout(D)}},[s.query,a]);const O=(l,D)=>{c(_=>({..._,[l]:D}))},$=(l,D)=>{c(_=>{const E=_[l],z=E.includes(D)?E.filter(d=>d!==D):[...E,D];return{..._,[l]:z}})},ve=()=>{c({query:"",drugType:[],therapeuticClass:[],mechanismOfAction:[],indication:[],biomarker:[],approvalStatus:[],clinicalTrialPhase:[],hasInteractions:!1,hasGenomicFactors:!1,requiresMonitoring:!1,isOncologyDrug:!1,isOrphanDrug:!1,hasBlackBoxWarning:!1})},re=()=>{let l=0;return Object.entries(s).forEach(([D,_])=>{D!=="query"&&(Array.isArray(_)&&_.length>0&&l++,typeof _=="boolean"&&_&&l++)}),l},V=(l,D,_,E)=>{const z=s[l];return e.jsxs(F,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[E,e.jsx("h4",{className:"font-medium text-gray-900",children:_})]}),e.jsx(Na,{options:D,selectedValues:z,onSelectionChange:d=>{c(k=>({...k,[l]:d}))},placeholder:`Select ${_.toLowerCase()}...`,searchable:!0,showCounts:!0,maxSelection:5})]})},X=({isActive:l,onClick:D,children:_})=>e.jsx("button",{onClick:D,className:`px-4 py-2 text-sm font-medium rounded-lg ${l?"bg-violet-100 text-violet-700 border border-violet-200":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:_});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{className:"border-violet-200 bg-gradient-to-r from-violet-50 to-indigo-50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ae,{className:"h-6 w-6 text-violet-600"}),e.jsx("h2",{className:"text-xl font-bold text-violet-800",children:"AI-Enhanced Drug Search"}),e.jsx("span",{className:"px-3 py-1 bg-violet-100 text-violet-800 rounded-full text-sm font-medium",children:"Neural Engine v2.0"})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Le,{placeholder:"Search by drug name, indication, mechanism, biomarker, or ask a question...",onSelect:l=>{O("query",l.value),l.type==="indication"?$("indication",l.value):l.type==="mechanism"?$("mechanismOfAction",l.value):l.type==="biomarker"&&$("biomarker",l.value)},onInputChange:l=>O("query",l),value:s.query,loading:h,maxResults:12,showCategories:!0,className:"w-full",onOfflineChange:a})}),s.query.trim().length>=2&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Top matches"}),R&&e.jsx("div",{className:"text-[11px] text-gray-500",children:"Using offline suggestions"})]}),e.jsx("div",{className:"p-2",children:P?e.jsx("div",{className:"text-xs text-gray-500 px-2 py-1",children:"Analyzing…"}):u.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((l,D)=>e.jsx("button",{onClick:()=>O("query",l.name),className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 hover:bg-gray-200",title:l.rxcui?`RXCUI ${l.rxcui}`:l.name,children:l.name},`${l.rxcui||l.name}-${D}`))}):e.jsx("div",{className:"text-xs text-gray-500 px-2 py-1",children:"No matches"})})]}),t.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg mb-4",children:[e.jsx("div",{className:"p-3 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-violet-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI Suggestions"})]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.map((l,D)=>e.jsxs("button",{onClick:()=>O("query",l.text),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 text-left",children:[e.jsxs("div",{className:"flex-shrink-0",children:[l.type==="drug"&&e.jsx(ce,{className:"h-4 w-4 text-blue-500"}),l.type==="indication"&&e.jsx(le,{className:"h-4 w-4 text-red-500"}),l.type==="mechanism"&&e.jsx(ye,{className:"h-4 w-4 text-purple-500"}),l.type==="biomarker"&&e.jsx(oe,{className:"h-4 w-4 text-green-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.text}),e.jsx("div",{className:"text-xs text-gray-500",children:l.category}),l.description&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:l.description})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[Math.round(l.confidence*100),"%"]})]},D))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI Mode:"}),e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{mode:"search",label:"Smart Search",icon:K},{mode:"recommend",label:"Recommendations",icon:le},{mode:"analyze",label:"Deep Analysis",icon:We}].map(({mode:l,label:D,icon:_})=>e.jsxs("button",{onClick:()=>A(l),className:`flex items-center space-x-2 px-3 py-1 rounded-md text-sm font-medium transition-all ${v===l?"bg-white text-violet-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:D})]},l))})]})]})}),e.jsx(F,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Advanced Filters"}),re()>0&&e.jsxs("span",{className:"px-2 py-1 bg-violet-100 text-violet-800 rounded-full text-sm font-medium",children:[re()," active"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:ve,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear All"}),e.jsxs("button",{onClick:()=>N(!f),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-1",children:[f?e.jsx(Je,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"}),e.jsxs("span",{children:[f?"Hide":"Show"," Filters"]})]})]})]}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx(X,{isActive:p==="therapeutic",onClick:()=>r("therapeutic"),children:"Therapeutic"}),e.jsx(X,{isActive:p==="molecular",onClick:()=>r("molecular"),children:"Molecular"}),e.jsx(X,{isActive:p==="clinical",onClick:()=>r("clinical"),children:"Clinical"}),e.jsx(X,{isActive:p==="regulatory",onClick:()=>r("regulatory"),children:"Regulatory"}),e.jsx(X,{isActive:p==="safety",onClick:()=>r("safety"),children:"Safety"})]}),p==="therapeutic"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[V("therapeuticClass",ga,"Therapeutic Class",e.jsx(Ce,{className:"h-4 w-4 text-red-500"})),V("indication",fa,"Cancer Indication",e.jsx(le,{className:"h-4 w-4 text-blue-500"})),V("mechanismOfAction",ya,"Mechanism of Action",e.jsx(ye,{className:"h-4 w-4 text-purple-500"}))]}),p==="molecular"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[V("biomarker",ba,"Biomarker Targets",e.jsx(oe,{className:"h-4 w-4 text-green-500"})),e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"h-4 w-4 text-blue-500"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Molecular Features"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasGenomicFactors,onChange:l=>O("hasGenomicFactors",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Has Genomic Factors"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasInteractions,onChange:l=>O("hasInteractions",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Has Drug Interactions"})]})]})]})})]}),p==="clinical"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[V("clinicalTrialPhase",ja,"Clinical Trial Phase",e.jsx(Pe,{className:"h-4 w-4 text-orange-500"})),e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"h-4 w-4 text-purple-500"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Patient Factors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.requiresMonitoring,onChange:l=>O("requiresMonitoring",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires Monitoring"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isOncologyDrug,onChange:l=>O("isOncologyDrug",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Oncology Drugs Only"})]})]})]})})]}),p==="regulatory"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[V("approvalStatus",va,"Approval Status",e.jsx(ke,{className:"h-4 w-4 text-green-500"})),e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4 text-blue-500"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Regulatory Features"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isOrphanDrug,onChange:l=>O("isOrphanDrug",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Orphan Drug Status"})]})})]})})]}),p==="safety"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-red-500"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Safety Alerts"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasBlackBoxWarning,onChange:l=>O("hasBlackBoxWarning",l.target.checked),className:"rounded border-gray-300 text-violet-600 focus:ring-violet-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Black Box Warning"})]})})]})})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"bg-gradient-to-r from-violet-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-violet-700 hover:to-indigo-700 flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Search Drugs"})]}),e.jsxs("button",{className:"border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Get AI Recommendations"})]}),e.jsxs("button",{className:"border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Results"})]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Powered by OncoSafeRx Neural Engine"})]})]})};function xe(a,s={}){const c=we(),t=qe(),{defaultValue:o,serialize:m=Me,deserialize:S=Be,replace:h=!1}=s,y=i.useCallback(()=>{const r=new URLSearchParams(t.search).get(a);if(r!==null)try{return S(r)}catch(u){console.warn(`Failed to deserialize URL parameter "${a}":`,u)}return o??null},[a,t.search,o,S]),[f,N]=i.useState(y),v=i.useCallback(p=>{const r=new URLSearchParams(t.search);if(p==null||p==="")r.delete(a);else try{const R=m(p);r.set(a,R)}catch(R){console.warn(`Failed to serialize value for URL parameter "${a}":`,R);return}const u=r.toString(),w=`${t.pathname}${u?`?${u}`:""}`;h?c(w,{replace:!0}):c(w)},[a,t.pathname,t.search,c,h,m]);i.useEffect(()=>{const p=y();N(p)},[y]);const A=i.useCallback(p=>{N(r=>{const u=typeof p=="function"?p(r):p;return setTimeout(()=>v(u),0),u})},[v]);return[f,A]}function Me(a){return a==null?"":typeof a=="string"?a:typeof a=="number"||typeof a=="boolean"?String(a):Array.isArray(a)||typeof a=="object"?JSON.stringify(a):String(a)}function Be(a){if(!a)return null;try{return JSON.parse(a)}catch{return a==="true"?!0:a==="false"?!1:!isNaN(Number(a))&&a!==""?Number(a):a}}function Sa(a,s={}){const c=we(),t=qe(),{replace:o=!0}=s,m=i.useCallback(()=>{const v=new URLSearchParams(t.search),A={...a};return Object.keys(a).forEach(p=>{const r=v.get(p);if(r!==null)try{A[p]=Be(r)}catch(u){console.warn(`Failed to parse filter "${p}" from URL:`,u)}}),A},[t.search]),[S,h]=i.useState(m),y=i.useCallback(v=>{const A=new URLSearchParams(t.search);Object.entries(v).forEach(([u,w])=>{if(w==null||w===""||Array.isArray(w)&&w.length===0||w===a[u])A.delete(u);else try{A.set(u,Me(w))}catch(R){console.warn(`Failed to serialize filter "${u}":`,R)}});const p=A.toString(),r=`${t.pathname}${p?`?${p}`:""}`;o?c(r,{replace:!0}):c(r)},[t.pathname,t.search,c,o]);i.useEffect(()=>{const v=m();h(v)},[m]);const f=i.useCallback(v=>{h(A=>{const p=typeof v=="function"?v(A):v,r={...A,...p};return setTimeout(()=>y(r),0),r})},[y]),N=i.useCallback(()=>{h(a),setTimeout(()=>y(a),0)},[y,a]);return[S,f,N]}function Aa(a=1,s=20){const[c,t]=xe("page",{defaultValue:a,replace:!0}),[o,m]=xe("pageSize",{defaultValue:s,replace:!0}),S=i.useCallback(()=>{t(a)},[t,a]);return{page:c||a,pageSize:o||s,setPage:t,setPageSize:m,resetPagination:S}}function Ca(a,s="asc"){const[c,t]=xe("sortBy",{defaultValue:a,replace:!0}),[o,m]=xe("sortDirection",{defaultValue:s,replace:!0}),S=i.useCallback((h,y)=>{t(h),m(y||(h===c&&o==="asc"?"desc":"asc"))},[c,o,t,m]);return{sortBy:c,sortDirection:o||s,updateSort:S,setSortBy:t,setSortDirection:m}}function Fe(a,s,c={}){const{serialize:t=JSON.stringify,deserialize:o=JSON.parse,syncAcrossTabs:m=!0}=c,[S,h]=i.useState(()=>{try{const N=window.localStorage.getItem(a);return N!==null?o(N):s}catch(N){return console.warn(`Error reading localStorage key "${a}":`,N),s}}),y=i.useCallback(N=>{try{const v=N instanceof Function?N(S):N;h(v),v===void 0?window.localStorage.removeItem(a):window.localStorage.setItem(a,t(v))}catch(v){console.warn(`Error setting localStorage key "${a}":`,v)}},[a,t,S]),f=i.useCallback(()=>{try{window.localStorage.removeItem(a),h(s)}catch(N){console.warn(`Error removing localStorage key "${a}":`,N)}},[a,s]);return i.useEffect(()=>{if(!m)return;const N=v=>{if(v.key===a&&v.newValue!==null)try{h(o(v.newValue))}catch(A){console.warn(`Error parsing localStorage change for key "${a}":`,A)}else v.key===a&&v.newValue===null&&h(s)};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[a,o,s,m]),[S,y,f]}function ka(a,s="user_preferences"){const[c,t,o]=Fe(s,a),m=i.useCallback((y,f)=>{t(N=>({...N,[y]:f}))},[t]),S=i.useCallback(y=>{t(f=>({...f,...y}))},[t]),h=i.useCallback(()=>{t(a)},[t,a]);return{preferences:c,updatePreference:m,updatePreferences:S,resetPreferences:h,clearPreferences:o}}function Ta(a=10,s="recent_searches"){const[c,t]=Fe(s,[]),o=i.useCallback(h=>{const y=h.trim();y&&t(f=>{const N=f.filter(v=>v!==y);return[y,...N].slice(0,a)})},[t,a]),m=i.useCallback(h=>{t(y=>y.filter(f=>f!==h))},[t]),S=i.useCallback(()=>{t([])},[t]);return{searches:c,addSearch:o,removeSearch:m,clearSearches:S}}const Oa=()=>{const a=Re(),[s,c]=xe("q",{defaultValue:""}),[t,o]=Sa({onlyOncology:!1,onlyPinned:!1,drugType:"",category:"",hasInteractions:!1,hasGenomics:!1,approvalStatus:"",BN:!1,SCD:!1,SBD:!1,IN:!1,MIN:!1});Aa(1,20),Ca("relevance","desc"),ka({defaultPageSize:20,showDescriptions:!0,compactView:!1},"drug_search_preferences"),Ta(10,"drug_search_history");const[m,S]=i.useState(null),[h,y]=i.useState(null),[f,N]=i.useState(!1),[v,A]=i.useState(null),[p,r]=i.useState(0),[u,w]=i.useState(!1),[R,x]=i.useState("advanced"),[P,g]=i.useState(null),[I,O]=i.useState(null),[$,ve]=i.useState([]),[re,V]=i.useState([]),[X,l]=i.useState(!1),[D,_]=i.useState(!1),{showToast:E}=Ze(),[z,d]=i.useState("unknown"),[k,W]=i.useState(!1),[Z,ne]=i.useState(null),[b,C]=i.useState([]),[G,L]=i.useState(!1),[J,H]=i.useState(!1);i.useEffect(()=>{const n=localStorage.getItem("rxnorm_offline_toast_dismissed")==="1";_(n),de()},[]);async function de(){try{W(!0);const n=await fetch("/api/drugs/search?q=aspirin",{method:"GET"});if(!n.ok)d("error");else{const q=(await n.json())?.sources?.rxnorm>0;d(q?"online":"offline")}ne(new Date().toLocaleTimeString())}catch(n){console.error("Connectivity test failed:",n),d("error"),ne(new Date().toLocaleTimeString())}finally{W(!1)}}const me=i.useMemo(()=>new Set(Object.entries(t).filter(([n,j])=>["BN","SCD","SBD","IN","MIN"].includes(n)&&j).map(([n])=>n)),[t]),ie=i.useMemo(()=>Object.entries(se()).map(([n,j])=>({rxcui:n,name:j.name})),[p]),je=async n=>{N(!0),A(null),y(null);try{const j=new URLSearchParams({q:n});t?.drugType&&j.append("type",t.drugType),t?.category&&j.append("category",t.category),t?.hasInteractions&&j.append("hasInteractions","true"),t?.hasGenomics&&j.append("hasGenomics","true"),t?.sortBy&&j.append("sort",t.sortBy);const q=await Ie.searchDrugs(n);let T=q.results;if(t?.sortBy)switch(t.sortBy){case"name":T.sort((Q,Y)=>Q.name.localeCompare(Y.name));break;case"recent":break;case"popular":break;default:break}const M={...q,results:T};S(M);try{ue.logSearch(n,M?.count)}catch{}}catch(j){A(j instanceof Error?j.message:"Failed to search drugs"),S(null)}finally{N(!1)}},Te=async n=>{y(n),a.addDrug(n),N(!0);try{const j=await Ie.getDrugDetails(n.rxcui);y({...n,...j})}catch(j){console.warn("Failed to load drug details:",j)}finally{N(!1)}},$e=()=>{y(null)};return i.useEffect(()=>{const n=j=>{if(j.key==="/"){const q=document.getElementById("drug-search-input");q&&(j.preventDefault(),q.focus())}else j.key==="Escape"?(y(null),S(null)):j.key.toLowerCase()==="r"&&!j.metaKey&&!j.ctrlKey?o({BN:!1,SCD:!1,SBD:!1,IN:!1,MIN:!1,onlyOncology:!1}):j.key.toLowerCase()==="o"&&!j.metaKey&&!j.ctrlKey&&o({onlyOncology:!t.onlyOncology})};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[]),i.useEffect(()=>{let n=!1;if(R!=="basic"||!s||String(s).trim().length<2){C([]),L(!1);return}H(!0);const j=setTimeout(async()=>{try{const q=await fetch(`/api/drugs/search?q=${encodeURIComponent(s)}`);if(!q.ok)throw new Error("suggestions failed");const T=await q.json();if(n)return;C((T.results||[]).slice(0,8).map(M=>({name:M.name,rxcui:M.rxcui}))),L(!T.sources?.rxnorm||T.sources.rxnorm===0)}catch{n||(C([]),L(!1))}finally{n||H(!1)}},300);return()=>{n=!0,clearTimeout(j)}},[R,s]),h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800",children:"Drug Selected Successfully!"}),e.jsxs("p",{className:"text-sm text-green-700",children:["You've selected ",e.jsx("strong",{children:h.name}),". Explore the options below to analyze interactions, genomics, or clinical protocols."]})]})]})}),e.jsxs("button",{onClick:$e,className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Back to Search Results"})]}),f?e.jsx(F,{children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading drug details..."})]})})}):e.jsx(pe,{drug:h,showDetails:!0}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs(F,{padding:"sm",className:"text-center",children:[e.jsx("div",{className:"text-primary-600 mb-2",children:e.jsx(K,{className:"w-6 h-6 mx-auto"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"View Interactions"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Check drug-drug interactions"}),e.jsx("button",{onClick:()=>window.open(`/interactions?drug=${h.rxcui}`,"_blank"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Check Interactions →"})]}),e.jsxs(F,{padding:"sm",className:"text-center",children:[e.jsx("div",{className:"text-purple-600 mb-2",children:e.jsx(U,{className:"w-6 h-6 mx-auto"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Genomic Analysis"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"View pharmacogenomic factors"}),e.jsx("button",{onClick:()=>window.open(`/genomics?drug=${h.rxcui}`,"_blank"),className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"Analyze Genomics →"})]}),e.jsxs(F,{padding:"sm",className:"text-center",children:[e.jsx("div",{className:"text-green-600 mb-2",children:e.jsx(ia,{className:"w-6 h-6 mx-auto"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Clinical Trials"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Find relevant studies"}),e.jsx("button",{onClick:()=>window.open(`/protocols?drug=${h.name}`,"_blank"),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Trials →"})]})]})]}):e.jsxs("div",{className:"space-y-8",children:[X&&!D&&(E("warning","RxNorm offline: using limited suggestions"),l(!1),null),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600/10 via-blue-600/10 to-indigo-600/10 rounded-2xl"}),e.jsxs("div",{className:"relative p-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-violet-600 to-indigo-600 rounded-xl",children:e.jsx(te,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-violet-600 to-indigo-600 bg-clip-text text-transparent",children:"Intelligent Drug Discovery"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"w-6 h-6 text-violet-600"}),e.jsx("span",{className:"px-3 py-1 bg-violet-100 text-violet-800 rounded-full text-sm font-medium",children:"AI-Powered"})]})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto mb-6",children:"Advanced drug search with AI-powered insights, molecular analysis, and personalized recommendations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-violet-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-violet-600 mb-2",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Drug Database"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"50,000+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Medications"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2",children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Interactions"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"2.5M+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Drug Pairs"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2",children:[e.jsx(ze,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Clinical Trials"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"25,000+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Studies"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-purple-600 mb-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Oncology Focus"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"5,000+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cancer Drugs"})]})]}),ie.length>0&&e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("span",{className:"text-lg font-medium text-gray-700",children:[ie.length," Pinned Medication",ie.length!==1?"s":""]})]})]})]}),e.jsx("div",{className:"flex items-center justify-center mt-2",children:e.jsxs("div",{className:"inline-flex items-center gap-3 text-xs text-gray-600 bg-gray-50 border border-gray-200 rounded px-3 py-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${z==="online"?"bg-green-500":z==="offline"?"bg-amber-500":z==="error"?"bg-red-500":"bg-gray-400"}`}),e.jsxs("span",{children:[z==="online"&&"RxNorm connectivity: Online",z==="offline"&&"RxNorm connectivity: Offline (fallback)",z==="error"&&"RxNorm connectivity: Error",z==="unknown"&&"RxNorm connectivity: Unknown",Z?` • Checked ${Z}`:""]})]}),e.jsx("button",{onClick:de,disabled:k,className:"text-blue-700 hover:text-blue-800 underline disabled:opacity-60",children:k?"Testing…":"Test connectivity"})]})}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:e.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{mode:"basic",label:"Basic Search",icon:K},{mode:"advanced",label:"Advanced Filters",icon:fe},{mode:"ai",label:"AI Assistant",icon:ae}].map(({mode:n,label:j,icon:q})=>e.jsxs("button",{onClick:()=>x(n),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${R===n?"bg-white text-violet-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:j})]},n))})}),R==="basic"&&e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(Le,{placeholder:"Search drugs by name, indication, or mechanism...",onSelect:n=>{if(c(n.value),n.type==="drug"){const j={rxcui:n.id,name:n.label,synonym:n.value,tty:"SBD"};Te(j)}else je(n.value)},onInputChange:n=>c(n),value:s,loading:f,maxResults:8,showCategories:!0,className:"w-full",onOfflineChange:n=>{n?D||l(!0):l(!1)}}),e.jsx("div",{className:"flex items-center justify-center mt-4",children:e.jsxs("button",{onClick:()=>je(s),disabled:f||!s||!String(s).trim(),className:"bg-gradient-to-r from-violet-600 to-indigo-600 text-white px-8 py-3 text-lg rounded-lg hover:from-violet-700 hover:to-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{children:"Search Drugs"})]})}),s&&String(s).trim().length>=2&&e.jsxs("div",{className:"mt-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Top matches"}),G&&e.jsx("div",{className:"text-[11px] text-gray-500",children:"Using offline suggestions"})]}),e.jsx("div",{className:"p-3",children:J?e.jsx("div",{className:"text-xs text-gray-500",children:"Analyzing…"}):b.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((n,j)=>e.jsx("button",{onClick:()=>c(n.name),className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 hover:bg-gray-200",title:n.rxcui?`RXCUI ${n.rxcui}`:n.name,children:n.name},`${n.rxcui||n.name}-${j}`))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No matches"})})]})]}),R==="advanced"&&e.jsx(wa,{onOfflineChange:n=>{n?D||l(!0):l(!1)}}),R==="ai"&&e.jsx("div",{className:"space-y-6",children:e.jsx(F,{className:"border-violet-200 bg-gradient-to-r from-violet-50 to-indigo-50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(ae,{className:"h-6 w-6 text-violet-600"}),e.jsx("h2",{className:"text-xl font-bold text-violet-800",children:"AI Drug Discovery Assistant"}),e.jsx("span",{className:"px-2 py-1 bg-violet-100 text-violet-800 rounded-full text-sm font-medium",children:"Beta"})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(Ee,{className:"h-8 w-8 text-violet-600"}),e.jsx("span",{className:"text-2xl font-bold text-violet-800",children:"Ask the AI"})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Describe your patient case, treatment goals, or ask questions about drug therapy"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-blue-50 border border-blue-200 rounded-lg bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2",children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Find Similar Drugs"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:'"Find drugs similar to pembrolizumab for lung cancer"'})]}),e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-green-50 border border-green-200 rounded-lg bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Biomarker Matching"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:'"What drugs target HER2-positive breast cancer?"'})]}),e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-purple-50 border border-purple-200 rounded-lg bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-purple-600 mb-2",children:[e.jsx(ye,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Drug Interactions"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:'"Check interactions between warfarin and chemotherapy"'})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:"ai-input",placeholder:"Describe your patient case or ask a question about drug therapy...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 h-32 resize-none",value:s,onChange:n=>c(n.target.value)}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"AI responses are for educational purposes only"})]}),e.jsxs("button",{onClick:()=>{s&&String(s).trim()&&g({query:s,response:"AI assistant is currently in development. For now, please use the basic or advanced search modes to find specific drugs and their interactions.",suggestions:["Try searching for specific drug names","Use the advanced filters to narrow your search","Check drug interactions in the interaction checker"]})},disabled:!s||!String(s).trim()||f,className:"bg-gradient-to-r from-violet-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-violet-700 hover:to-indigo-700 flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Ask AI Assistant"})]})]})]}),P&&e.jsxs("div",{className:"mt-6 p-4 bg-violet-50 border border-violet-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(ae,{className:"h-5 w-5 text-violet-600"}),e.jsx("span",{className:"font-medium text-violet-800",children:"AI Response"})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:P.response}),P.suggestions&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Suggestions:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:P.suggestions.map((n,j)=>e.jsx("li",{className:"text-sm text-gray-600",children:n},j))})]})]})]})})}),(R==="basic"||R==="advanced")&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-1",children:"Pinned:"}),ie.length===0?e.jsx("span",{className:"text-xs text-gray-400",children:"No pinned drugs yet"}):ie.slice(0,10).map((n,j)=>e.jsxs("div",{className:"inline-flex items-center pl-2 pr-1 py-1 rounded-full text-xs bg-yellow-50 text-yellow-800 border border-yellow-200",title:`Pinned: ${n.name}`,draggable:!0,onDragStart:q=>{q.dataTransfer.setData("text/plain",n.rxcui),q.dataTransfer.effectAllowed="move"},onDragOver:q=>{q.preventDefault(),q.dataTransfer.dropEffect="move"},onDrop:q=>{q.preventDefault();const T=q.dataTransfer.getData("text/plain");if(!T||T===n.rxcui)return;const M=ie.slice(0,10).map(ee=>ee.rxcui),Q=M.indexOf(T),Y=j;Q===-1||Y===-1||(M.splice(Y,0,M.splice(Q,1)[0]),ma(M),r(ee=>ee+1))},children:[e.jsx("button",{onClick:()=>je(n.name),className:"px-0.5 mr-1 hover:underline","aria-label":`Search for ${n.name}`,children:n.name}),e.jsx("button",{onClick:q=>{q.stopPropagation(),ge(n.rxcui,n.name),r(T=>T+1)},className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-yellow-100","aria-label":`Unpin ${n.name}`,title:"Unpin",children:e.jsx(Se,{className:"w-3 h-3"})})]},n.rxcui))]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",className:`text-xs px-2 py-1 rounded-full border ${t.onlyPinned?"bg-yellow-100 text-yellow-800 border-yellow-200":"text-gray-600 bg-gray-50 border-gray-200 hover:text-gray-800"}`,onClick:()=>o({onlyPinned:!t.onlyPinned}),"aria-pressed":t.onlyPinned,"aria-label":`Show only pinned ${t.onlyPinned?"on":"off"}`,title:"Show only pinned in results",children:"Show only pinned"}),e.jsx("button",{type:"button",className:"text-xs text-gray-500 hover:text-gray-700 underline",onClick:()=>{if(!m||!Array.isArray(m.results))return;const n=se(),j=["pembrolizumab","nivolumab","fluorouracil","cisplatin","doxorubicin","paclitaxel","tamoxifen","imatinib"];m.results.filter(T=>{const M=me.size===0||(T.tty?me.has(T.tty):!1),Q=j.some(ee=>(T.name||"").toLowerCase().includes(ee)),Y=!t.onlyOncology||Q;return M&&Y&&n[T.rxcui]}).forEach(T=>{n[T.rxcui]&&ge(T.rxcui,T.name)}),r(T=>T+1)},"aria-label":"Unpin all shown results",title:"Unpin all shown in results",children:"Unpin Shown"}),e.jsx("button",{type:"button",className:"text-xs text-gray-500 hover:text-gray-700 underline",onClick:()=>{da(),r(n=>n+1)},"aria-label":"Clear pinned drugs",children:"Clear Pins"})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-1",children:"Filters:"}),["BN","SCD","SBD","IN","MIN"].map(n=>e.jsx("button",{type:"button",onClick:()=>o({[n]:!t[n]}),className:`px-2 py-1 rounded-full text-xs border ${t[n]?"bg-blue-100 text-blue-700 border-blue-200":"bg-gray-50 text-gray-600 border-gray-200"}`,"aria-pressed":t[n],"aria-label":`Filter ${n} ${t[n]?"on":"off"}`,children:n},n)),e.jsx("button",{type:"button",onClick:()=>o({onlyOncology:!t.onlyOncology}),className:`px-2 py-1 rounded-full text-xs border ${t.onlyOncology?"bg-purple-100 text-purple-700 border-purple-200":"bg-gray-50 text-gray-600 border-gray-200"}`,"aria-pressed":t.onlyOncology,"aria-label":`Oncology filter ${t.onlyOncology?"on":"off"}`,children:"Oncology"}),e.jsx("button",{type:"button",onClick:()=>o({onlyPinned:!t.onlyPinned}),className:`px-2 py-1 rounded-full text-xs border ${t.onlyPinned?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-50 text-gray-600 border-gray-200"}`,"aria-pressed":t.onlyPinned,"aria-label":`Pinned filter ${t.onlyPinned?"on":"off"}`,children:"Pinned only"}),e.jsx("button",{type:"button",onClick:()=>o({BN:!1,SCD:!1,SBD:!1,IN:!1,MIN:!1,onlyOncology:!1}),className:"px-2 py-1 rounded-full text-xs border bg-gray-50 text-gray-600 border-gray-200",children:"Reset"}),e.jsx("button",{type:"button",onClick:()=>{if(!m||!Array.isArray(m.results))return;const n=se(),j=["pembrolizumab","nivolumab","fluorouracil","cisplatin","doxorubicin","paclitaxel","tamoxifen","imatinib"];m.results.filter(T=>{const M=me.size===0||(T.tty?me.has(T.tty):!1),Q=j.some(ee=>(T.name||"").toLowerCase().includes(ee)),Y=!t.onlyOncology||Q;return M&&Y}).forEach(T=>{n[T.rxcui]||ge(T.rxcui,T.name)}),r(T=>T+1)},className:"px-2 py-1 rounded-full text-xs border bg-yellow-50 text-yellow-800 border-yellow-200 hover:bg-yellow-100","aria-label":"Pin all shown results",children:"Pin All Shown"})]}),m&&e.jsxs("div",{className:`grid ${h?"md:grid-cols-2 gap-6":""}`,children:[e.jsx("div",{children:e.jsx(ha,{results:m,loading:f,error:v,onDrugSelect:Te,filters:{onlyOncology:t.onlyOncology,onlyPinned:t.onlyPinned,tty:me},pinVersion:p})}),h&&e.jsx("div",{children:e.jsx(pe,{drug:h,showDetails:!0})})]}),!m&&!f&&e.jsx(F,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Search Features"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center space-x-1",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Search Capabilities"})]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Search by generic or brand name"}),e.jsx("li",{children:"• Partial name matching supported"}),e.jsx("li",{children:"• Case-insensitive search"}),e.jsx("li",{children:"• Search by drug categories"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center space-x-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Quick Access"})]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Organized drug shortcuts by category"}),e.jsx("li",{children:"• Common medications readily available"}),e.jsx("li",{children:"• Oncology drugs for cancer care"}),e.jsx("li",{children:"• Cardiovascular medications"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Tip:"})," Use the quick access buttons above for common medications, or search directly by typing the drug name."]})})]})}),e.jsx(Ne,{type:"info",title:"Data Sources",children:"Drug information is sourced from RxNorm (National Library of Medicine), FDA's DailyMed database, and our curated database of oncology medications. Data is regularly updated to ensure accuracy."})]})},Qa=()=>e.jsx(na,{featureName:"Drug Search",fallbackMessage:"The drug search feature is temporarily unavailable. This may be due to database connectivity or processing issues.",children:e.jsx(Oa,{})});export{Qa as default};
//# sourceMappingURL=DrugSearch-Dc31tXab.js.map
