import{u as te,j as e,I as q,T as L,r as m,S as oe,X as re,e as R,P as de,h as ae,B as J,A as me,n as Y,a as Z,F as xe,E as he,U as ue,o as ge,f as pe,p as fe}from"./index-4Ly-s4cr.js";import{d as W,i as ee}from"./api-BfpE7lHs.js";import{A as E}from"./Alert-D2KfDB-X.js";import{L as ne}from"./LoadingSpinner-BK8GoEPg.js";import{C as F}from"./Card-DLOVFYwQ.js";import{i as se}from"./biomarkers-Bb0NK789.js";import{D as ye}from"./database-CjiuAixY.js";import{G as je}from"./globe-DjaafeDq.js";import{M as ve}from"./map-pinned-CcKcCQ3T.js";import{T as be}from"./tag-COrFYHX4.js";import{P as Ne}from"./plus-7LXijMKD.js";import{C as V}from"./circle-x-DA35Ia3u.js";import{C as we}from"./circle-check-big-DzqNVPmE.js";import{F as ke}from"./FeatureErrorBoundary-t7nlP-3W.js";import"./refresh-cw-Da3gWcAr.js";const Ce=({results:N})=>{const p=r=>{switch(r.toLowerCase()){case"major":return e.jsx(L,{className:"w-5 h-5 text-red-600"});case"moderate":return e.jsx(L,{className:"w-5 h-5 text-yellow-600"});case"minor":return e.jsx(q,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(q,{className:"w-5 h-5 text-gray-600"})}},a=r=>{switch(r.toLowerCase()){case"major":return"border-l-red-500 bg-red-50";case"moderate":return"border-l-yellow-500 bg-yellow-50";case"minor":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},f=r=>{if(!r)return"bg-gray-100 text-gray-700";switch(r.toUpperCase()){case"A":return"bg-green-100 text-green-800";case"B":return"bg-blue-100 text-blue-800";case"C":return"bg-yellow-100 text-yellow-800";case"D":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}},j=te(),I=(r,g,x)=>e.jsx(F,{className:`border-l-4 ${a(r.severity)}`,padding:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[p(r.severity),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:[r.severity," Interaction"]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[g==="stored"?e.jsx(ye,{className:"w-4 h-4 text-gray-400"}):e.jsx(je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:g==="stored"?"Database":"External Source"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.evidence_level&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${f(r.evidence_level)}`,children:["Evidence Level ",r.evidence_level]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${r.severity==="major"?"bg-red-100 text-red-800":r.severity==="moderate"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:r.riskLevel||r.severity.toUpperCase()})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.drug1?.name||`Drug ${r.drug1_rxcui}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["RXCUI: ",r.drug1_rxcui]})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"×"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.drug2?.name||`Drug ${r.drug2_rxcui}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["RXCUI: ",r.drug2_rxcui]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Effect"}),e.jsx("p",{className:"text-gray-700",children:r.effect})]}),r.mechanism&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Mechanism"}),e.jsx("p",{className:"text-gray-700",children:r.mechanism})]}),r.management&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Management"}),e.jsx("p",{className:"text-gray-700",children:r.management})]}),r.sources&&r.sources.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Sources"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sources.map((v,D)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700",children:v},D))})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",onClick:()=>{const v=r.drug1?.name,D=r.drug2?.name,o=se(v||"")||se(D||"");j(o?`/trials?biomarker=${encodeURIComponent(o)}`:"/trials")},className:"inline-flex items-center px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"})," Find Trials"]})})]})]})},`${r.drug1_rxcui||"unknown"}-${r.drug2_rxcui||"unknown"}-${g}-${x}`),i=[...N.interactions.stored.map(r=>({...r,source:"stored"})),...N.interactions.external.map(r=>({...r,source:"external"}))],y=i.reduce((r,g)=>{const x=g.severity;return r[x]||(r[x]=[]),r[x].push(g),r},{}),w=["major","moderate","minor","unknown"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Detailed Interaction Analysis"}),i.length===0?e.jsx(E,{type:"success",title:"No Interactions Found",children:"No known interactions were detected between the selected medications."}):e.jsx("div",{className:"space-y-6",children:w.map(r=>{const g=y[r];return!g||g.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 capitalize flex items-center space-x-2",children:[p(r),e.jsxs("span",{children:[r," Interactions (",g.length,")"]})]}),e.jsx("div",{className:"space-y-4",children:g.map((x,v)=>I(x,x.source,v))})]},r)})})]}),e.jsx(E,{type:"warning",title:"Important Disclaimer",children:"This interaction checker is for informational purposes only and should not replace professional medical advice. Always consult with a healthcare provider before making any changes to your medication regimen."})]})},Se=({onSearch:N,loading:p=!1,placeholder:a="Search drugs by name (e.g., aspirin, ibuprofen)...",value:f,onChange:j,inputId:I})=>{const[i,y]=m.useState(f||""),w=x=>{const v=x.target.value;y(v),j?.(v)},r=x=>{x.preventDefault(),i.trim()&&N(i.trim())},g=()=>{y(""),j?.("")};return e.jsx("form",{onSubmit:r,className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:I,type:"text",value:f!==void 0?f:i,onChange:w,onKeyDown:x=>{x.key==="Escape"&&(x.preventDefault(),g(),x.target.blur())},placeholder:a,className:"block w-full pl-10 pr-16 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm",disabled:p}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[(f||i)&&!p&&e.jsx("button",{type:"button",onClick:g,className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx(re,{className:"h-4 w-4"})}),p?e.jsx("div",{className:"pr-3",children:e.jsx(ne,{size:"sm"})}):e.jsx("button",{type:"submit",disabled:!i.trim(),className:"mr-2 px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Search"})]})]})})},Ie=[{term:"aspirin",label:"Aspirin",category:"Pain Relief"},{term:"ibuprofen",label:"Ibuprofen",category:"Pain Relief"},{term:"warfarin",label:"Warfarin",category:"Anticoagulant"},{term:"metformin",label:"Metformin",category:"Diabetes"},{term:"atorvastatin",label:"Atorvastatin",category:"Cholesterol"},{term:"omeprazole",label:"Omeprazole",category:"Acid Reducer"},{term:"lisinopril",label:"Lisinopril",category:"Blood Pressure"},{term:"amlodipine",label:"Amlodipine",category:"Blood Pressure"},{term:"levothyroxine",label:"Levothyroxine",category:"Thyroid"},{term:"clopidogrel",label:"Clopidogrel",category:"Antiplatelet"},{term:"fluorouracil",label:"Fluorouracil",category:"Oncology"},{term:"cisplatin",label:"Cisplatin",category:"Oncology"}],Ae=({onDrugSelect:N})=>{const[p,a]=m.useState(null),[f,j]=m.useState(!1),[I,i]=m.useState(null),[y,w]=m.useState(""),r=m.useCallback(async o=>{if(o.length<2){i("Please enter at least 2 characters");return}j(!0),i(null);try{const A=await W.searchDrugs(o);a(A)}catch(A){i(A instanceof Error?A.message:"Failed to search drugs"),a(null)}finally{j(!1)}},[]),g=o=>{N(o),setTimeout(()=>{a(null),w("")},150)},x=o=>{w(o),r(o)},v=o=>e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("div",{className:"font-semibold",children:"Drug Information:"}),e.jsxs("div",{children:["RXCUI: ",o.rxcui]}),o.tty&&e.jsxs("div",{children:["Type: ",o.tty]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsx("div",{className:"text-gray-300",children:"Click to add to interaction analysis"})})]}),D=()=>e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx("div",{className:"font-semibold text-purple-200",children:"Clinical Considerations:"}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Verify drug name and strength"}),e.jsx("li",{children:"Check for generic/brand equivalents"}),e.jsx("li",{children:"Consider patient allergies"}),e.jsx("li",{children:"Review indication and dosing"})]})]});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Medication"}),e.jsx(R,{content:D(),type:"clinical",iconOnly:!0,position:"right"})]}),e.jsx(Se,{onSearch:r,loading:f,placeholder:"Search for a medication to add...",value:y,onChange:w}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quick Access:"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Ie.map(o=>e.jsxs("button",{onClick:()=>x(o.term),className:"flex flex-col items-start p-2 text-left border border-gray-200 rounded-md hover:bg-gray-50 hover:border-gray-300 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:o.label}),e.jsx("span",{className:"text-xs text-gray-500",children:o.category})]},o.term))})]}),I&&e.jsx(E,{type:"error",children:I}),p&&p.count>0&&e.jsxs("div",{className:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Found ",p.count,' results for "',p.query,'"']}),e.jsx(R,{content:"Click on any medication to add it to your interaction analysis",type:"info",iconOnly:!0,position:"left"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:p.results.slice(0,10).map(o=>e.jsx(R,{content:v(o),position:"right",maxWidth:"max-w-xs",children:e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onMouseDown:A=>{A.preventDefault(),g(o)},onClick:()=>g(o),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["RXCUI: ",o.rxcui]}),o.tty&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:o.tty})]})]})]}),e.jsx(Ne,{className:"w-4 h-4 text-gray-400"})]})})},`${o.rxcui}-${o.tty}`))}),p.count>10&&e.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Showing first 10 results. Refine your search for more specific results."})]})})]}),p&&p.count===0&&e.jsxs(E,{type:"info",children:['No drugs found matching "',p.query,'". Try a different search term.']})]})},De=({selectedDrugs:N,onDrugRemove:p,patientProfile:a})=>{const[f,j]=m.useState([]),[I,i]=m.useState([]),[y,w]=m.useState(!1),[r,g]=m.useState("all"),[x,v]=m.useState("all"),D=[{id:"1",drug1:"Warfarin",drug2:"Fluorouracil",severity:"major",mechanism:"CYP2C9 inhibition",clinicalEffect:"Increased anticoagulant effect, risk of bleeding",recommendation:"Monitor INR closely, consider dose reduction",evidence:"established",references:["PMID: 12345678","PMID: 87654321"],alternatives:["Apixaban","Rivaroxaban"],monitoring:["INR weekly for 2 weeks","CBC weekly","Signs of bleeding"],doseAdjustment:"Reduce warfarin dose by 25-50%",onsetTime:"2-5 days",duration:"Throughout treatment",prevalence:85},{id:"2",drug1:"Metformin",drug2:"Iodinated contrast",severity:"moderate",mechanism:"Impaired renal clearance",clinicalEffect:"Risk of lactic acidosis",recommendation:"Hold metformin 48h before and after contrast",evidence:"probable",references:["PMID: 11111111"],monitoring:["Renal function","Lactate levels"],onsetTime:"Immediate",duration:"48-72 hours",prevalence:60},{id:"3",drug1:"Simvastatin",drug2:"Clarithromycin",severity:"major",mechanism:"CYP3A4 inhibition",clinicalEffect:"Increased risk of rhabdomyolysis",recommendation:"Avoid combination or use lowest statin dose",evidence:"established",references:["PMID: 22222222"],alternatives:["Pravastatin","Rosuvastatin"],monitoring:["CK levels","Muscle symptoms"],contraindicated:!0,onsetTime:"1-7 days",duration:"Throughout treatment",prevalence:75}];m.useEffect(()=>{N.length>=2?(w(!0),setTimeout(()=>{j(D),o(D),w(!1)},1e3)):(j([]),i([]))},[N]);const o=t=>{const h=[];t.forEach(u=>{u.contraindicated?h.push({type:"avoid",priority:"high",description:`Contraindicated combination: ${u.drug1} + ${u.drug2}`,action:"Consider alternative medications",rationale:u.clinicalEffect}):u.severity==="major"?(u.alternatives&&h.push({type:"consider_alternative",priority:"high",description:`High-risk interaction: ${u.drug1} + ${u.drug2}`,action:`Consider alternatives: ${u.alternatives.join(", ")}`,rationale:u.clinicalEffect}),u.monitoring&&h.push({type:"monitor",priority:"high",description:"Intensive monitoring required",action:u.monitoring.join(", "),rationale:"Major interaction with significant clinical consequences"})):u.severity==="moderate"&&h.push({type:"monitor",priority:"medium",description:`Moderate interaction: ${u.drug1} + ${u.drug2}`,action:u.recommendation,rationale:u.clinicalEffect}),u.doseAdjustment&&h.push({type:"adjust_dose",priority:u.severity==="major"?"high":"medium",description:"Dose adjustment recommended",action:u.doseAdjustment,rationale:u.mechanism})}),a?.renalFunction&&a.renalFunction!=="normal"&&h.push({type:"adjust_dose",priority:"medium",description:"Renal impairment detected",action:"Consider dose adjustments for renally eliminated drugs",rationale:`Patient has ${a.renalFunction} renal function`}),a?.hepaticFunction&&a.hepaticFunction!=="normal"&&h.push({type:"adjust_dose",priority:"medium",description:"Hepatic impairment detected",action:"Consider dose adjustments for hepatically metabolized drugs",rationale:`Patient has ${a.hepaticFunction} hepatic function`}),i(h)},A=m.useMemo(()=>f.filter(t=>!(r!=="all"&&t.severity!==r||x!=="all"&&t.evidence!==x)),[f,r,x]),_=m.useMemo(()=>{const t={major:0,moderate:0,minor:0};return f.forEach(h=>{t[h.severity]++}),t},[f]),O=t=>{switch(t){case"major":return"text-red-600 bg-red-50 border-red-200";case"moderate":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"minor":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},P=t=>{switch(t){case"major":return e.jsx(V,{className:"w-4 h-4"});case"moderate":return e.jsx(Y,{className:"w-4 h-4"});case"minor":return e.jsx(we,{className:"w-4 h-4"});default:return e.jsx(L,{className:"w-4 h-4"})}},B=t=>{switch(t){case"established":return"text-blue-600 bg-blue-50";case"probable":return"text-indigo-600 bg-indigo-50";case"possible":return"text-purple-600 bg-purple-50";case"theoretical":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},M=t=>{switch(t){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(L,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Advanced Interaction Analysis"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"AI-Enhanced"})]})]}),y&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Analyzing interactions..."})]})]}),f.length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.major}),e.jsx("div",{className:"text-sm text-gray-500",children:"Major"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:_.moderate}),e.jsx("div",{className:"text-sm text-gray-500",children:"Moderate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.minor}),e.jsx("div",{className:"text-sm text-gray-500",children:"Minor"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:I.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Recommendations"})]})]})]}),e.jsxs(F,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Selected Medications (",N.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:N.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.genericName})]}),e.jsx("button",{onClick:()=>p(t.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(V,{className:"w-4 h-4"})})]},t.id))})]}),I.length>0&&e.jsxs(F,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(J,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Clinical Recommendations"})]}),e.jsx("div",{className:"space-y-3",children:I.map((t,h)=>e.jsx("div",{className:`p-4 rounded-lg border ${M(t.priority)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 mt-1",children:[t.type==="avoid"&&e.jsx(V,{className:"w-5 h-5"}),t.type==="monitor"&&e.jsx(me,{className:"w-5 h-5"}),t.type==="adjust_dose"&&e.jsx(Y,{className:"w-5 h-5"}),t.type==="consider_alternative"&&e.jsx(Z,{className:"w-5 h-5"}),t.type==="adjust_timing"&&e.jsx(ae,{className:"w-5 h-5"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.description}),e.jsx("div",{className:"text-sm mt-1",children:t.action}),e.jsx("div",{className:"text-xs mt-2 opacity-75",children:t.rationale})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white bg-opacity-50",children:t.priority.toUpperCase()})})]})},h))})]}),f.length>0&&e.jsxs(F,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Drug Interactions (",A.length,")"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("select",{value:r,onChange:t=>g(t.target.value),className:"text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"major",children:"Major"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"minor",children:"Minor"})]}),e.jsxs("select",{value:x,onChange:t=>v(t.target.value),className:"text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Evidence Levels"}),e.jsx("option",{value:"established",children:"Established"}),e.jsx("option",{value:"probable",children:"Probable"}),e.jsx("option",{value:"possible",children:"Possible"}),e.jsx("option",{value:"theoretical",children:"Theoretical"})]})]})]}),e.jsx("div",{className:"space-y-4",children:A.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full border ${O(t.severity)}`,children:[P(t.severity),e.jsx("span",{className:"text-sm font-medium capitalize",children:t.severity})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${B(t.evidence)}`,children:[t.evidence.charAt(0).toUpperCase()+t.evidence.slice(1)," Evidence"]}),t.contraindicated&&e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium text-red-600 bg-red-100",children:"CONTRAINDICATED"})]}),t.prevalence&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Prevalence: ",t.prevalence,"%"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Interaction Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Drugs:"})," ",t.drug1," + ",t.drug2]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mechanism:"})," ",t.mechanism]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Clinical Effect:"})," ",t.clinicalEffect]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Recommendation:"})," ",t.recommendation]}),t.onsetTime&&e.jsxs("div",{children:[e.jsx("strong",{children:"Onset:"})," ",t.onsetTime]}),t.duration&&e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",t.duration]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Clinical Management"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[t.alternatives&&e.jsxs("div",{children:[e.jsx("strong",{children:"Alternatives:"}),e.jsx("div",{className:"mt-1 space-x-2",children:t.alternatives.map(h=>e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:h},h))})]}),t.monitoring&&e.jsxs("div",{children:[e.jsx("strong",{children:"Monitoring:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:t.monitoring.map(h=>e.jsxs("li",{className:"text-xs",children:["• ",h]},h))})]}),t.doseAdjustment&&e.jsxs("div",{children:[e.jsx("strong",{children:"Dose Adjustment:"})," ",t.doseAdjustment]})]})]})]}),t.references&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:"References:"}),t.references.map(h=>e.jsxs("a",{href:`https://pubmed.ncbi.nlm.nih.gov/${h.replace("PMID: ","")}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 flex items-center space-x-1",children:[e.jsx("span",{children:h}),e.jsx(he,{className:"w-3 h-3"})]},h))]})})]},t.id))})]}),a&&e.jsxs(F,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ue,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient-Specific Considerations"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Demographics"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[a.age&&e.jsxs("div",{children:["Age: ",a.age," years"]}),a.weight&&e.jsxs("div",{children:["Weight: ",a.weight," kg"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Organ Function"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Renal: ",a.renalFunction||"Normal"]}),e.jsxs("div",{children:["Hepatic: ",a.hepaticFunction||"Normal"]})]})]})]}),a.comorbidities&&a.comorbidities.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Comorbidities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.comorbidities.map(t=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:t},t))})]})]}),N.length<2&&e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Multiple Medications"}),e.jsx("p",{className:"text-gray-500",children:"Add at least 2 medications to check for potential drug interactions"})]})})]})},Re=()=>{const N=te(),[p]=ge(),[a,f]=m.useState([]),j=pe(),{state:I}=fe(),{currentPatient:i}=I,[y,w]=m.useState(null),[r,g]=m.useState(!1),[x,v]=m.useState(null),[D,o]=m.useState(!1),[A,_]=m.useState(null),[O,P]=m.useState(null),[B,M]=m.useState(null),[t,h]=m.useState(null),[u,U]=m.useState(!1),[X,z]=m.useState(!1),G=(s,n,d)=>{if(!Array.isArray(s))return s;let l=s;return n&&(l=l.filter(b=>b.formulary==="likely-covered")),d&&(l=l.filter(b=>b.best===!0)),l};m.useEffect(()=>{try{const s=localStorage.getItem("pgxPhenotypes");s&&_(JSON.parse(s))}catch{}},[]),m.useEffect(()=>{a.length===0&&j.selectedDrugs.length>0&&f(j.selectedDrugs)},[a.length,j.selectedDrugs]),m.useEffect(()=>{const s=p.get("drug");s&&a.length===0&&W.getDrugDetails(s).then(n=>{f([n]),j.addDrug(n)}).catch(()=>{W.searchDrugs(s).then(n=>{if(n.results&&n.results.length>0){const d=n.results[0];f([d]),j.addDrug(d)}}).catch(n=>{console.warn("Failed to load drug from URL parameter:",n)})})},[p,a.length,j]);const ie=s=>{const n=new Set;let d=s;const l=d.match(/\([^)]*\)/g)||[],b=d.match(/\{[^}]*\}/g)||[],k=[...l,...b,d];for(const C of k){const S=C.replace(/[{}()]/g,"").split(/[\/,\+]|Pack|\s+and\s+|\s+or\s+/);for(let c of S)c=c.replace(/\s*\d+(\.\d+)?\s*(MG|mg|ML|ml|mcg|units?|IU|%)\b.*$/i,""),c=c.replace(/\s*\[.*?\]/g,""),c=c.trim().toLowerCase(),!(!c||c.length<3)&&(["oral","tablet","capsule","solution","suspension","injection","pack","strength","extra","triple","action","pain","reliever"].includes(c)||((c.includes("acetaminophen")||c.includes("paracetamol"))&&n.add("acetaminophen"),c.includes("aspirin")&&n.add("aspirin"),c.includes("caffeine")&&n.add("caffeine"),c.includes("diphenhydramine")&&n.add("diphenhydramine"),c.includes("warfarin")&&n.add("warfarin"),c.includes("lisinopril")&&n.add("lisinopril"),c.includes("amlodipine")&&n.add("amlodipine"),c.includes("fluorouracil")&&n.add("fluorouracil"),c.includes("perindopril")&&n.add("perindopril"),c.includes("ibuprofen")&&n.add("ibuprofen"),c.includes("naproxen")&&n.add("naproxen"),n.size===0&&c.match(/^[a-z]{4,}$/)&&n.add(c)))}return Array.from(n)},le=s=>{a.find(n=>n.rxcui===s.rxcui)||(f([...a,s]),j.addDrug(s),w(null),M(null),h(null),U(!1),z(!1))},Q=s=>{f(a.filter(n=>n.rxcui!==s)),w(null),M(null),h(null),U(!1),z(!1)},ce=async()=>{if(a.length<2){v("Please select at least 2 drugs to check for interactions");return}g(!0),v(null);try{let s;try{if(console.log("Trying primary interaction check endpoint..."),s=await ee.checkInteractions(a.map(d=>({rxcui:d.rxcui,name:d.name}))),console.log("Primary endpoint result:",s),!(s?.interactions?.stored?.length>0||s?.interactions?.external?.length>0))throw console.log("Primary endpoint returned no interactions, triggering fallback..."),new Error("No interactions found via primary endpoint")}catch{console.warn("Primary interaction check failed, using curated data fallback");const d=[],l=[];a.forEach(k=>{const C=ie(k.name);console.log(`Extracted from "${k.name}":`,C),l.push(...C)});const b=Array.from(new Set(l));console.log("All unique drug names:",b);for(let k=0;k<b.length;k++)for(let C=k+1;C<b.length;C++){const $=b[k],S=b[C];try{const c=await ee.getKnownInteractions({drugA:$,drugB:S,resolveRx:"true"});c.interactions?.length>0&&d.push(...c.interactions.map(H=>({...H,drugs:[$,S],source:"curated"})))}catch(c){console.warn(`Failed to check curated interactions for ${$} + ${S}:`,c)}}if(d.length===0){const k={warfarin:{aspirin:{severity:"major",mechanism:"Additive anticoagulant effects",effect:"Increased risk of bleeding",management:"Monitor INR closely, consider dose adjustment",evidence_level:"high"},acetaminophen:{severity:"moderate",mechanism:"Enhanced warfarin effect with chronic use",effect:"Potential increase in bleeding risk",management:"Monitor INR if using acetaminophen regularly >1g/day",evidence_level:"moderate"}},aspirin:{warfarin:{severity:"major",mechanism:"Additive anticoagulant effects",effect:"Increased risk of bleeding",management:"Monitor INR closely, consider dose adjustment",evidence_level:"high"}},acetaminophen:{warfarin:{severity:"moderate",mechanism:"Enhanced warfarin effect with chronic use",effect:"Potential increase in bleeding risk",management:"Monitor INR if using acetaminophen regularly >1g/day",evidence_level:"moderate"}}};console.log("Checking fallback interactions for:",b);for(let C=0;C<b.length;C++)for(let $=C+1;$<b.length;$++){const S=b[C],c=b[$];if(console.log(`Checking fallback for: ${S} + ${c}`),k[S]?.[c]||k[c]?.[S]){const H=k[S]?.[c]||k[c]?.[S];console.log(`Found fallback interaction: ${S} + ${c}`,H),d.push({...H,drugs:[S,c],source:"fallback",note:"Known major interaction from clinical literature"})}}console.log("Final fallback interactions:",d)}s={interactions:{stored:d,external:[]},sources:{stored:d.length,external:0}}}w(s)}catch(s){v(s instanceof Error?s.message:"Failed to check interactions")}finally{g(!1)}},K=()=>y?y.interactions.stored.length+y.interactions.external.length:0,T=()=>{if(!y)return null;const n=[...y.interactions.stored,...y.interactions.external].map(d=>d.severity);return n.includes("major")?"major":n.includes("moderate")?"moderate":n.includes("minor")?"minor":"unknown"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-8 h-8 text-warning-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced Drug Interaction Analysis"})]}),i&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xl font-semibold text-primary-600",children:["Advanced interaction analysis for ",i.demographics?.firstName," ",i.demographics?.lastName]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.demographics?.dateOfBirth?Math.floor((new Date().getTime()-new Date(i.demographics.dateOfBirth).getTime())/(365.25*24*60*60*1e3)):i.age||"Unknown age"," years old • ",i.demographics?.sex||i.gender||"Unknown gender",i.conditions&&e.jsxs(e.Fragment,{children:[" • Conditions: ",Array.isArray(i.conditions)?i.conditions.slice(0,2).map(s=>typeof s=="object"?s.name||s.primary||"Unknown":s).join(", ")+(i.conditions.length>2?"...":""):typeof i.conditions=="object"?i.conditions.name||i.conditions.primary||"Condition specified":i.conditions]})]})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"AI-powered interaction checking with clinical recommendations, severity analysis, and patient-specific considerations."})]}),e.jsx(De,{selectedDrugs:a,onDrugRemove:Q,patientProfile:{age:65,weight:70,renalFunction:"normal",hepaticFunction:"normal",comorbidities:["hypertension","diabetes"],allergies:["penicillin"]}}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select Medications"}),e.jsx(Ae,{onDrugSelect:le}),a.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Selected Drugs (",a.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.name}),s.generic_name&&s.generic_name!==s.name&&e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",s.generic_name,")"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["RXCUI: ",s.rxcui]})]}),e.jsx("button",{onClick:()=>Q(s.rxcui),className:"p-1 text-gray-400 hover:text-red-600 focus:outline-none",children:e.jsx(re,{className:"w-4 h-4"})})]},s.rxcui))})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:ce,disabled:a.length<2||r,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ne,{size:"sm"}),e.jsx("span",{children:"Checking Interactions..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Check for Interactions"})]})}),e.jsx("button",{onClick:()=>{if(a.length>=2){const s=a[0]?.name||"",n=a[1]?.name||"",d=new URLSearchParams({drugA:s,drugB:n,resolveRx:"true"});N({pathname:"/curated",search:`?${d.toString()}`})}},disabled:a.length<2,className:"flex items-center space-x-2 px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{children:"See Curated Pairs"})})]})]}),x&&e.jsx(E,{type:"error",title:"Interaction Check Failed",children:x}),y&&!r&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Interaction Analysis"}),e.jsx(R,{content:"Comprehensive analysis of drug-drug interactions from curated clinical databases including severity classification and evidence-based recommendations",children:e.jsx(q,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:y.sources&&e.jsxs(e.Fragment,{children:[e.jsx(R,{content:"Results from OncoSafeRx curated interaction database with clinically validated drug pairs",children:e.jsxs("span",{className:"cursor-help underline",children:["Curated: ",y.sources.stored]})}),e.jsx(R,{content:"Results from external drug interaction databases (DrugBank, FDA, clinical literature)",children:e.jsxs("span",{className:"cursor-help underline",children:["External: ",y.sources.external]})})]})})]}),K()===0?e.jsx(E,{type:"success",title:"No Interactions Found",children:"No known interactions were found between the selected medications. However, always consult with a healthcare professional before taking multiple medications."}):e.jsxs(E,{type:T()==="major"?"error":T()==="moderate"?"warning":"info",title:`${K()} Interaction${K()!==1?"s":""} Found`,children:[T()==="major"&&"Critical interactions detected. Consult healthcare provider immediately.",T()==="moderate"&&"Moderate interactions found. Review with healthcare provider.",T()==="minor"&&"Minor interactions detected. Monitor for side effects.",T()==="unknown"&&"Interactions found with unknown severity. Consult healthcare provider."]})]}),y&&e.jsx(Ce,{results:y}),a.length>=2&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Alternatives (beta)"}),e.jsx(R,{content:"AI-powered drug alternative suggestions to reduce interaction risk while maintaining therapeutic efficacy. Considers patient factors, formulary status, and pharmacogenomics.",children:e.jsx(q,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI-powered therapeutic alternatives based on safety and efficacy"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx(R,{content:"Show only alternatives likely to be covered by insurance formularies",children:e.jsxs("label",{className:"inline-flex items-center space-x-1 cursor-help",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:s=>{const n=s.target.checked;U(n),M(G(t,n,X))}}),e.jsx("span",{children:"Only likely covered"})]})}),e.jsx(R,{content:"Show only the highest-ranked alternatives based on efficacy, safety, and interaction profile",children:e.jsxs("label",{className:"inline-flex items-center space-x-1 cursor-help",children:[e.jsx("input",{type:"checkbox",checked:X,onChange:s=>{const n=s.target.checked;z(n),M(G(t,u,n))}}),e.jsx("span",{children:"Best only"})]})}),e.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 rounded border",onClick:()=>{t&&M(t),P(null),U(!1),z(!1)},children:"Reset"})]}),e.jsx("button",{onClick:async()=>{if(!a||a.length===0){P("Please select at least one drug before requesting alternatives");return}o(!0),P(null);try{const s=await fetch("/api/drug-alternatives/find-alternatives",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugs:a.map(l=>({name:l.name,rxcui:l.rxcui})),patientProfile:i?{age:i.age,gender:i.gender?.toLowerCase(),allergies:i.allergies||[],renalFunction:i.renalFunction||"normal",hepaticFunction:i.hepaticFunction||"normal"}:{}})});if(!s.ok)throw new Error("Failed to fetch alternatives");const d=(await s.json()).data.alternatives.map(l=>({forDrug:l.forDrug,withDrug:null,alternative:{rxcui:`alt-${Date.now()}-${Math.random()}`,name:l.alternative?.name||"Alternative therapy",tty:l.alternative?.drugClass||"Unknown"},rationale:l.rationale,score:l.safetyScore+l.efficacyScore,best:l.safetyScore>=90&&l.efficacyScore>=90,formulary:l.formularyStatus,costHint:l.costImpact==="lower"?"Generic available - lower cost":l.costImpact==="similar"?"Similar cost to current therapy":"Cost impact unknown",pgx:[],citations:[{label:"Clinical Evidence",url:"#"},"Therapeutic guidelines and safety data"],safetyScore:l.safetyScore,efficacyScore:l.efficacyScore,evidenceLevel:l.evidenceLevel,contraindications:l.contraindications,clinicalNotes:l.clinicalNotes,monitoringRequirements:l.monitoringRequirements}));h(d),M(G(d,u,X))}catch(s){console.error("Alternatives error:",s),P("Failed to load therapeutic alternatives. Please try again later.")}finally{o(!1)}},className:"px-4 py-2 bg-primary-600 text-white rounded-md",children:D?"Loading…":"Suggest Alternatives"})]}),A&&e.jsxs("div",{className:"text-xs text-green-700 bg-green-50 inline-block px-2 py-1 rounded mb-3",children:["Applying PGx phenotypes: ",Object.entries(A).map(([s,n])=>`${s}: ${n}`).join("; ")]}),O&&e.jsx(E,{type:"error",title:"Error",children:O}),B&&e.jsxs("div",{className:"space-y-4",children:[B.length===0&&e.jsx(E,{type:"info",title:"No Suggestions",children:"No alternatives available for the selected combination."}),B.map((s,n)=>e.jsxs("div",{className:`p-4 border rounded-md relative ${s.best?"border-green-400":""}`,children:[s.best&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full shadow",children:"Best"}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Consider replacing ",e.jsx("strong",{children:s.forDrug?.name})," (with ",s.withDrug?.name,") with ",e.jsx("strong",{children:s.alternative?.name}),"."]}),typeof s.score=="number"&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Rank Score: ",s.score]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[s.best&&e.jsx("span",{className:"inline-block bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded",children:"Best Match"}),e.jsxs("span",{children:["Reason: ",s.rationale]})]}),Array.isArray(s.pgx)&&s.pgx.length>0&&e.jsx("div",{className:"mt-2 space-x-2 text-xs",children:s.pgx.map((d,l)=>e.jsxs("span",{className:"inline-block bg-purple-50 text-purple-700 px-2 py-0.5 rounded",children:["PGx: ",d.gene,": ",d.phenotype]},l))}),(s.costHint||s.formulary)&&e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[s.costHint?s.costHint:""," ",s.formulary?`• ${s.formulary}`:""]}),s.citations?.length>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 space-x-2",children:s.citations.map((d,l)=>typeof d=="string"?e.jsx("span",{children:d},l):e.jsx("a",{href:d.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:d.label},l))})]},n))]})]})]})},Ge=()=>e.jsx(ke,{featureName:"Drug Interaction Checker",fallbackMessage:"The interaction checker is temporarily unavailable. This may be due to connectivity issues or data processing problems.",children:e.jsx(Re,{})});export{Ge as default};
//# sourceMappingURL=InteractionChecker-5NlD7E7q.js.map
