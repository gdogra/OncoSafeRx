import{c as E,r as x,a6 as C,j as e,M as T,k as D,T as R,b as $,h as z,d as M,U as q,E as L,R as I,V as H,C as B,a7 as f,X as V,t as X,K as Y}from"./index-Bhw970Mt.js";import{C as d}from"./Card-xxJ0N2iO.js";import{R as A}from"./refresh-cw-CEIIBFss.js";import{D as O}from"./download-BdaDgNV1.js";import{C as P}from"./calendar-Bt6aR5VC.js";import{C as k}from"./check-CF29A6wX.js";import{C as G}from"./copy-Cv9jiAcT.js";import{S as U}from"./settings-1im7aM1L.js";import{E as W}from"./eye-off-D2MejWC8.js";import{E as K}from"./eye-B2OXPKvz.js";import{S as J}from"./save-BZ3jqcIb.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],_=E("github",Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ee=E("key",Z),se=({isOpen:u,onClose:l})=>{const[r,p]=x.useState(null),[o,y]=x.useState(!0);x.useEffect(()=>{u&&g()},[u]);const g=()=>{y(!0);try{const s=C.getFeedbackAnalytics();p(s)}catch(s){console.error("Error loading feedback analytics:",s)}finally{y(!1)}},n=()=>{try{const s=C.exportFeedbackData(),c=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(c),b=document.createElement("a");b.href=i,b.download=`oncosaferx-feedback-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(i)}catch(s){console.error("Error exporting data:",s)}},a=s=>({critical:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",t=s=>({bug:"ðŸ›",feature_request:"ðŸ’¡",improvement:"âš¡",question:"â“",complaint:"ðŸ˜ ",compliment:"ðŸ‘",security_concern:"ðŸ”’",performance_issue:"ðŸš€",usability_issue:"ðŸŽ¯",data_issue:"ðŸ“Š",integration_issue:"ðŸ”—"})[s]||"ðŸ“";if(o)return e.jsx(T,{isOpen:u,onClose:l,title:"Feedback Dashboard",size:"xl",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(A,{className:"w-8 h-8 animate-spin text-primary-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading analytics..."})]})});if(!r)return e.jsx(T,{isOpen:u,onClose:l,title:"Feedback Dashboard",size:"xl",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No feedback data available."})})});const{totalFeedback:h,totalTickets:N,byType:m,byCategory:F,byPriority:S,recentFeedback:v,sprintPlan:j}=r;return e.jsx(T,{isOpen:u,onClose:l,title:"Feedback Dashboard",size:"full",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-gray-100 rounded-md hover:bg-gray-200",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Data"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:h}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Feedback"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Tickets"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.currentSprint.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Current Sprint"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.nextSprint.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Next Sprint"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),"Feedback by Type"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(m).map(([s,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:t(s)}),e.jsx("span",{className:"text-sm font-medium",children:s.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${c/h*100}%`}})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-right",children:c})]})]},s))})]}),e.jsxs(d,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Priority Distribution"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(S).map(([s,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a(s)}`,children:s}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${c/h*100}%`}})}),e.jsx("span",{className:"text-sm font-semibold w-8 text-right",children:c})]})]},s))})]})]}),e.jsxs(d,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Sprint Planning"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-900 mb-3 flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Current Sprint (",j.currentSprint.length," items)"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:j.currentSprint.map((s,c)=>e.jsxs("div",{className:"p-2 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a(s.priority)}`,children:s.priority}),e.jsx("span",{className:"text-xs text-gray-500",children:s.effort})]}),e.jsxs("div",{className:"text-xs font-medium mt-1",children:[t(s.type)," ",s.type]})]},c))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Next Sprint (",j.nextSprint.length," items)"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:j.nextSprint.map((s,c)=>e.jsxs("div",{className:"p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a(s.priority)}`,children:s.priority}),e.jsx("span",{className:"text-xs text-gray-500",children:s.effort})]}),e.jsxs("div",{className:"text-xs font-medium mt-1",children:[t(s.type)," ",s.type]})]},c))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Backlog (",j.backlog.length," items)"]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[j.backlog.slice(0,10).map((s,c)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a(s.priority)}`,children:s.priority}),e.jsx("span",{className:"text-xs text-gray-500",children:s.effort})]}),e.jsxs("div",{className:"text-xs font-medium mt-1",children:[t(s.type)," ",s.type]})]},c)),j.backlog.length>10&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",j.backlog.length-10," more items..."]})]})]})]})]}),e.jsxs(d,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Recent Feedback"]}),e.jsx("div",{className:"space-y-4",children:v.slice(0,5).map((s,c)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:t(s.type)}),e.jsx("span",{className:"font-medium text-gray-900",children:s.title}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a(s.priority)}`,children:s.priority})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s.description.substring(0,150),"..."]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["ðŸ“ ",s.page]}),e.jsxs("span",{children:["ðŸ•’ ",new Date(s.timestamp).toLocaleDateString()]}),e.jsxs("span",{children:["ðŸ·ï¸ ",s.category]}),s.metadata?.githubIssue&&e.jsx("a",{href:s.metadata.githubIssue.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:e.jsxs("span",{children:["ðŸ”— GitHub #",s.metadata.githubIssue.number]})})]})]})})},c))})]})]})})},te=({isOpen:u,onClose:l})=>{const[r,p]=x.useState(0),[o,y]=x.useState(null),g=async(a,t)=>{try{await navigator.clipboard.writeText(a),y(t),setTimeout(()=>y(null),2e3)}catch(h){console.error("Failed to copy:",h)}},n=[{title:"Create or Choose Repository",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"First, you'll need a GitHub repository where the issues will be created. This can be:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Your main OncoSafeRx repository (if you have one)"}),e.jsx("li",{children:"A dedicated feedback/issues repository"}),e.jsx("li",{children:"Any repository where you want to track feedback"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Repository Requirements:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Must have Issues enabled (default for most repositories)"}),e.jsx("li",{children:"â€¢ You must have write access to create issues"}),e.jsx("li",{children:"â€¢ Can be public or private"})]})]})]})},{title:"Create Personal Access Token",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Create a Personal Access Token (PAT) to authenticate with GitHub's API."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"1. Go to GitHub Settings"}),e.jsxs("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:[e.jsx("span",{className:"text-sm",children:"Open"}),e.jsx(L,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("span",{className:"text-sm font-medium",children:'2. Click "Generate new token" â†’ "Generate new token (classic)"'})}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"3. Configure the token:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Note:"}),' "OncoSafeRx Feedback Integration"']}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Expiration:"})," Choose appropriate duration"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Scopes:"}),' Select "repo" (or "public_repo" for public repositories only)']})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("span",{className:"text-sm font-medium",children:'4. Click "Generate token" and copy the token immediately'})})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(R,{className:"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Important:"})," Copy the token immediately after creation. GitHub will only show it once for security reasons."]})]})})]})},{title:"Set Up Repository Labels",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"OncoSafeRx automatically creates labels for better issue organization. You can create these labels in advance:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Priority Labels:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{name:"priority:critical",color:"#d73a49",desc:"Critical issues"},{name:"priority:high",color:"#f66a0a",desc:"High priority"},{name:"priority:medium",color:"#fbca04",desc:"Medium priority"},{name:"priority:low",color:"#28a745",desc:"Low priority"}].map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:a.color}}),e.jsx("span",{className:"text-sm font-mono",children:a.name})]}),e.jsx("button",{onClick:()=>g(a.name,a.name),className:"text-gray-400 hover:text-gray-600",children:o===a.name?e.jsx(k,{className:"w-3 h-3"}):e.jsx(G,{className:"w-3 h-3"})})]},a.name))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Type Labels:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{name:"bug",color:"#d73a49"},{name:"enhancement",color:"#a2eeef"},{name:"question",color:"#d876e3"},{name:"security",color:"#0052cc"}].map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:a.color}}),e.jsx("span",{className:"text-sm font-mono",children:a.name})]}),e.jsx("button",{onClick:()=>g(a.name,a.name),className:"text-gray-400 hover:text-gray-600",children:o===a.name?e.jsx(k,{className:"w-3 h-3"}):e.jsx(G,{className:"w-3 h-3"})})]},a.name))})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Auto-Creation"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Don't worry if you skip this step! GitHub will automatically create labels when OncoSafeRx tries to use them. Creating them in advance just ensures consistent colors and descriptions."})]})]})},{title:"Configure OncoSafeRx",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Now configure the GitHub integration in OncoSafeRx:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"1. Repository Information:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Owner:"})," Your GitHub username or organization name"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Repository:"})," The repository name (not the full URL)"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"2. Authentication:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Paste the Personal Access Token you created"}),e.jsx("li",{children:"â€¢ Leave API URL empty (uses GitHub.com by default)"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"3. Test & Enable:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:'â€¢ Click "Test Connection" to verify setup'}),e.jsx("li",{children:"â€¢ Enable the integration if test succeeds"}),e.jsx("li",{children:"â€¢ Save the configuration"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Example Configuration:"}),e.jsxs("div",{className:"text-sm font-mono text-green-800 space-y-1",children:[e.jsxs("div",{children:["Owner: ",e.jsx("span",{className:"bg-white px-1 rounded",children:"your-username"})]}),e.jsxs("div",{children:["Repository: ",e.jsx("span",{className:"bg-white px-1 rounded",children:"oncosaferx-feedback"})]}),e.jsxs("div",{children:["Token: ",e.jsx("span",{className:"bg-white px-1 rounded",children:"ghp_xxxxxxxxxxxxxxxxxxxxx"})]})]})]})]})},{title:"Test the Integration",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Once configured, test the integration to ensure everything works correctly:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"1. Submit Test Feedback:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Use the feedback button to submit a test report"}),e.jsx("li",{children:"â€¢ Try different feedback types (bug, feature request, etc.)"}),e.jsx("li",{children:"â€¢ Include detailed information for testing"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"2. Verify GitHub Issues:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Check your GitHub repository for new issues"}),e.jsx("li",{children:"â€¢ Verify labels are applied correctly"}),e.jsx("li",{children:"â€¢ Confirm issue content includes all feedback details"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"3. Check Feedback Dashboard:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ View the feedback admin dashboard"}),e.jsx("li",{children:"â€¢ Look for GitHub issue links in recent feedback"}),e.jsx("li",{children:"â€¢ Verify the integration status"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What Gets Created:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ GitHub issue with formatted title and description"}),e.jsx("li",{children:"â€¢ Automatic labels based on feedback type and priority"}),e.jsx("li",{children:"â€¢ Browser and environment information"}),e.jsx("li",{children:"â€¢ Direct link back to the OncoSafeRx page"}),e.jsx("li",{children:"â€¢ Reproduction steps for bug reports"})]})]})]})}];return e.jsx(T,{isOpen:u,onClose:l,title:"GitHub Integration Setup Guide",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-2",children:n.map((a,t)=>e.jsxs(I.Fragment,{children:[e.jsx("button",{onClick:()=>p(t),className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${t===r?"bg-primary-600 text-white":t<r?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:t<r?e.jsx(k,{className:"w-4 h-4"}):t+1}),t<n.length-1&&e.jsx("div",{className:`w-8 h-0.5 ${t<r?"bg-green-500":"bg-gray-200"}`})]},t))}),e.jsxs("div",{className:"min-h-[400px]",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsxs("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:[r===0&&e.jsx(_,{className:"w-5 h-5 text-primary-600"}),r===1&&e.jsx(ee,{className:"w-5 h-5 text-primary-600"}),r===2&&e.jsx(U,{className:"w-5 h-5 text-primary-600"}),r===3&&e.jsx(H,{className:"w-5 h-5 text-primary-600"}),r===4&&e.jsx(k,{className:"w-5 h-5 text-primary-600"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n[r].title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",r+1," of ",n.length]})]})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:n[r].content})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>p(Math.max(0,r-1)),disabled:r===0,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r+1," of ",n.length]}),r<n.length-1?e.jsxs("button",{onClick:()=>p(r+1),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:[e.jsx("span",{children:"Next"}),e.jsx(B,{className:"w-4 h-4"})]}):e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Get Started"})]})]})})},ae=({onConfigChange:u})=>{const[l,r]=x.useState({owner:"",repo:"",token:"",enabled:!1}),[p,o]=x.useState(!1),[y,g]=x.useState(!1),[n,a]=x.useState(null),[t,h]=x.useState(!1),[N,m]=x.useState([]),[F,S]=x.useState(!1);x.useEffect(()=>{const i=f.getConfig();i&&r(i)},[]);const v=(i,b)=>{r(w=>({...w,[i]:b})),a(null),m([])},j=async()=>{g(!0),a(null);const i=f.validateConfig(l);if(!i.valid){m(i.errors),g(!1);return}const b=f.getConfig();f.saveConfig({...l,enabled:!0});try{const w=await f.testConnection();a(w)}catch(w){a({success:!1,message:w instanceof Error?w.message:"Test failed"})}finally{b&&f.saveConfig(b),g(!1)}},s=async()=>{h(!0),m([]);try{const i=f.validateConfig(l);if(!i.valid){m(i.errors),h(!1);return}f.saveConfig(l),u?.(l.enabled),a({success:!0,message:"Configuration saved successfully"})}catch(i){m([i instanceof Error?i.message:"Failed to save configuration"])}finally{h(!1)}},c=()=>{confirm("Are you sure you want to clear the GitHub configuration?")&&(f.clearConfig(),r({owner:"",repo:"",token:"",enabled:!1}),a(null),m([]),u?.(!1))};return e.jsx(d,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"GitHub Issues Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically create GitHub issues from user feedback"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:l.enabled&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),"Enabled"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Enable GitHub Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"When enabled, feedback will automatically create GitHub issues"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.enabled,onChange:i=>v("enabled",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"owner",className:"block text-sm font-medium text-gray-700 mb-1",children:["Repository Owner ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"owner",value:l.owner,onChange:i=>v("owner",i.target.value),placeholder:"username or organization",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"GitHub username or organization name"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"repo",className:"block text-sm font-medium text-gray-700 mb-1",children:["Repository Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"repo",value:l.repo,onChange:i=>v("repo",i.target.value),placeholder:"repository-name",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Repository name (e.g., "my-project")'})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700 mb-1",children:["Personal Access Token ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",id:"token",value:l.token,onChange:i=>v("token",i.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full border border-gray-300 rounded-md px-3 py-2 pr-10 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("button",{type:"button",onClick:()=>o(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:p?e.jsx(W,{className:"w-4 h-4 text-gray-400"}):e.jsx(K,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-1",children:[e.jsxs("p",{children:["Required permissions: ",e.jsx("code",{children:"repo"})," (or ",e.jsx("code",{children:"public_repo"})," for public repositories)"]}),e.jsxs("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=OncoSafeRx%20Feedback%20Integration",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary-600 hover:text-primary-700",children:["Create token on GitHub ",e.jsx(L,{className:"w-3 h-3 ml-1"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"API URL (Optional)"}),e.jsx("input",{type:"url",id:"apiUrl",value:l.apiUrl||"",onChange:i=>v("apiUrl",i.target.value),placeholder:"https://api.github.com (default)",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use GitHub.com. Use for GitHub Enterprise Server."})]})]}),N.length>0&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(R,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Configuration Errors"}),e.jsx("ul",{className:"text-sm text-red-700 mt-1 list-disc list-inside",children:N.map((i,b)=>e.jsx("li",{children:i},b))})]})]})}),n&&e.jsx("div",{className:`p-3 border rounded-lg ${n.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[n.success?e.jsx(k,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(V,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-medium ${n.success?"text-green-800":"text-red-800"}`,children:n.success?"Connection Successful":"Connection Failed"}),e.jsx("p",{className:`text-sm mt-1 ${n.success?"text-green-700":"text-red-700"}`,children:n.message})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Clear Configuration"}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"Setup Guide"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:j,disabled:y||!l.owner||!l.repo||!l.token,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:y?"Testing...":"Test Connection"})]}),e.jsxs("button",{onClick:s,disabled:t,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:t?"Saving...":"Save Configuration"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"How it works"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ User feedback is automatically converted to GitHub issues"}),e.jsx("li",{children:"â€¢ Issues include detailed metadata, labels, and context"}),e.jsx("li",{children:"â€¢ Priority and effort estimation are added as labels"}),e.jsx("li",{children:"â€¢ Bug reports include reproduction steps and browser info"}),e.jsx("li",{children:"â€¢ Issues are automatically labeled for organization"})]})]}),e.jsx(te,{isOpen:F,onClose:()=>S(!1)})]})})},pe=()=>{const[u,l]=x.useState(!1),[r,p]=x.useState(null),[o,y]=x.useState(!0),g=()=>{try{const t=C.exportFeedbackData(),h=new Blob([t],{type:"application/json"}),N=URL.createObjectURL(h),m=document.createElement("a");m.href=N,m.download=`oncosaferx-feedback-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(N)}catch(t){console.error("Error exporting data:",t)}},n=()=>{confirm("Are you sure you want to clear all feedback data? This action cannot be undone.")&&(C.clearFeedbackData(),a(),alert("Feedback data cleared successfully."))},a=async()=>{y(!0);try{const t=await C.getFeedbackAnalytics();p(t)}catch(t){console.error("Error loading analytics:",t),p({totalFeedback:0,totalTickets:0,recentFeedback:[],sprintPlan:{currentSprint:[],nextSprint:[],backlog:[]}})}finally{y(!1)}};return I.useEffect(()=>{a()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(U,{className:"w-6 h-6 mr-2"}),"Feedback Administration"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user feedback, view analytics, and plan sprints based on automated ticket categorization."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Data"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"View Dashboard"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600",children:o?"...":r?.totalFeedback||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Feedback"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:o?"...":r?.totalTickets||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Tickets"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:o?"...":r?.sprintPlan?.currentSprint?.length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Current Sprint"})]}),e.jsxs(d,{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:o?"...":r?.sprintPlan?.nextSprint?.length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Next Sprint"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Automated Classification System"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Classification Features"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Automatic type detection (bug, feature, improvement, etc.)"}),e.jsx("li",{children:"â€¢ Priority assignment based on keywords and context"}),e.jsx("li",{children:"â€¢ Effort estimation for sprint planning"}),e.jsx("li",{children:"â€¢ Category mapping to product areas"}),e.jsx("li",{children:"â€¢ Label generation for better organization"})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"Sprint Integration"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Automatic sprint capacity calculation"}),e.jsx("li",{children:"â€¢ Priority-based ticket sorting"}),e.jsx("li",{children:"â€¢ Effort point distribution (XS: 1pt â†’ XXL: 21pts)"}),e.jsx("li",{children:"â€¢ Backlog management with overflow handling"})]})]})]})]}),e.jsxs(d,{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Feedback Activity"}),e.jsxs("div",{className:"space-y-3",children:[!o&&r?.recentFeedback?.slice(0,5).map((t,h)=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:t.title}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.priority==="critical"?"bg-red-100 text-red-800":t.priority==="high"?"bg-orange-100 text-orange-800":t.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.type," â€¢ ",t.category," â€¢ ",new Date(t.timestamp).toLocaleDateString()]})]},h)),o&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:e.jsx("div",{className:"animate-pulse",children:"Loading recent feedback..."})}),!o&&(!r?.recentFeedback||r.recentFeedback.length===0)&&e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No feedback submitted yet"})]})]})]})]}),e.jsx(ae,{onConfigChange:a}),e.jsxs(d,{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-yellow-900 mb-2",children:"âš ï¸ Important Notes"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Feedback data is currently stored locally in browser localStorage"}),e.jsx("li",{children:"â€¢ In production, this should be connected to a backend API"}),e.jsx("li",{children:"â€¢ Data may be lost if browser storage is cleared"}),e.jsx("li",{children:"â€¢ Export data regularly for backup purposes"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Export All Data"}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200",disabled:o,children:o?"Refreshing...":"Refresh Analytics"}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Clear All Data"})]})]})]}),e.jsxs(d,{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Sprint Planning Workflow"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-green-900",children:"1. Collection"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Users submit feedback through the floating feedback button throughout the application."}),e.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded",children:[e.jsx("strong",{children:"Automated:"})," Type detection, priority assignment, effort estimation"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"2. Classification"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"ML-style classification assigns tickets to appropriate categories and estimates work required."}),e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded",children:[e.jsx("strong",{children:"Output:"})," Categorized tickets with priority, effort, and labels"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-purple-900",children:"3. Sprint Planning"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Automated sprint capacity calculation distributes tickets across current and future sprints."}),e.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded",children:[e.jsx("strong",{children:"Result:"})," Ready-to-implement sprint backlog"]})]})]})]})]}),e.jsx(se,{isOpen:u,onClose:()=>l(!1)})]})};export{pe as default};
//# sourceMappingURL=FeedbackAdmin-CDprGp8m.js.map
