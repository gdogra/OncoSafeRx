import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport NetworkStatus from '../UI/NetworkStatus';\n\ninterface MobileHeaderProps {\n  onMenuClick: () => void;\n  onSearchClick: () => void;\n  user: any;\n  alerts: any[];\n}\n\nconst MobileHeader: React.FC<MobileHeaderProps> = ({\n  onMenuClick,\n  onSearchClick,\n  user,\n  alerts\n}) => {\n  const { logout } = useAuth();\n  const { isPortrait } = useResponsive();\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n\n  // Update time every minute\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 60000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  // Monitor network status\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  const criticalAlerts = alerts.filter(alert => alert.type === 'CRITICAL_INTERACTION');\n  const totalAlerts = alerts.length;\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  };\n\n  const getRoleDisplayName = (role: string) => {\n    const roleMap: { [key: string]: string } = {\n      'oncologist': 'ğŸ‘¨â€âš•ï¸ Oncologist',\n      'pharmacist': 'ğŸ’Š Pharmacist',\n      'nurse': 'ğŸ‘©â€âš•ï¸ Nurse',\n      'patient': 'ğŸ¥ Patient',\n      'researcher': 'ğŸ”¬ Researcher',\n      'admin': 'âš™ï¸ Admin'\n    };\n    return roleMap[role] || 'ğŸ‘¤ User';\n  };\n\n  return (\n    <>\n      <header className=\"mobile-header fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm\">\n        {/* Main header bar */}\n        <div className=\"flex items-center justify-between h-14 px-4\">\n          {/* Left side - Menu button */}\n          <button\n            onClick={onMenuClick}\n            className=\"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors\"\n            aria-label=\"Open menu\"\n          >\n            <svg className=\"w-6 h-6 text-gray-700\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n            </svg>\n          </button>\n\n          {/* Center - App title and status */}\n          <div className=\"flex-1 flex flex-col items-center mx-4\">\n            <div className=\"flex items-center space-x-2\">\n              <h1 className=\"text-lg font-semibold text-gray-900\">OncoSafeRx</h1>\n              {!isOnline && (\n                <span className=\"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full\">\n                  Offline\n                </span>\n              )}\n            </div>\n            {isPortrait && (\n              <div className=\"text-xs text-gray-500\">\n                {formatTime(currentTime)}\n              </div>\n            )}\n          </div>\n\n          {/* Right side - Search, alerts, and user menu */}\n          <div className=\"flex items-center space-x-2\">\n            {/* Search button */}\n            <button\n              onClick={onSearchClick}\n              className=\"p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors\"\n              aria-label=\"Search\"\n            >\n              <svg className=\"w-5 h-5 text-gray-700\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n            </button>\n\n            {/* Alert indicator */}\n            {totalAlerts > 0 && (\n              <button \n                className=\"relative p-2 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors\"\n                aria-label={`${totalAlerts} alerts`}\n              >\n                <svg className=\"w-5 h-5 text-gray-700\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-5 5-5-5h5V3h0a7 7 0 017 7v7z\" />\n                </svg>\n                <span className={`absolute -top-1 -right-1 w-5 h-5 text-xs rounded-full flex items-center justify-center text-white ${\n                  criticalAlerts.length > 0 ? 'bg-red-500 animate-pulse' : 'bg-orange-500'\n                }`}>\n                  {totalAlerts > 9 ? '9+' : totalAlerts}\n                </span>\n              </button>\n            )}\n\n            {/* User avatar and menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowUserMenu(!showUserMenu)}\n                className=\"p-1 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors\"\n                aria-label=\"User menu\"\n              >\n                <div className=\"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center\">\n                  <span className=\"text-white text-sm font-medium\">\n                    {user?.first_name?.[0]?.toUpperCase() || user?.email?.[0]?.toUpperCase() || '?'}\n                  </span>\n                </div>\n              </button>\n\n              {/* User dropdown menu */}\n              {showUserMenu && (\n                <>\n                  {/* Backdrop */}\n                  <div \n                    className=\"fixed inset-0 z-40\" \n                    onClick={() => setShowUserMenu(false)}\n                  />\n                  \n                  {/* Menu */}\n                  <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                    <div className=\"p-4 border-b border-gray-100\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {user?.first_name} {user?.last_name}\n                      </div>\n                      <div className=\"text-xs text-gray-500 mt-1\">\n                        {user?.email}\n                      </div>\n                      <div className=\"text-xs text-blue-600 mt-1\">\n                        {getRoleDisplayName(user?.role)}\n                      </div>\n                    </div>\n                    \n                    <div className=\"py-2\">\n                      <button \n                        className=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 active:bg-gray-100\"\n                        onClick={() => {\n                          setShowUserMenu(false);\n                          // Navigate to profile\n                        }}\n                      >\n                        ğŸ‘¤ View Profile\n                      </button>\n                      \n                      <button \n                        className=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 active:bg-gray-100\"\n                        onClick={() => {\n                          setShowUserMenu(false);\n                          // Navigate to settings\n                        }}\n                      >\n                        âš™ï¸ Settings\n                      </button>\n                      \n                      <button \n                        className=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 active:bg-gray-100\"\n                        onClick={() => {\n                          setShowUserMenu(false);\n                          // Show help\n                        }}\n                      >\n                        â“ Help & Support\n                      </button>\n                      \n                      <hr className=\"my-2\" />\n                      \n                      <button \n                        className=\"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 active:bg-red-100\"\n                        onClick={() => {\n                          setShowUserMenu(false);\n                          logout();\n                        }}\n                      >\n                        ğŸšª Sign Out\n                      </button>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Network status bar */}\n        <NetworkStatus />\n\n        {/* Critical alert banner */}\n        {criticalAlerts.length > 0 && (\n          <div className=\"bg-red-500 text-white px-4 py-2 text-sm font-medium flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"animate-pulse\">ğŸš¨</span>\n              <span>Critical drug interaction detected!</span>\n            </div>\n            <button className=\"text-red-200 hover:text-white\">\n              <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n              </svg>\n            </button>\n          </div>\n        )}\n      </header>\n\n      {/* Safe area spacer */}\n      <div className=\"h-14\" style={{ paddingTop: 'env(safe-area-inset-top)' }} />\n    </>\n  );\n};\n\nexport default MobileHeader;"