import{r as n,j as e}from"./index-8LC8IQKY.js";import{a as O}from"./App-oj_FpO4B.js";import{C as i}from"./Card-D3HCI77k.js";import{A as V}from"./Alert-BZt2G7Co.js";import{T as G}from"./Tooltip-CCp_Mki3.js";import{S as p}from"./shield-BY4b8Nc2.js";import{B as X}from"./bell-8nCoQylQ.js";import{R as q}from"./refresh-cw-COcu3qHG.js";import{c as S}from"./createLucideIcon-DlukwGQd.js";import{E as U}from"./eye-DBjH61aH.js";import{E as J}from"./eye-off-wZTBMD5g.js";import{A as d}from"./activity-BXSagPiR.js";import{W}from"./wifi-DQtWYm1-.js";import{F as Z}from"./funnel-BoLak_RK.js";import{C as Y}from"./circle-check-big-CYsdojUB.js";import{D as A}from"./database-B2dB_f4w.js";import{T as N}from"./trending-up-B8-67GCO.js";import{C as K}from"./clock-cnhIl4So.js";import{T as _}from"./triangle-alert-BOEc2-VO.js";import{H as ee}from"./heart-i3E_mUuI.js";import{Z as te}from"./zap-BTYUmM9b.js";import"./info-BEmptaGI.js";import"./circle-alert-DFeyOpEy.js";import"./circle-x-ejKZ_s4C.js";import"./circle-question-mark-UIDQGT3E.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ae=S("volume-2",se);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ne=S("volume-x",re),Me=()=>{const{state:k,actions:ie}=O(),{currentPatient:r}=k,[m,v]=n.useState([]),[C,D]=n.useState([]),[l,w]=n.useState({connection_status:"connected",last_sync:new Date().toISOString(),alerts_processed:0,database_version:"v2024.3",monitoring_active:!0}),[x,I]=n.useState("all"),[g,R]=n.useState(!0),[u,M]=n.useState(!1),[h,L]=n.useState(!0),f=n.useRef(null),y=n.useRef(null);n.useEffect(()=>{if(h&&r)return y.current=setInterval(()=>{T(),F(),P()},5e3),()=>{y.current&&clearInterval(y.current)}},[h,r]);const T=()=>{if(!r)return;const t=[],s=new Date().toISOString();r.medications?.length>1&&Math.random()<.15&&t.push({id:`alert-${Date.now()}-1`,type:"critical",category:"interaction",title:"CRITICAL: QTc Prolongation Risk",message:"High-risk drug combination detected in real-time monitoring",details:"Combination of ondansetron + azithromycin may cause dangerous heart rhythm abnormalities (Torsades de Pointes). Immediate intervention required.",source:"FDA AERS Database + Real-time Monitoring",timestamp:s,patient_id:r.id,drugs_involved:["Ondansetron","Azithromycin"],recommended_action:"STOP azithromycin immediately. Consider alternative antibiotic. Order stat ECG.",acknowledged:!1,auto_generated:!0,real_time:!0,persistent:!0}),Math.random()<.1&&t.push({id:`alert-${Date.now()}-2`,type:"major",category:"lab_value",title:"Abnormal Lab Value Detected",message:"Creatinine elevation detected in latest lab results",details:"Serum creatinine increased to 2.3 mg/dL (was 1.1 mg/dL last week). May indicate drug-induced nephrotoxicity.",source:"Lab Interface + Clinical Decision Support",timestamp:s,patient_id:r.id,lab_values:["Creatinine: 2.3 mg/dL"],recommended_action:"Hold nephrotoxic medications. Increase hydration. Recheck labs in 24-48 hours.",acknowledged:!1,auto_generated:!0,real_time:!0,persistent:!1}),r.genetics?.some(a=>a.metabolizerStatus==="poor")&&Math.random()<.05&&t.push({id:`alert-${Date.now()}-3`,type:"moderate",category:"genomic",title:"Pharmacogenomic Interaction",message:"CYP2D6 poor metabolizer status affects current medication",details:"Patient is CYP2D6 poor metabolizer. Current tamoxifen dose may be insufficient for therapeutic effect.",source:"Pharmacogenomic Database",timestamp:s,patient_id:r.id,drugs_involved:["Tamoxifen"],recommended_action:"Consider increasing dose by 50% or switching to aromatase inhibitor.",acknowledged:!1,auto_generated:!0,real_time:!1,persistent:!0}),t.length>0&&(v(a=>[...t,...a]),w(a=>({...a,alerts_processed:a.alerts_processed+t.length})),g&&t.some(a=>a.type==="critical")&&$())},F=()=>{const t=[{parameter:"Heart Rate",current_value:72+Math.floor(Math.random()*20)-10,normal_range:"60-100 bpm",alert_threshold:120,status:"normal",trend:"stable",last_checked:new Date().toISOString()},{parameter:"QTc Interval",current_value:420+Math.floor(Math.random()*40)-20,normal_range:"350-450 ms",alert_threshold:500,status:"normal",trend:"stable",last_checked:new Date().toISOString()},{parameter:"Creatinine",current_value:1+Math.random()*.4,normal_range:"0.7-1.3 mg/dL",alert_threshold:2,status:"normal",trend:"stable",last_checked:new Date().toISOString()}];t.forEach(s=>{s.current_value>s.alert_threshold?s.status="critical":s.current_value>s.alert_threshold*.8&&(s.status="warning");const c=Math.random();c<.1?s.trend="worsening":c<.2&&(s.trend="improving")}),D(t)},P=()=>{w(t=>({...t,last_sync:new Date().toISOString(),connection_status:Math.random()<.95?"connected":"connecting"}))},$=()=>{f.current&&f.current.play().catch(console.error)},j=(t,s)=>{v(c=>c.map(a=>a.id===t?{...a,acknowledged:!0,acknowledged_by:"current-user",acknowledged_at:new Date().toISOString(),override_reason:s}:a))},B=t=>{switch(t){case"critical":return"bg-red-50 border-red-200 text-red-800";case"major":return"bg-orange-50 border-orange-200 text-orange-800";case"moderate":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"minor":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},E=t=>{switch(t){case"critical":return e.jsx(_,{className:"w-5 h-5 text-red-600"});case"major":return e.jsx(p,{className:"w-5 h-5 text-orange-600"});case"moderate":return e.jsx(K,{className:"w-5 h-5 text-yellow-600"});case"minor":return e.jsx(d,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(d,{className:"w-5 h-5 text-gray-600"})}},Q=t=>{switch(t){case"interaction":return e.jsx(te,{className:"w-4 h-4"});case"contraindication":return e.jsx(p,{className:"w-4 h-4"});case"dosing":return e.jsx(d,{className:"w-4 h-4"});case"monitoring":return e.jsx(ee,{className:"w-4 h-4"});case"allergy":return e.jsx(_,{className:"w-4 h-4"});case"genomic":return e.jsx(A,{className:"w-4 h-4"});case"lab_value":return e.jsx(N,{className:"w-4 h-4"});default:return e.jsx(d,{className:"w-4 h-4"})}},z=t=>{switch(t){case"critical":return"text-red-600";case"warning":return"text-yellow-600";case"normal":return"text-green-600";default:return"text-gray-600"}},H=t=>{switch(t){case"improving":return e.jsx(N,{className:"w-4 h-4 text-green-600"});case"worsening":return e.jsx(N,{className:"w-4 h-4 text-red-600 transform rotate-180"});default:return e.jsx(d,{className:"w-4 h-4 text-gray-600"})}},b=m.filter(t=>!u&&t.acknowledged?!1:x==="all"?!0:t.category===x),o=m.filter(t=>t.type==="critical"&&!t.acknowledged);return r?e.jsxs("div",{className:"space-y-6",children:[e.jsx(i,{className:"bg-gradient-to-r from-red-50 to-orange-50 border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Drug Safety Alert System"}),e.jsxs("p",{className:"text-gray-600",children:["Real-time monitoring for ",r.demographics.firstName," ",r.demographics.lastName]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l.connection_status==="connected"?"bg-green-500":l.connection_status==="connecting"?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:l.connection_status==="connected"?"Connected":l.connection_status==="connecting"?"Connecting...":"Disconnected"})]}),o.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-100 border border-red-300 rounded-lg animate-pulse",children:[e.jsx(X,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-bold text-red-800",children:[o.length," Critical"]})]})]})]})}),o.length>0&&e.jsx(V,{type:"error",title:`${o.length} Critical Alert${o.length>1?"s":""} Require Immediate Attention`,children:e.jsx("div",{className:"space-y-2",children:o.slice(0,2).map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:t.title}),e.jsx("button",{onClick:()=>j(t.id),className:"px-3 py-1 bg-white bg-opacity-20 rounded hover:bg-opacity-30 text-sm",children:"Acknowledge"})]},t.id))})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Auto-refresh:"}),e.jsx("button",{onClick:()=>L(!h),className:`relative w-12 h-6 rounded-full transition-colors ${h?"bg-green-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform ${h?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g?e.jsx(ae,{className:"w-4 h-4 text-gray-400"}):e.jsx(ne,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Sound alerts:"}),e.jsx("button",{onClick:()=>R(!g),className:`relative w-12 h-6 rounded-full transition-colors ${g?"bg-blue-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform ${g?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[u?e.jsx(U,{className:"w-4 h-4 text-gray-400"}):e.jsx(J,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Show resolved:"}),e.jsx("button",{onClick:()=>M(!u),className:`relative w-12 h-6 rounded-full transition-colors ${u?"bg-purple-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform ${u?"translate-x-6":"translate-x-0.5"}`})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last sync: ",new Date(l.last_sync).toLocaleTimeString()]})]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(d,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Real-time Monitoring"}),e.jsx(G,{content:"Continuous monitoring of key safety parameters",children:e.jsx(W,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:C.map((t,s)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.parameter}),H(t.trend)]}),e.jsxs("div",{className:`text-2xl font-bold ${z(t.status)}`,children:[typeof t.current_value=="number"?t.current_value.toFixed(t.parameter==="Creatinine"?1:0):t.current_value,t.parameter==="Heart Rate"&&" bpm",t.parameter==="QTc Interval"&&" ms",t.parameter==="Creatinine"&&" mg/dL"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Normal: ",t.normal_range]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Updated: ",new Date(t.last_checked).toLocaleTimeString()]})]},s))})]}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Z,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:x,onChange:t=>I(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"interaction",children:"Drug Interactions"}),e.jsx("option",{value:"contraindication",children:"Contraindications"}),e.jsx("option",{value:"dosing",children:"Dosing Alerts"}),e.jsx("option",{value:"monitoring",children:"Monitoring"}),e.jsx("option",{value:"allergy",children:"Allergies"}),e.jsx("option",{value:"genomic",children:"Genomic"}),e.jsx("option",{value:"lab_value",children:"Lab Values"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[b.length," alerts"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[l.alerts_processed," processed today"]})]})]})}),e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsx(i,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-4 text-green-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Active Safety Alerts"}),e.jsx("p",{className:"text-gray-400",children:x==="all"?"All safety parameters are within normal limits":`No ${x.replace("_"," ")} alerts at this time`})]})}):b.map(t=>e.jsx(i,{className:`border-l-4 ${t.acknowledged?"opacity-60":t.type==="critical"?"border-red-500 bg-red-50":t.type==="major"?"border-orange-500 bg-orange-50":t.type==="moderate"?"border-yellow-500 bg-yellow-50":"border-blue-500 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[E(t.type),e.jsxs("div",{className:"flex items-center space-x-2",children:[Q(t.category),e.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:t.category.replace("_"," ")})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium uppercase ${B(t.type)}`,children:t.type}),t.real_time&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Real-time"}),t.acknowledged&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:"✓ Acknowledged"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-700 mb-3",children:t.message}),e.jsxs("div",{className:"bg-white bg-opacity-50 p-3 rounded-lg mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 mb-1",children:"Details:"}),e.jsx("p",{className:"text-sm text-gray-700",children:t.details})]}),t.drugs_involved&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Drugs Involved:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.drugs_involved.map((s,c)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:s},c))})]}),e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Recommended Action:"}),e.jsx("p",{className:"text-sm text-yellow-700",children:t.recommended_action})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Source: ",t.source]}),e.jsx("span",{children:new Date(t.timestamp).toLocaleString()})]}),t.acknowledged&&t.acknowledged_by&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Acknowledged by ",t.acknowledged_by," at ",new Date(t.acknowledged_at).toLocaleString(),t.override_reason&&` - Reason: ${t.override_reason}`]})]}),!t.acknowledged&&e.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>j(t.id),className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:"Acknowledge"}),t.type==="critical"&&e.jsx("button",{onClick:()=>{const s=prompt("Override reason (required for critical alerts):");s&&j(t.id,s)},className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700",children:"Override"})]})]})},t.id))}),e.jsxs(i,{className:"bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.filter(t=>t.type==="critical").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Critical Alerts"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.filter(t=>t.type==="major").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Major Alerts"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(t=>t.acknowledged).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Resolved"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.database_version}),e.jsx("div",{className:"text-sm text-gray-600",children:"Database Version"})]})]})]}),e.jsx("audio",{ref:f,preload:"auto",children:e.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmMcBzyW4PLNeSsFJXfH8N2QQAoUXrTp66hVFApGn+DyvmMcBzyW4PLNeSsFJXfH8N2QQAoUXrTp66hVFApGn+DyvmMcBzyW4PLNeSsFJXfH8N2QQAoUXrTp66hVFApGn+DyvmMcBzyW4PLNeSsF",type:"audio/wav"})})]}):e.jsx(i,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"Drug Safety Alert System"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Select a patient to activate real-time drug safety monitoring and alerts"})]})})};export{Me as default};
