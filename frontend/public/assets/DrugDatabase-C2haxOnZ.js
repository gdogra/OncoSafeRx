import{r as f,j as e,X as M,S as _,h as H,P as ee,E as V,V as se,A as $,a as z,b as W,U as Y,Z as J,H as te,k as ae,l as ie,i as B,I as ne,T as G,d as Q,W as q}from"./index-4Ly-s4cr.js";import{F as K}from"./funnel-Di7XuIws.js";import{H as Z}from"./history-C_Hr60kb.js";import{S as T}from"./star-2cVrOGT9.js";import{B as re}from"./bookmark-BoSGn08p.js";import{C as P}from"./circle-check-big-DzqNVPmE.js";import{C as ce}from"./circle-x-DA35Ia3u.js";import{P as le}from"./plus-7LXijMKD.js";import{a as oe}from"./env-HZVIiKqO.js";import{D as de}from"./database-CjiuAixY.js";import{G as me,L as xe}from"./list-rHB2U6Hb.js";import{E as he}from"./eye-BNehSfOP.js";const F={SEARCH_HISTORY:"oncosaferx_search_history",FAVORITES:"oncosaferx_favorites",RECENT_SEARCHES:"oncosaferx_recent_searches"},X=()=>{const[t,o]=f.useState({query:"",filters:{category:"",subcategory:"",mechanism:"",indication:"",routeOfAdministration:"",isOncology:void 0,hasGenomicData:void 0,isOrphan:void 0,fdaApproved:void 0,clinicalTrialPhase:""},results:[],isLoading:!1,history:[],favorites:[],suggestions:[],recentSearches:[]});f.useEffect(()=>{try{const c=localStorage.getItem(F.SEARCH_HISTORY),l=localStorage.getItem(F.FAVORITES),g=localStorage.getItem(F.RECENT_SEARCHES);o(p=>({...p,history:c?JSON.parse(c):[],favorites:l?JSON.parse(l):[],recentSearches:g?JSON.parse(g):[]}))}catch(c){console.error("Error loading search data from localStorage:",c)}},[]),f.useEffect(()=>{try{localStorage.setItem(F.SEARCH_HISTORY,JSON.stringify(t.history)),localStorage.setItem(F.FAVORITES,JSON.stringify(t.favorites)),localStorage.setItem(F.RECENT_SEARCHES,JSON.stringify(t.recentSearches))}catch(c){console.error("Error saving search data to localStorage:",c)}},[t.history,t.favorites,t.recentSearches]);const b=c=>{o(l=>({...l,query:c})),C(c)},x=c=>{o(l=>({...l,filters:{...l.filters,...c}}))},u=()=>{o(c=>({...c,filters:{category:"",subcategory:"",mechanism:"",indication:"",routeOfAdministration:"",isOncology:void 0,hasGenomicData:void 0,isOrphan:void 0,fdaApproved:void 0,clinicalTrialPhase:""}}))},C=c=>{if(c.length<2){o(p=>({...p,suggestions:[]}));return}const g=["carboplatin","cisplatin","paclitaxel","docetaxel","doxorubicin","cyclophosphamide","bevacizumab","trastuzumab","pembrolizumab","nivolumab","rituximab","cetuximab","imatinib","erlotinib","gefitinib","sorafenib","sunitinib","regorafenib","lenvatinib","breast cancer","lung cancer","colorectal cancer","melanoma","lymphoma","leukemia","ovarian cancer","prostate cancer","EGFR inhibitor","PD-1 inhibitor","VEGF inhibitor","HER2 targeted","tyrosine kinase inhibitor","monoclonal antibody","checkpoint inhibitor"].filter(p=>p.toLowerCase().includes(c.toLowerCase())).slice(0,8);o(p=>({...p,suggestions:g}))},k=async()=>{o(c=>({...c,isLoading:!0}));try{const c="https://oncosaferx-backend.onrender.com/api";let l=[];if(t.query.trim()){const p=await fetch(`${c}/drugs/enhanced/search?q=${encodeURIComponent(t.query)}`);if(p.ok)l=(await p.json()).results.map(s=>({id:s.drug.rxcui,rxcui:s.drug.rxcui,name:s.drug.name,genericName:s.drug.generic_name||s.drug.name,brandNames:s.drug.brand_names||[],category:s.drug.category||s.therapeuticClass||"Unknown",mechanism:s.drug.mechanism||s.mechanismOfAction||"",indications:s.drug.indications||[],contraindications:s.drug.contraindications||[],sideEffects:s.drug.sideEffects||s.drug.adverse_reactions||[],interactions:s.interactions||[],dosing:s.drug.dosing||{},monitoring:s.drug.monitoring||[],fdaApproved:s.drug.fdaApproved!==!1,oncologyDrug:s.drug.oncologyDrug===!0,clinicalData:s}));else{const v=await fetch(`${c}/drugs/search?q=${encodeURIComponent(t.query)}`);v.ok&&(l=(await v.json()).results.map(n=>({id:n.rxcui,rxcui:n.rxcui,name:n.name,genericName:n.generic_name||n.name,brandNames:n.brand_names||[],category:n.therapeutic_class||"Unknown",mechanism:"",indications:[],contraindications:[],sideEffects:[],interactions:[],dosing:{},monitoring:[],fdaApproved:!0,oncologyDrug:!1})))}}l=pe(l,t.filters);const g={id:`search_${Date.now()}`,query:t.query,filters:{...t.filters},timestamp:new Date,resultCount:l.length};if(t.query.trim()){const p=[t.query,...t.recentSearches.filter(v=>v!==t.query)].slice(0,10);o(v=>({...v,results:l,isLoading:!1,history:[g,...v.history].slice(0,50),recentSearches:p}))}else o(p=>({...p,results:l,isLoading:!1}))}catch(c){console.error("Search error:",c),o(l=>({...l,isLoading:!1,results:[]}))}},D=c=>{const l={...c,id:`fav_${Date.now()}`,timestamp:new Date};o(g=>({...g,favorites:[l,...g.favorites]}))},A=c=>{o(l=>({...l,favorites:l.favorites.filter(g=>g.id!==c)}))},E=(c,l)=>{o(g=>({...g,favorites:g.favorites.map(p=>p.id===c?{...p,...l}:p)}))},j=()=>{o(c=>({...c,history:[]}))},R=()=>{o(c=>({...c,recentSearches:[]}))},L=(c,l)=>t.favorites.some(g=>g.type===c&&g.itemId===l),O=f.useMemo(()=>{const c=t.filters;let l=0;return c.category&&l++,c.subcategory&&l++,c.mechanism&&l++,c.indication&&l++,c.routeOfAdministration&&l++,c.isOncology!==void 0&&l++,c.hasGenomicData!==void 0&&l++,c.isOrphan!==void 0&&l++,c.fdaApproved!==void 0&&l++,c.clinicalTrialPhase&&l++,l},[t.filters]),w=f.useMemo(()=>t.favorites.reduce((c,l)=>(c[l.type]||(c[l.type]=[]),c[l.type].push(l),c),{}),[t.favorites]);return{query:t.query,filters:t.filters,results:t.results,isLoading:t.isLoading,history:t.history,favorites:t.favorites,suggestions:t.suggestions,recentSearches:t.recentSearches,activeFiltersCount:O,favoritesByType:w,setQuery:b,setFilters:x,clearFilters:u,performSearch:k,addToFavorites:D,removeFromFavorites:A,updateFavorite:E,clearHistory:j,clearRecentSearches:R,isFavorite:L}},pe=(t,o)=>{let b=[...t];return o.category&&(b=b.filter(x=>x.category?.toLowerCase().includes(o.category.toLowerCase()))),o.mechanism&&(b=b.filter(x=>x.mechanism?.toLowerCase().includes(o.mechanism.toLowerCase()))),o.indication&&(b=b.filter(x=>x.indications?.some(u=>u.toLowerCase().includes(o.indication.toLowerCase())))),o.isOncology!==void 0&&(b=b.filter(x=>x.oncologyDrug===o.isOncology)),o.fdaApproved!==void 0&&(b=b.filter(x=>x.fdaApproved===o.fdaApproved)),o.routeOfAdministration&&(b=b.filter(x=>x.dosing?.standard?.toLowerCase().includes(o.routeOfAdministration.toLowerCase())||x.name?.toLowerCase().includes(o.routeOfAdministration.toLowerCase()))),b},ge=({isOpen:t,onClose:o,onSearch:b})=>{const{query:x,filters:u,suggestions:C,recentSearches:k,history:D,favoritesByType:A,activeFiltersCount:E,setQuery:j,setFilters:R,clearFilters:L,performSearch:O}=X(),[w,c]=f.useState("search");if(!t)return null;const l=()=>{b(x,u),O(),o()},g=(i,a)=>{R({[i]:a})},p=["Alkylating Agents","Antimetabolites","Topoisomerase Inhibitors","Targeted Therapy","Immunotherapy","Hormone Therapy","Supportive Care","Investigational"],v=["DNA crosslinking","DNA synthesis inhibition","Topoisomerase inhibition","Tyrosine kinase inhibition","Checkpoint inhibition","Monoclonal antibody","Hormone receptor antagonist","Growth factor inhibition"],s=["Breast cancer","Lung cancer","Colorectal cancer","Ovarian cancer","Prostate cancer","Melanoma","Lymphoma","Leukemia","Head and neck cancer","Gastric cancer"],n=["Oral","Intravenous","Intramuscular","Subcutaneous","Topical","Intrathecal"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Advanced Search"}),E>0&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded-full",children:[E," filter",E!==1?"s":""]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>c("search"),className:`px-6 py-3 font-medium ${w==="search"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Search & Filters"}),e.jsx("button",{onClick:()=>c("history"),className:`px-6 py-3 font-medium ${w==="history"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Search History"}),e.jsx("button",{onClick:()=>c("favorites"),className:`px-6 py-3 font-medium ${w==="favorites"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Favorites"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[w==="search"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Query"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:i=>j(i.target.value),placeholder:"Enter drug name, indication, or mechanism...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(_,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"})]}),C.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:C.map((i,a)=>e.jsx("button",{onClick:()=>j(i),className:"text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full transition-colors",children:i},a))}),k.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recent searches:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.slice(0,5).map((i,a)=>e.jsx("button",{onClick:()=>j(i),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:i},a))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drug Category"}),e.jsxs("select",{value:u.category,onChange:i=>g("category",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),p.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mechanism of Action"}),e.jsxs("select",{value:u.mechanism,onChange:i=>g("mechanism",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Mechanisms"}),v.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Indication"}),e.jsxs("select",{value:u.indication,onChange:i=>g("indication",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Indications"}),s.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route of Administration"}),e.jsxs("select",{value:u.routeOfAdministration,onChange:i=>g("routeOfAdministration",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Routes"}),n.map(i=>e.jsx("option",{value:i,children:i},i))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.isOncology===!0,onChange:i=>g("isOncology",i.target.checked?!0:void 0),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Oncology drugs only"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.hasGenomicData===!0,onChange:i=>g("hasGenomicData",i.target.checked?!0:void 0),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Has genomic data"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.fdaApproved===!0,onChange:i=>g("fdaApproved",i.target.checked?!0:void 0),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"FDA approved"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.isOrphan===!0,onChange:i=>g("isOrphan",i.target.checked?!0:void 0),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Orphan drugs"})]})]})]}),w==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Search History"}),e.jsx("button",{onClick:()=>{},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear History"})]}),D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No search history yet"})]}):e.jsx("div",{className:"space-y-3",children:D.slice(0,10).map(i=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>{j(i.query),R(i.filters),c("search")},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:i.query||"Advanced search"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[i.resultCount," result",i.resultCount!==1?"s":""]})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date(i.timestamp).toLocaleString()})]},i.id))})]}),w==="favorites"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Favorites"}),Object.keys(A).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No favorites yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Save drugs, interactions, and protocols for quick access"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(A).map(([i,a])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 capitalize",children:[i,"s (",a.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.map(d=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:d.name}),e.jsx("button",{className:"text-yellow-500 hover:text-yellow-600",children:e.jsx(T,{className:"w-4 h-4 fill-current"})})]}),d.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.notes}),d.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:d.tags.map((r,m)=>e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:r},m))})]},d.id))})]},i))})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:L,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:E===0,children:"Clear Filters"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Search"})]})]})]})]})})},ue=({onSearch:t,placeholder:o="Search drugs, interactions, protocols...",showFilters:b=!0,className:x=""})=>{const{query:u,suggestions:C,recentSearches:k,favoritesByType:D,activeFiltersCount:A,setQuery:E,performSearch:j,addToFavorites:R,isFavorite:L}=X(),[O,w]=f.useState(!1),[c,l]=f.useState(!1),[g,p]=f.useState(!1),v=f.useRef(null),s=f.useRef(null);f.useEffect(()=>{const h=S=>{v.current&&!v.current.contains(S.target)&&(l(!1),p(!1))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const n=h=>{E(h),l(h.length>0),p(!1)},i=h=>{const S=h||u;S.trim()&&(t(S),j(),l(!1),p(!1),s.current?.blur())},a=(h,S)=>{t(h,S),l(!1),p(!1)},d=()=>{u.length===0?(p(!0),l(!1)):(l(!0),p(!1))},r=h=>{h.key==="Enter"?i():h.key==="Escape"&&(l(!1),p(!1),s.current?.blur())},m=(h,S)=>{R({type:S,itemId:`search_${Date.now()}`,name:h,notes:`Added from search: "${u}"`,tags:["search"]})};return e.jsxs("div",{ref:v,className:`relative ${x}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{ref:s,type:"text",value:u,onChange:h=>n(h.target.value),onFocus:d,onKeyDown:r,placeholder:o,className:"w-full pl-10 pr-20 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-1 pr-3",children:[u&&e.jsx("button",{onClick:()=>{E(""),l(!1),p(!0),s.current?.focus()},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(M,{className:"h-4 w-4 text-gray-400"})}),b&&e.jsxs("button",{onClick:()=>w(!0),className:`p-2 rounded-lg transition-colors ${A>0?"bg-blue-100 text-blue-600 hover:bg-blue-200":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,title:"Advanced Search & Filters",children:[e.jsx(K,{className:"h-4 w-4"}),A>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:A})]})]})]}),(c||g)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[g&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[k.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Recent Searches"})]}),e.jsx("div",{className:"space-y-1",children:k.slice(0,5).map((h,S)=>e.jsxs("button",{onClick:()=>i(h),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center justify-between group",children:[e.jsx("span",{children:h}),e.jsx(Z,{className:"h-3 w-3 text-gray-400 opacity-0 group-hover:opacity-100"})]},S))})]}),D.drug&&D.drug.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(T,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Favorite Drugs"})]}),e.jsx("div",{className:"space-y-1",children:D.drug.slice(0,3).map(h=>e.jsxs("button",{onClick:()=>i(h.name),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center justify-between group",children:[e.jsx("span",{children:h.name}),e.jsx(T,{className:"h-3 w-3 text-yellow-500 fill-current"})]},h.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quick Actions"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>i("oncology drugs"),className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors",children:"Oncology Drugs"}),e.jsx("button",{onClick:()=>i("drug interactions"),className:"px-3 py-2 text-sm text-green-600 bg-green-50 hover:bg-green-100 rounded transition-colors",children:"Interactions"}),e.jsx("button",{onClick:()=>i("clinical protocols"),className:"px-3 py-2 text-sm text-purple-600 bg-purple-50 hover:bg-purple-100 rounded transition-colors",children:"Protocols"}),e.jsx("button",{onClick:()=>w(!0),className:"px-3 py-2 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded transition-colors",children:"Advanced Search"})]})]})]})}),c&&C.length>0&&e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs text-gray-500 px-3 py-2 border-b border-gray-100",children:"Suggestions"}),C.map((h,S)=>e.jsxs("button",{onClick:()=>i(h),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center justify-between group",children:[e.jsx("span",{children:h}),e.jsx("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100",children:e.jsx("button",{onClick:I=>{I.stopPropagation(),m(h,"drug")},className:"p-1 hover:bg-gray-200 rounded",title:"Add to favorites",children:e.jsx(T,{className:`h-3 w-3 ${L("drug",h)?"text-yellow-500 fill-current":"text-gray-400"}`})})})]},S))]}),c&&C.length===0&&u.length>2&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"No suggestions found"}),e.jsx("button",{onClick:()=>w(!0),className:"text-sm text-blue-600 hover:text-blue-800 mt-2",children:"Try advanced search"})]})]}),e.jsx(ge,{isOpen:O,onClose:()=>w(!1),onSearch:a})]})},fe=({drug:t,className:o=""})=>{const[b,x]=f.useState("overview"),[u,C]=f.useState(new Set(["basic-info"])),[k,D]=f.useState([]),[A,E]=f.useState([]),[j,R]=f.useState([]),[L,O]=f.useState(!1);f.useEffect(()=>{w()},[t.rxcui]);const w=async()=>{O(!0);try{await Promise.all([c(),l(),g()])}catch(a){console.error("Error loading enhanced drug data:",a)}finally{O(!1)}},c=async()=>{const a=[{id:"mechanism",category:"pharmacology",title:"Mechanism of Action",content:t.mechanism||"Detailed mechanism of action data not available.",severity:"info",sources:["DrugBank","PubMed","FDA Label"],lastUpdated:"2024-01-15"},{id:"pharmacokinetics",category:"pharmacology",title:"Pharmacokinetics",content:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Absorption:"}),e.jsx("p",{className:"text-gray-600",children:"Rapidly absorbed, bioavailability 85-95%"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Distribution:"}),e.jsx("p",{className:"text-gray-600",children:"Volume of distribution: 0.6-1.2 L/kg"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Metabolism:"}),e.jsx("p",{className:"text-gray-600",children:"Hepatic via CYP3A4, CYP2D6"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Elimination:"}),e.jsx("p",{className:"text-gray-600",children:"Half-life: 8-12 hours, renal excretion 60%"})]})]})}),severity:"info",sources:["Clinical Pharmacology","Drug Label"],lastUpdated:"2024-01-10"},{id:"contraindications",category:"safety",title:"Contraindications & Precautions",content:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Absolute Contraindications:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:t.contraindications?.map((d,r)=>e.jsx("li",{children:d},r))||e.jsx("li",{children:"No specific contraindications listed"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Precautions:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"Monitor renal function in elderly patients"}),e.jsx("li",{children:"Use with caution in hepatic impairment"}),e.jsx("li",{children:"May interact with CYP3A4 inhibitors"})]})]})]}),severity:"warning",sources:["FDA Label","Clinical Guidelines"],lastUpdated:"2024-01-12"},{id:"adverse-events",category:"safety",title:"Adverse Events Profile",content:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded",children:[e.jsxs("h5",{className:"font-medium text-red-800 mb-2",children:["Common (",">10%",")"]}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:t.sideEffects?.slice(0,3).map((d,r)=>e.jsxs("li",{children:["• ",d]},r))||e.jsx("li",{children:"• Nausea"})})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"Uncommon (1-10%)"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• Headache"}),e.jsx("li",{children:"• Dizziness"}),e.jsx("li",{children:"• Rash"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:[e.jsxs("h5",{className:"font-medium text-gray-800 mb-2",children:["Rare (","<1%",")"]}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"• Severe hypersensitivity"}),e.jsx("li",{children:"• Hepatotoxicity"}),e.jsx("li",{children:"• Serious skin reactions"})]})]})]})}),severity:"warning",sources:["FAERS","Clinical Trials","Post-marketing surveillance"],lastUpdated:"2024-01-08"}];D(a)},l=async()=>{const a=[{id:"trial1",title:`Phase III Study of ${t.name} in Advanced Cancer`,phase:"Phase III",status:"recruiting",condition:"Advanced Solid Tumors",sponsor:"National Cancer Institute",enrollmentTarget:450,location:"Multiple centers (US, EU)",nctId:"NCT05123456"},{id:"trial2",title:`Combination Therapy with ${t.name} and Immunotherapy`,phase:"Phase II",status:"active",condition:"Metastatic Melanoma",sponsor:"Academic Medical Center",enrollmentTarget:120,location:"Johns Hopkins, Mayo Clinic",nctId:"NCT05234567"}];E(a)},g=async()=>{const a=[{id:"nccn1",organization:"NCCN",title:`${t.name} Guidelines for Cancer Treatment`,recommendation:"Category 1 recommendation for first-line therapy in specific indications",evidenceLevel:"A",lastReviewed:"2024-01-01",url:"https://nccn.org"},{id:"fda1",organization:"FDA",title:"Safety Communication",recommendation:"Monitor for cardiac toxicity in high-risk patients",evidenceLevel:"B",lastReviewed:"2023-12-15"}];R(a)},p=a=>{const d=new Set(u);d.has(a)?d.delete(a):d.add(a),C(d)},v=a=>{switch(a){case"error":return e.jsx(ce,{className:"w-4 h-4 text-red-500"});case"warning":return e.jsx(G,{className:"w-4 h-4 text-yellow-500"});case"success":return e.jsx(P,{className:"w-4 h-4 text-green-500"});default:return e.jsx(ne,{className:"w-4 h-4 text-blue-500"})}},s=a=>{switch(a){case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200";default:return"bg-blue-50 border-blue-200"}},n=a=>{const d={recruiting:{bg:"bg-green-100",text:"text-green-800",label:"Recruiting"},active:{bg:"bg-blue-100",text:"text-blue-800",label:"Active"},completed:{bg:"bg-gray-100",text:"text-gray-800",label:"Completed"},suspended:{bg:"bg-red-100",text:"text-red-800",label:"Suspended"}},r=d[a]||d.active;return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.bg} ${r.text}`,children:r.label})},i=[{id:"overview",label:"Overview",icon:se},{id:"clinical",label:"Clinical Data",icon:$},{id:"safety",label:"Safety Profile",icon:z},{id:"guidelines",label:"Guidelines",icon:W},{id:"trials",label:"Clinical Trials",icon:Y}];return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm ${o}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(ee,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),t.fdaApproved&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FDA Approved"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:t.genericName}),t.brandNames&&t.brandNames.length>0&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Brand names: ",t.brandNames.join(", ")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-yellow-500 transition-colors",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:i.map(a=>{const d=a.icon;return e.jsxs("button",{onClick:()=>x(a.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${b===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:a.label})]},a.id)})})}),e.jsxs("div",{className:"p-6",children:[b==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-blue-600"}),e.jsx("h3",{className:"font-medium text-blue-900",children:"Category"})]}),e.jsx("p",{className:"text-blue-800",children:t.category})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(J,{className:"w-4 h-4 text-purple-600"}),e.jsx("h3",{className:"font-medium text-purple-900",children:"Mechanism"})]}),e.jsx("p",{className:"text-purple-800 text-sm",children:t.mechanism})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600"}),e.jsx("h3",{className:"font-medium text-green-900",children:"Primary Indications"})]}),e.jsx("div",{className:"text-green-800 text-sm space-y-1",children:t.indications?.slice(0,3).map((a,d)=>e.jsxs("div",{children:["• ",a]},d))})]})]})}),e.jsx("div",{className:"space-y-4",children:k.filter(a=>a.category==="pharmacology").map(a=>e.jsxs("div",{className:`border rounded-lg ${s(a.severity||"info")}`,children:[e.jsxs("button",{onClick:()=>p(a.id),className:"w-full p-4 text-left flex items-center justify-between hover:bg-opacity-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[v(a.severity||"info"),e.jsx("h3",{className:"font-medium text-gray-900",children:a.title})]}),u.has(a.id)?e.jsx(ae,{className:"w-4 h-4 text-gray-500"}):e.jsx(ie,{className:"w-4 h-4 text-gray-500"})]}),u.has(a.id)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"border-t pt-4",children:[typeof a.content=="string"?e.jsx("p",{className:"text-gray-700",children:a.content}):a.content,e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:["Sources: ",a.sources.join(", ")]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{className:"w-3 h-3"}),e.jsxs("span",{children:["Updated: ",a.lastUpdated]})]})]})]})})]},a.id))})]}),b==="clinical"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Clinical Data & Evidence"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Comprehensive clinical information and evidence-based insights"})]}),(t.clinicalInsights||t.realWorldEvidence||t.riskProfile||t.monitoringRequirements||t.clinicalDecisionSupport||t.costEffectiveness)&&e.jsxs("div",{className:"space-y-6",children:[t.clinicalInsights&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Clinical Insights"]}),t.clinicalInsights.mechanismOfAction&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Mechanism of Action:"}),e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsx("p",{className:"text-sm text-gray-700",children:t.clinicalInsights.mechanismOfAction})})]}),t.clinicalInsights.clinicalEfficacy&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Clinical Efficacy:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.clinicalInsights.clinicalEfficacy.responseRate&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Response Rate"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalInsights.clinicalEfficacy.responseRate})]}),t.clinicalInsights.clinicalEfficacy.medianPFS&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Median PFS"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalInsights.clinicalEfficacy.medianPFS})]}),t.clinicalInsights.clinicalEfficacy.medianOS&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Median OS"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalInsights.clinicalEfficacy.medianOS})]}),t.clinicalInsights.clinicalEfficacy.evidenceLevel&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Evidence Level"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalInsights.clinicalEfficacy.evidenceLevel})]})]})]}),t.clinicalInsights.patientSubgroups&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Patient Subgroups:"}),e.jsx("div",{className:"space-y-2",children:t.clinicalInsights.patientSubgroups.map((a,d)=>e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.criteria}),e.jsx("p",{className:"text-xs text-gray-600",children:a.efficacy}),e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:a.recommendation})]},d))})]}),t.clinicalData.realWorldInsights.patientReported&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Patient-Reported Outcomes:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Satisfaction Score"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalData.realWorldInsights.patientReported.satisfactionScore})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Adherence Rate"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalData.realWorldInsights.patientReported.adherenceRate})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"QoL Score"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalData.realWorldInsights.patientReported.qualityOfLifeScore})]})]}),t.clinicalData.realWorldInsights.patientReported.commonConcerns&&e.jsxs("div",{className:"mt-3 bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Common Patient Concerns:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.clinicalData.realWorldInsights.patientReported.commonConcerns.map((a,d)=>e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:a},d))})]})]})]}),t.clinicalData.clinicalDecisionSupport&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-4 flex items-center",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Clinical Decision Support"]}),t.clinicalData.clinicalDecisionSupport.doseGuidance&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:"Dosing Guidance:"}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("p",{className:"font-medium",children:["Recommended Dose: ",t.clinicalData.clinicalDecisionSupport.doseGuidance.recommendedDose]}),t.clinicalData.clinicalDecisionSupport.doseGuidance.specialPopulations&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Special Populations:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:t.clinicalData.clinicalDecisionSupport.doseGuidance.specialPopulations.map((a,d)=>e.jsx("li",{children:a},d))})]})]})]}),t.clinicalData.clinicalDecisionSupport.monitoringPlan&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:"Monitoring Plan:"}),e.jsxs("div",{className:"space-y-2",children:[t.clinicalData.clinicalDecisionSupport.monitoringPlan.baseline&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Baseline Monitoring:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:t.clinicalData.clinicalDecisionSupport.monitoringPlan.baseline.map((a,d)=>e.jsx("li",{children:a},d))})]}),t.clinicalData.clinicalDecisionSupport.monitoringPlan.ongoing&&e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Ongoing Monitoring:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:t.clinicalData.clinicalDecisionSupport.monitoringPlan.ongoing.map((a,d)=>e.jsx("li",{children:a},d))})]})]})]}),t.clinicalData.clinicalDecisionSupport.contraindications&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:"Contraindications:"}),e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:t.clinicalData.clinicalDecisionSupport.contraindications.map((a,d)=>e.jsx("li",{children:a},d))})})]})]}),t.clinicalData.realWorldEvidence&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 mb-4 flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Real-World Evidence"]}),t.clinicalData.realWorldEvidence.costEffectiveness&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-purple-800 mb-2",children:"Cost Effectiveness:"}),e.jsx("div",{className:"bg-white p-3 rounded border",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Annual Cost"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",t.clinicalData.realWorldEvidence.costEffectiveness.annualCost?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Cost per QALY"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",t.clinicalData.realWorldEvidence.costEffectiveness.costPerQALY?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Tier Status"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.clinicalData.realWorldEvidence.costEffectiveness.tierStatus||"N/A"})]})]})})]}),t.clinicalData.realWorldEvidence.outcomes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800 mb-2",children:"Real-World Outcomes:"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.clinicalData.realWorldEvidence.outcomes).map(([a,d])=>e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:a.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-sm text-gray-700",children:d})]},a))})]})]})]}),!(t.clinicalInsights||t.realWorldEvidence||t.riskProfile||t.monitoringRequirements||t.clinicalDecisionSupport||t.costEffectiveness)&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Clinical Data Available"}),e.jsx("p",{className:"text-gray-600",children:"Enhanced clinical data is not available for this medication. Please refer to the Overview tab for basic information."})]})]}),b==="safety"&&e.jsx("div",{className:"space-y-6",children:k.filter(a=>a.category==="safety").map(a=>e.jsx("div",{className:`border rounded-lg ${s(a.severity||"info")}`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v(a.severity||"info"),e.jsx("h3",{className:"font-medium text-gray-900",children:a.title})]}),typeof a.content=="string"?e.jsx("p",{className:"text-gray-700",children:a.content}):a.content,e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:["Sources: ",a.sources.join(", ")]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{className:"w-3 h-3"}),e.jsxs("span",{children:["Updated: ",a.lastUpdated]})]})]})]})},a.id))}),b==="trials"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Active Clinical Trials"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[A.length," trials found"]})]}),e.jsx("div",{className:"space-y-4",children:A.map(a=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a.condition})]}),n(a.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Phase:"}),e.jsx("p",{className:"text-gray-600",children:a.phase})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sponsor:"}),e.jsx("p",{className:"text-gray-600",children:a.sponsor})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Enrollment:"}),e.jsxs("p",{className:"text-gray-600",children:[a.enrollmentTarget," patients"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"NCT ID:"}),e.jsxs("a",{href:`https://clinicaltrials.gov/ct2/show/${a.nctId}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[e.jsx("span",{children:a.nctId}),e.jsx(V,{className:"w-3 h-3"})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Locations:"})," ",a.location]})})]},a.id))})]}),b==="guidelines"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Clinical Guidelines & Recommendations"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[j.length," guidelines"]})]}),e.jsx("div",{className:"space-y-4",children:j.map(a=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.title}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded ${a.evidenceLevel==="A"?"bg-green-100 text-green-800":a.evidenceLevel==="B"?"bg-blue-100 text-blue-800":a.evidenceLevel==="C"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:["Level ",a.evidenceLevel]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.organization})]})}),e.jsx("p",{className:"text-gray-700 mb-3",children:a.recommendation}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Last reviewed: ",a.lastReviewed]}),a.url&&e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[e.jsx("span",{children:"View guideline"}),e.jsx(V,{className:"w-3 h-3"})]})]})]},a.id))})]}),L&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})]})},be=({initialDrugs:t=[],onAddDrug:o,className:b=""})=>{const[x,u]=f.useState([]),[C,k]=f.useState(""),[D,A]=f.useState(!1),[E]=f.useState([{id:"1",rxcui:"1001",name:"Carboplatin",genericName:"carboplatin",brandNames:["Paraplatin"],category:"Alkylating Agent",mechanism:"DNA crosslinking",indications:["Ovarian cancer","Lung cancer"],contraindications:["Severe bone marrow depression"],sideEffects:["Myelosuppression","Nephrotoxicity"],interactions:[],dosing:{standard:"AUC 5-6 mg/mL*min IV",renal:"Adjust based on CrCl",hepatic:"No adjustment needed"},monitoring:["CBC","Renal function"],fdaApproved:!0,oncologyDrug:!0},{id:"2",rxcui:"1002",name:"Cisplatin",genericName:"cisplatin",brandNames:["Platinol"],category:"Alkylating Agent",mechanism:"DNA crosslinking",indications:["Testicular cancer","Ovarian cancer","Bladder cancer"],contraindications:["Renal impairment","Hearing impairment"],sideEffects:["Nephrotoxicity","Ototoxicity","Neuropathy"],interactions:[],dosing:{standard:"20 mg/m² IV daily × 5 days",renal:"Contraindicated if CrCl < 60",hepatic:"No adjustment needed"},monitoring:["Renal function","Hearing tests","Neurologic exam"],fdaApproved:!0,oncologyDrug:!0}]);f.useEffect(()=>{t.length>0&&u(t.map(s=>j(s)))},[t]);const j=s=>({...s,comparisonScore:R(s),strengths:L(s),weaknesses:O(s),clinicalNotes:w(s)}),R=s=>{let n=50;return s.fdaApproved&&(n+=20),s.oncologyDrug&&(n+=15),s.sideEffects&&s.sideEffects.length<5&&(n+=10),s.contraindications&&s.contraindications.length<3&&(n+=5),Math.min(100,Math.max(0,n))},L=s=>{const n=[];return s.fdaApproved&&n.push("FDA approved with established safety profile"),s.oncologyDrug&&n.push("Specifically designed for oncology indications"),s.sideEffects&&s.sideEffects.length<5&&n.push("Favorable side effect profile"),s.indications&&s.indications.length>3&&n.push("Broad spectrum of indications"),n},O=s=>{const n=[];return s.contraindications&&s.contraindications.length>2&&n.push("Multiple contraindications limit patient eligibility"),s.sideEffects&&s.sideEffects.length>5&&n.push("Extensive side effect profile requires careful monitoring"),s.monitoring&&s.monitoring.length>4&&n.push("Intensive monitoring requirements"),n},w=s=>{const n=[];return s.category?.includes("Alkylating")&&n.push("Consider premedication for hypersensitivity reactions"),s.sideEffects?.includes("Nephrotoxicity")&&n.push("Ensure adequate hydration and monitor renal function closely"),s.sideEffects?.includes("Myelosuppression")&&n.push("Monitor CBC regularly and adjust dose for hematologic toxicity"),n},c=[{id:"name",label:"Drug Name",icon:W,getValue:s=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.genericName})]})},{id:"category",label:"Category",icon:J,getValue:s=>s.category||"Not specified"},{id:"mechanism",label:"Mechanism",icon:$,getValue:s=>s.mechanism||"Not specified"},{id:"indications",label:"Indications",icon:Y,getValue:s=>e.jsxs("div",{className:"space-y-1",children:[s.indications?.slice(0,3).map((n,i)=>e.jsxs("div",{className:"text-sm",children:["• ",n]},i)),s.indications&&s.indications.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",s.indications.length-3," more"]})]})},{id:"sideEffects",label:"Side Effects",icon:G,getValue:s=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium mb-1",children:[s.sideEffects?.length||0," reported"]}),e.jsx("div",{className:"space-y-1",children:s.sideEffects?.slice(0,3).map((n,i)=>e.jsxs("div",{className:"text-xs text-gray-600",children:["• ",n]},i))})]}),compare:(s,n)=>(s.sideEffects?.length||0)-(n.sideEffects?.length||0)},{id:"contraindications",label:"Contraindications",icon:z,getValue:s=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium mb-1",children:[s.contraindications?.length||0," listed"]}),e.jsx("div",{className:"space-y-1",children:s.contraindications?.slice(0,2).map((n,i)=>e.jsxs("div",{className:"text-xs text-gray-600",children:["• ",n]},i))})]}),compare:(s,n)=>(s.contraindications?.length||0)-(n.contraindications?.length||0)},{id:"monitoring",label:"Monitoring",icon:H,getValue:s=>e.jsx("div",{className:"space-y-1",children:s.monitoring?.slice(0,3).map((n,i)=>e.jsxs("div",{className:"text-sm",children:["• ",n]},i))})},{id:"fdaStatus",label:"FDA Status",icon:P,getValue:s=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.fdaApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.fdaApproved?"Approved":"Investigational"})},{id:"comparisonScore",label:"Overall Score",icon:T,getValue:s=>{const i=s.comparisonScore||0;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i}),e.jsx("div",{className:"text-xs text-gray-500",children:"/ 100"})]})},compare:(s,n)=>(n.comparisonScore||0)-(s.comparisonScore||0)}],l=s=>{if(x.length<4&&!x.find(n=>n.rxcui===s.rxcui)){const n=j(s);u(i=>[...i,n]),A(!1),k(""),o?.(s)}},g=s=>{u(n=>n.filter(i=>i.rxcui!==s))},p=E.filter(s=>s.name.toLowerCase().includes(C.toLowerCase())||s.genericName.toLowerCase().includes(C.toLowerCase())||s.category.toLowerCase().includes(C.toLowerCase())),v=(s,n)=>{if(!s.compare||x.length<2)return null;const i=x[n],a=x.reduce((r,m)=>s.compare(m,r)>0?m:r),d=x.reduce((r,m)=>s.compare(m,r)<0?m:r);return i.rxcui===a.rxcui&&i.rxcui!==d.rxcui?e.jsx(Q,{className:"w-4 h-4 text-green-500",title:"Best in category"}):i.rxcui===d.rxcui&&i.rxcui!==a.rxcui?e.jsx(Q,{className:"w-4 h-4 text-red-500 rotate-180",title:"Needs attention"}):null};return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm ${b}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Drug Comparison"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Compare up to 4 drugs side by side"})]})]}),x.length<4&&e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Drug"})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Add Drug to Comparison"}),e.jsx("button",{onClick:()=>A(!1),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(M,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("input",{type:"text",value:C,onChange:s=>k(s.target.value),placeholder:"Search for drugs...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),e.jsxs("div",{className:"mt-4 max-h-60 overflow-y-auto space-y-2",children:[p.filter(s=>!x.find(n=>n.rxcui===s.rxcui)).map(s=>e.jsxs("button",{onClick:()=>l(s),className:"w-full p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.category})]},s.rxcui)),p.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No drugs found"})]})]})]})}),x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left p-4 font-medium text-gray-700 w-32",children:"Metric"}),x.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.genericName})]}),e.jsx("button",{onClick:()=>g(s.rxcui),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(M,{className:"w-4 h-4"})})]})},s.rxcui))]})}),e.jsx("tbody",{children:c.map(s=>{const n=s.icon;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-700",children:s.label})]})}),x.map((i,a)=>e.jsx("td",{className:"p-4 align-top",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-1",children:s.getValue(i)}),v(s,a)]})},i.rxcui))]},s.id)})})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No drugs selected"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add drugs to compare their features, efficacy, and safety profiles side by side."}),e.jsx("button",{onClick:()=>A(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Drug"})]}),x.length>1&&e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Comparison Insights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.comparisonScore,"/100"]})]})]}),s.strengths&&s.strengths.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-green-800 mb-1",children:"Strengths:"}),e.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:s.strengths.slice(0,2).map((n,i)=>e.jsxs("li",{className:"flex items-start space-x-1",children:[e.jsx(P,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:n})]},i))})]}),s.weaknesses&&s.weaknesses.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-orange-800 mb-1",children:"Considerations:"}),e.jsx("ul",{className:"text-sm text-orange-700 space-y-1",children:s.weaknesses.slice(0,2).map((n,i)=>e.jsxs("li",{className:"flex items-start space-x-1",children:[e.jsx(G,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:n})]},i))})]})]},s.rxcui))})]})]})},Re=()=>{const[t,o]=f.useState("grid"),[b,x]=f.useState(null),[u,C]=f.useState([]),[k,D]=f.useState(!1),[A,E]=f.useState([]),[j,R]=f.useState([]),[L,O]=f.useState([]),[w,c]=f.useState(null),l=oe();f.useEffect(()=>{p(),g();try{const r=localStorage.getItem("osrx_selected_drug");if(r){const m=JSON.parse(r),h={rxcui:String(m.rxcui||m.id||""),name:m.name,generic_name:m.generic_name||m.genericName||m.name,brand_names:m.brand_names||m.brandNames||[],dosage_forms:m.dosage_forms||m.dosageForms||[],strengths:m.strengths||[],therapeutic_class:m.therapeutic_class||m.therapeuticClass||void 0,indication:Array.isArray(m.indication)?m.indication.join(", "):m.indication};x(h),localStorage.removeItem("osrx_selected_drug"),o("list")}}catch{}},[]);const g=async()=>{try{D(!0);const m=["1049502","861467","282464","40048","41126","583214"].map(async S=>{try{const I=await fetch(`${l}/drugs/enhanced/${S}`);if(!I.ok)throw new Error("Failed to fetch");const y=await I.json();return{rxcui:y.drug.rxcui,name:y.drug.name,genericName:y.drug.genericName||y.drug.name,brandNames:y.drug.brandNames||[],category:y.drug.clinicalInsights?.mechanismOfAction?"Clinical Therapy":"Medication",mechanism:y.drug.clinicalInsights?.mechanismOfAction||"Therapeutic agent",indications:y.drug.clinicalInsights?.patientSubgroups?.map(N=>N.criteria)||[],contraindications:y.clinicalDecisionSupport?.contraindications||[],sideEffects:y.drug.riskProfile?.specificRisks?.map(N=>N.type)||[],interactions:[],dosing:{standard:y.clinicalDecisionSupport?.doseGuidance?.recommendedDose||"Consult prescribing information",renal:"Adjust based on renal function",hepatic:"Adjust based on hepatic function"},monitoring:y.clinicalDecisionSupport?.monitoringPlan?.baseline||[],fdaApproved:!0,oncologyDrug:!0,clinicalData:y}}catch(I){return console.warn(`Failed to load drug ${S}:`,I),null}}),h=(await Promise.all(m)).filter(Boolean);O(h)}catch(r){console.error("Failed to load featured drugs:",r),c("Failed to load clinical data. Please try again.")}finally{D(!1)}},p=()=>{E([{category:"Immunotherapy",count:45,trending:!0,newAdditions:8},{category:"Targeted Therapy",count:123,trending:!0,newAdditions:15},{category:"Alkylating Agent",count:34,trending:!1,newAdditions:2},{category:"Antimetabolite",count:28,trending:!1,newAdditions:1},{category:"Anthracycline",count:12,trending:!1,newAdditions:0},{category:"Hormone Therapy",count:56,trending:!1,newAdditions:3}])},v=async(r,m)=>{if(!r.trim()){C([]);return}D(!0),c(null);try{const h=await fetch(`${l}/drugs/enhanced/search?q=${encodeURIComponent(r)}`);if(!h.ok)throw new Error("Search failed");let y=(await h.json()).results.map(N=>({rxcui:N.rxcui,name:N.name,genericName:N.genericName||N.name,brandNames:N.brandNames||[],category:N.clinicalRelevance?.therapeuticClass||"Medication",mechanism:N.clinicalRelevance?.mechanismOfAction||"Therapeutic agent",indications:N.clinicalRelevance?.primaryIndications||[],contraindications:N.safetyAlerts?.map(U=>U.description)||[],sideEffects:N.safetyAlerts?.map(U=>U.type)||[],interactions:[],dosing:{standard:"Consult prescribing information",renal:"Adjust based on renal function",hepatic:"Adjust based on hepatic function"},monitoring:[],fdaApproved:!0,oncologyDrug:N.clinicalRelevance?.isOncologyDrug||!1,clinicalData:N}));m&&(m.category&&(y=y.filter(N=>N.category.toLowerCase().includes(m.category.toLowerCase()))),m.isOncology&&(y=y.filter(N=>N.oncologyDrug===!0)),m.fdaApproved&&(y=y.filter(N=>N.fdaApproved===!0))),C(y)}catch(h){console.error("Search failed:",h),c("Search failed. Please try again.");let S=L;if(r){const I=r.toLowerCase();S=S.filter(y=>y.name.toLowerCase().includes(I)||y.genericName.toLowerCase().includes(I)||y.category.toLowerCase().includes(I)||y.mechanism.toLowerCase().includes(I)||y.indications?.some(N=>N.toLowerCase().includes(I)))}C(S)}finally{D(!1)}},s=r=>{x(r),o("grid")},n=r=>{j.length<4&&!j.find(m=>m.rxcui===r.rxcui)&&R(m=>[...m,r])},i=()=>e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>o("grid"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o("list"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>o("comparison"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center space-x-1 ${t==="comparison"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(B,{className:"w-4 h-4"}),j.length>0&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:j.length})]})]}),a=({drug:r})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.genericName}),e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:r.category})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[r.fdaApproved&&e.jsx(P,{className:"w-4 h-4 text-green-500",title:"FDA Approved"}),e.jsx("button",{onClick:()=>n(r),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",disabled:j.length>=4,title:"Add to comparison",children:e.jsx(q,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:r.mechanism}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Indications:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[r.indications?.slice(0,3).map((m,h)=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:m},h)),r.indications&&r.indications.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",r.indications.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[r.sideEffects?.length||0," side effects"]}),e.jsxs("button",{onClick:()=>s(r),className:"text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center space-x-1",children:[e.jsx(he,{className:"w-3 h-3"}),e.jsx("span",{children:"View Details"})]})]})]})]}),d=({drug:r})=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:r.name}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:r.category}),r.fdaApproved&&e.jsx(P,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:r.mechanism}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[r.indications?.length||0," indications"]}),e.jsxs("span",{children:[r.sideEffects?.length||0," side effects"]}),e.jsxs("span",{children:[r.contraindications?.length||0," contraindications"]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>n(r),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",disabled:j.length>=4,title:"Add to comparison",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s(r),className:"px-3 py-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View Details"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(de,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Drug Information Database"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Comprehensive drug information with advanced search, detailed profiles, and comparison tools."}),w&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:w})]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:A.map(r=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:r.count}),r.trending&&e.jsx(Q,{className:"w-4 h-4 text-green-500"})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:r.category}),r.newAdditions>0&&e.jsxs("div",{className:"text-xs text-blue-600",children:["+",r.newAdditions," new"]})]},r.category))}),e.jsx(ue,{onSearch:v,placeholder:"Search drugs by name, category, indication, or mechanism...",showFilters:!0,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:u.length>0?`Search Results (${u.length})`:"Featured Drugs"}),j.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsxs("span",{children:[j.length," drugs selected for comparison"]})]})]}),e.jsx(i,{})]}),t==="comparison"?e.jsx(be,{initialDrugs:j,onAddDrug:n}):b?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>x(null),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Back to Search Results"})]}),e.jsx(fe,{drug:b})]}):e.jsxs("div",{children:[k?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:`${t==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}`,children:(u.length>0?u:L).map(r=>t==="grid"?e.jsx(a,{drug:r},r.rxcui):e.jsx(d,{drug:r},r.rxcui))}),!k&&u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters."})]})]})]})};export{Re as default};
//# sourceMappingURL=DrugDatabase-C2haxOnZ.js.map
