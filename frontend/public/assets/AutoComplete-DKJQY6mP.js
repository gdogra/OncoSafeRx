import{r as a,j as t,S as Q,X as Y,l as Z}from"./index-4Ly-s4cr.js";import{L as A}from"./LoadingSpinner-BK8GoEPg.js";import{C as _}from"./check-pB4liXIF.js";const se=({options:w,value:y="",placeholder:R="Start typing to search...",onSelect:z,onChange:D,loading:m=!1,disabled:W=!1,allowCustom:T=!1,maxResults:N=10,minChars:v=1,caseSensitive:f=!1,highlightMatches:F=!0,groupByCategory:k=!1,className:H="",dropdownClassName:K="",noResultsText:M="No results found",searchKeys:I=["label","value","description"],onSearch:U,debounceMs:J=300,disableFiltering:S=!1})=>{const[g,c]=a.useState(!1),[u,p]=a.useState(y),[j,x]=a.useState(-1),[i,C]=a.useState(""),h=a.useRef(null),L=a.useRef(null),E=a.useRef(null);a.useEffect(()=>{p(y)},[y]);const V=a.useMemo(()=>I,[I?.join(",")]),o=a.useMemo(()=>{if(S)return w.slice(0,N);if(!i||i.length<v)return[];const e=f?i:i.toLowerCase();return w.filter(d=>V.some(n=>{const l=d[n];return typeof l!="string"?!1:(f?l:l.toLowerCase()).includes(e)})).sort((d,n)=>{const l=f?d.label:d.label.toLowerCase(),b=f?n.label:n.label.toLowerCase();return l===e?-1:b===e?1:l.startsWith(e)&&!b.startsWith(e)?-1:b.startsWith(e)&&!l.startsWith(e)?1:l.localeCompare(b)}).slice(0,N)},[i,w,v,N,f,S,V]),X=a.useMemo(()=>k?o.reduce((e,s)=>{const r=s.category||"Other";return e[r]||(e[r]=[]),e[r].push(s),e},{}):{"":o},[o,k]),q=e=>{const s=e.target.value;p(s),D?.(s),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{C(s),U?.(s)},J),s.length>0&&c(!0),x(-1)},O=e=>{p(e.label),C(""),c(!1),x(-1),z(e),h.current?.focus()},G=e=>{const s=e.key;if(!g){if(s==="Enter"||s==="ArrowDown"||s.toLowerCase()==="j"){c(!0);return}return}switch(s){case"ArrowDown":case"j":case"J":e.preventDefault(),x(r=>r<o.length-1?r+1:0);break;case"ArrowUp":case"k":case"K":e.preventDefault(),x(r=>r>0?r-1:o.length-1);break;case"Enter":e.preventDefault(),j>=0&&o[j]?O(o[j]):T&&u&&(z({value:u,label:u}),c(!1));break;case"Escape":c(!1),x(-1),h.current?.blur();break;case"Tab":c(!1);break}},P=()=>{p(""),C(""),c(!1),D?.(""),h.current?.focus()},$=(e,s)=>{if(!s||!F)return e;const r=f?e:e.toLowerCase(),d=f?s:s.toLowerCase(),n=r.indexOf(d);return n===-1?e:t.jsxs(t.Fragment,{children:[e.substring(0,n),t.jsx("mark",{className:"bg-yellow-200 font-medium",children:e.substring(n,n+s.length)}),e.substring(n+s.length)]})};return a.useEffect(()=>{const e=s=>{L.current&&!L.current.contains(s.target)&&!h.current?.contains(s.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),t.jsxs("div",{className:`relative ${H}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Q,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{ref:h,type:"text",value:u,onChange:q,onKeyDown:G,onFocus:()=>c(!0),placeholder:R,disabled:W||m,className:"block w-full pl-9 pr-12 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm placeholder-gray-400 disabled:bg-gray-50 disabled:text-gray-500",autoComplete:"off",spellCheck:"false"}),t.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:[m&&t.jsx(A,{size:"sm"}),u&&!m&&t.jsx("button",{type:"button",onClick:P,className:"p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",children:t.jsx(Y,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:()=>c(!g),className:"p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",children:t.jsx(Z,{className:`h-4 w-4 transition-transform ${g?"rotate-180":""}`})})]})]}),g&&t.jsxs("div",{ref:L,className:`absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto ${K}`,children:[m&&t.jsxs("div",{className:"p-4 text-center",children:[t.jsx(A,{size:"sm"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Searching..."})]}),!m&&o.length===0&&i.length>=v&&t.jsxs("div",{className:"p-4 text-center text-sm text-gray-500",children:[M,T&&t.jsx("div",{className:"mt-2",children:t.jsxs("button",{onClick:()=>O({value:u,label:u}),className:"text-blue-600 hover:text-blue-800 font-medium",children:['Use "',u,'"']})})]}),!m&&o.length>0&&t.jsx("div",{className:"py-1",children:Object.entries(X).map(([e,s])=>t.jsxs("div",{children:[k&&e&&t.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide bg-gray-50",children:e}),s.map((r,d)=>{const n=o.indexOf(r),l=j===n;return t.jsx("button",{onClick:()=>O(r),className:`w-full px-3 py-2 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none ${l?"bg-blue-50 text-blue-900":"text-gray-900"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium truncate",children:$(r.label,i)}),r.description&&t.jsx("div",{className:"text-xs text-gray-500 truncate",children:$(r.description,i)})]}),l&&t.jsx(_,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]})},`${r.value}-${d}`)})]},e))})]})]})};export{se as A};
//# sourceMappingURL=AutoComplete-DKJQY6mP.js.map
