{"version":3,"file":"Pain-BP5bgSWt.js","sources":["../../src/pages/Pain.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { apiBaseUrl } from '../utils/env';\nimport { Pill, AlertTriangle, Plus, Trash2, Stethoscope, ExternalLink } from 'lucide-react';\nimport Tooltip from '../components/UI/Tooltip';\n\ntype MedInput = {\n  name: string;\n  rxcui?: string;\n  route?: 'oral' | 'transdermal' | 'sublingual' | 'buccal' | 'iv' | 'im';\n  doseMgPerDose?: number;\n  dosesPerDay?: number;\n  strengthMcgPerHr?: number; // for fentanyl patch\n};\n\ntype PatientCtx = {\n  age?: number;\n  renal_clearance?: number;\n  respiratory?: boolean;\n  sleep_apnea?: boolean;\n  pregnancy?: boolean;\n};\n\nconst opioidExamples = [\n  'morphine', 'hydrocodone', 'oxycodone', 'hydromorphone', 'oxymorphone', 'codeine', 'tramadol', 'tapentadol', 'fentanyl', 'methadone', 'buprenorphine'\n];\n\nexport default function Pain() {\n  const apiBase = useMemo(() => apiBaseUrl(), []);\n\n  const [medications, setMedications] = useState<MedInput[]>([\n    { name: 'oxycodone', route: 'oral', doseMgPerDose: 5, dosesPerDay: 4 }\n  ]);\n  const [patient, setPatient] = useState<PatientCtx>({ age: 70, renal_clearance: 60 });\n  const [phenotypes, setPhenotypes] = useState<{ CYP2D6?: string }>({});\n\n  const [mmeResult, setMmeResult] = useState<any | null>(null);\n  const [safetyResult, setSafetyResult] = useState<any | null>(null);\n  const [liveSafety, setLiveSafety] = useState<{ findings: any[]; recommendations: string[] } | null>(null);\n  const liveSafetyTimer = useRef<any>(null);\n  const [autoMme, setAutoMme] = useState<boolean>(true);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [connStatus, setConnStatus] = useState<'unknown'|'online'|'offline'|'error'>('unknown');\n  const [connTesting, setConnTesting] = useState<boolean>(false);\n  const [connCheckedAt, setConnCheckedAt] = useState<string | null>(null);\n\n  const addMedication = () => setMedications(prev => [...prev, { name: '', route: 'oral', doseMgPerDose: undefined, dosesPerDay: undefined }]);\n  const removeMedication = (idx: number) => setMedications(prev => prev.filter((_, i) => i !== idx));\n\n  const updateMedication = (idx: number, patch: Partial<MedInput>) => {\n    setMedications(prev => prev.map((m, i) => (i === idx ? { ...m, ...patch } : m)));\n  };\n\n  // Helper function to extract dose information from drug name\n  const extractDoseFromName = (drugName: string) => {\n    // Look for opioid names and their associated doses\n    const opioids = ['oxycodone', 'morphine', 'fentanyl', 'hydrocodone', 'hydromorphone', 'oxymorphone', 'codeine', 'tramadol'];\n    const lowerName = drugName.toLowerCase();\n    \n    for (const opioid of opioids) {\n      if (lowerName.includes(opioid)) {\n        // Look for dose pattern like \"oxycodone 7.5 MG\" or \"oxycodone hydrochloride 10 MG\"\n        const regex = new RegExp(`${opioid}[^\\\\d]*(\\\\d+(?:\\\\.\\\\d+)?)\\\\s*mg`, 'i');\n        const match = drugName.match(regex);\n        if (match) {\n          const dose = parseFloat(match[1]);\n          return {\n            doseMgPerDose: dose,\n            dosesPerDay: dose <= 5 ? 6 : dose <= 15 ? 4 : 3  // Reasonable defaults based on strength\n          };\n        }\n      }\n    }\n    return {};\n  };\n\n  async function calcMME() {\n    setLoading(true); setError(null);\n    try {\n      const resp = await fetch(`${apiBase}/pain/opiates/mme`, {\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ medications, patient_context: patient })\n      });\n      if (!resp.ok) throw new Error(`MME error: ${resp.status}`);\n      const data = await resp.json();\n      setMmeResult(data);\n    } catch (e: any) {\n      setError(e?.message || 'Failed to calculate MME');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function safetyCheck() {\n    setLoading(true); setError(null);\n    try {\n      const resp = await fetch(`${apiBase}/pain/opiates/safety-check`, {\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ medications, phenotypes, patient_context: patient })\n      });\n      if (!resp.ok) throw new Error(`Safety error: ${resp.status}`);\n      const data = await resp.json();\n      setSafetyResult(data);\n    } catch (e: any) {\n      setError(e?.message || 'Failed to run safety check');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Debounced live safety preview while editing\n  useEffect(() => {\n    if (liveSafetyTimer.current) clearTimeout(liveSafetyTimer.current);\n    liveSafetyTimer.current = setTimeout(async () => {\n      try {\n        if (!medications.length) { setLiveSafety(null); return; }\n        const resp = await fetch(`${apiBase}/pain/opiates/safety-check`, {\n          method: 'POST', headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ medications, phenotypes, patient_context: patient })\n        });\n        if (!resp.ok) throw new Error('');\n        const data = await resp.json();\n        setLiveSafety({ findings: data.findings || [], recommendations: data.recommendations || [] });\n      } catch {\n        setLiveSafety(null);\n      }\n    }, 600);\n    return () => clearTimeout(liveSafetyTimer.current);\n  }, [apiBase, medications, patient, phenotypes]);\n\n  async function testConnectivity() {\n    try {\n      setConnTesting(true);\n      const resp = await fetch(`${apiBase}/drugs/suggestions?q=asp&limit=1`, { method: 'GET' });\n      if (!resp.ok) {\n        setConnStatus('error');\n      } else {\n        const data = await resp.json();\n        setConnStatus(data?.offline ? 'offline' : 'online');\n      }\n      setConnCheckedAt(new Date().toLocaleTimeString());\n    } catch (e) {\n      setConnStatus('error');\n      setConnCheckedAt(new Date().toLocaleTimeString());\n    } finally {\n      setConnTesting(false);\n    }\n  }\n\n  // Debounced live MME calculation while editing\n  useEffect(() => {\n    const t = setTimeout(async () => {\n      if (!autoMme) return;\n      try {\n        const resp = await fetch(`${apiBase}/pain/opiates/mme`, {\n          method: 'POST', headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ medications, patient_context: patient })\n        });\n        if (!resp.ok) return;\n        const data = await resp.json();\n        setMmeResult(data);\n      } catch {\n        // ignore live mme errors\n      }\n    }, 400);\n    return () => clearTimeout(t);\n  }, [apiBase, medications, patient, autoMme]);\n\n  // Determine per-row severity and reasons for inline highlighting\n  function rowHighlight(name: string): { severity: 'major' | 'moderate' | null, reasons: string[] } {\n    const n = (name || '').toLowerCase();\n    const names = medications.map(m => (m.name || '').toLowerCase());\n    const isOpioid = /(morphine|hydrocodone|oxycodone|hydromorphone|oxymorphone|codeine|tramadol|tapentadol|fentanyl|methadone|buprenorphine)/.test(n);\n    const isBenzo = /(diazepam|lorazepam|clonazepam|alprazolam|temazepam|midazolam)/.test(n);\n    const isZHyp = /(zolpidem|zopiclone|eszopiclone|zaleplon)/.test(n);\n    const isGaba = /(gabapentin|pregabalin)/.test(n);\n    const cyp3a4Inhibitors = /(ketoconazole|itraconazole|voriconazole|clarithromycin|erythromycin|ritonavir|cobicistat|diltiazem|verapamil|grapefruit)/;\n    const cyp3a4Inducers = /(rifampin|rifampicin|carbamazepine|phenytoin|phenobarbital|st\\.?\\s*john|nevirapine|efavirenz)/;\n    const qtAgents = /(amiodarone|sotalol|quinolone|ciprofloxacin|levofloxacin|ondansetron|haloperidol|ziprasidone|citalopram)/;\n    const reasons: string[] = [];\n    let severity: 'major' | 'moderate' | null = null;\n\n    // Opioid + benzo/Z-drug\n    if ((isOpioid && (names.some(x => /(diazepam|lorazepam|clonazepam|alprazolam|temazepam|midazolam|zolpidem|zopiclone|eszopiclone|zaleplon)/.test(x)))) ||\n        ((isBenzo || isZHyp) && names.some(x => /(morphine|hydrocodone|oxycodone|hydromorphone|oxymorphone|codeine|tramadol|tapentadol|fentanyl|methadone|buprenorphine)/.test(x)))) {\n      severity = 'major';\n      reasons.push('Opioid + benzo/Z-drug');\n    }\n\n    // Opioid + gabapentinoid\n    if ((isOpioid && names.some(x => /(gabapentin|pregabalin)/.test(x))) || (isGaba && names.some(x => /(morphine|hydrocodone|oxycodone|hydromorphone|oxymorphone|codeine|tramadol|tapentadol|fentanyl|methadone|buprenorphine)/.test(x)))) {\n      severity = severity || 'moderate';\n      reasons.push('Opioid + gabapentinoid');\n    }\n\n    // CYP3A4 inhibitor/inducer with substrate opioid\n    const is3a4SubOpioid = /(oxycodone|fentanyl|methadone|hydrocodone)/.test(n);\n    if ((is3a4SubOpioid && names.some(x => cyp3a4Inhibitors.test(x))) || (cyp3a4Inhibitors.test(n) && names.some(x => /(oxycodone|fentanyl|methadone|hydrocodone)/.test(x)))) {\n      severity = 'major';\n      reasons.push('CYP3A4 inhibitor present');\n    }\n    if ((is3a4SubOpioid && names.some(x => cyp3a4Inducers.test(x))) || (cyp3a4Inducers.test(n) && names.some(x => /(oxycodone|fentanyl|methadone|hydrocodone)/.test(x)))) {\n      severity = severity || 'moderate';\n      reasons.push('CYP3A4 inducer present');\n    }\n\n    // Methadone + QT drugs\n    if ((/methadone/.test(n) && names.some(x => qtAgents.test(x))) || (qtAgents.test(n) && names.some(x => /methadone/.test(x)))) {\n      severity = 'major';\n      reasons.push('QT-prolonging agents with methadone');\n    }\n\n    // Renal impairment with morphine/codeine\n    if (typeof patient.renal_clearance === 'number' && patient.renal_clearance < 30 && /(morphine|codeine)/.test(n)) {\n      severity = severity || 'moderate';\n      reasons.push('CrCl < 30 with morphine/codeine');\n    }\n\n    // CYP2D6 PM/IM with codeine or tramadol\n    const cyp2d6 = String(phenotypes.CYP2D6 || '').toLowerCase();\n    if ((/codeine|tramadol/.test(n)) && (cyp2d6.includes('poor') || cyp2d6.includes('intermediate'))) {\n      severity = severity || 'major';\n      reasons.push('CYP2D6 PM/IM reduces activation');\n    }\n    return { severity, reasons };\n  }\n\n  // Detailed info and references for badges\n  const reasonDetails: Record<string, { text: string; url?: string }> = {\n    'Opioid + benzo/Z-drug': {\n      text: 'Additive CNS/respiratory depression; avoid co-prescribing or use lowest doses and consider naloxone.',\n      url: 'https://www.cdc.gov/mmwr/volumes/71/rr/rr7103a1.htm'\n    },\n    'Opioid + gabapentinoid': {\n      text: 'Increased sedation/respiratory depression; FDA warns of serious breathing problems with co-use.',\n      url: 'https://www.fda.gov/drugs/drug-safety-and-availability/fda-warns-about-serious-breathing-problems-seizure-and-nerve-pain-medicines-gabapentin-neurontin'\n    },\n    'CYP3A4 inhibitor present': {\n      text: 'CYP3A4 inhibitors can raise levels of oxycodone/fentanyl/methadone → overdose risk; reduce dose/avoid and monitor.',\n      url: 'https://www.accessdata.fda.gov/drugsatfda_docs/label/2013/019516s074lbl.pdf'\n    },\n    'CYP3A4 inducer present': {\n      text: 'Inducers may lower opioid exposure → loss of analgesia or withdrawal; avoid or monitor closely.',\n      url: 'https://www.accessdata.fda.gov/drugsatfda_docs/label/2013/019516s074lbl.pdf'\n    },\n    'QT-prolonging agents with methadone': {\n      text: 'Additive QT prolongation → torsades risk; baseline/follow-up ECG and electrolytes; avoid if possible.',\n      url: 'https://www.fda.gov/drugs/postmarket-drug-safety-information-patients-and-providers/methadone-information'\n    },\n    'CrCl < 30 with morphine/codeine': {\n      text: 'Active metabolites accumulate in renal impairment; prefer alternatives (e.g., hydromorphone/fentanyl).'\n    },\n    'CYP2D6 PM/IM reduces activation': {\n      text: 'Codeine/tramadol require CYP2D6 for activation; poor/intermediate metabolizers have reduced analgesia (CPIC).',\n      url: 'https://cpicpgx.org/guidelines/guideline-for-codeine-and-cyp2d6/'\n    }\n  };\n\n  return (\n    <div className=\"p-4 lg:p-6\">\n      <div className=\"flex items-center space-x-3 mb-4\">\n        <div className=\"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center\">\n          <Pill className=\"w-6 h-6 text-white\" />\n        </div>\n        <div>\n          <h1 className=\"text-xl font-semibold text-gray-900\">Pain Management</h1>\n          <p className=\"text-sm text-gray-500\">Opioid MME calculator and safety screening</p>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-3 border border-red-200 bg-red-50 text-red-700 rounded\">\n          <div className=\"flex items-center space-x-2\"><AlertTriangle className=\"w-4 h-4\" /><span>{error}</span></div>\n        </div>\n      )}\n\n      {/* Connectivity status + test */}\n      <div className=\"flex items-center justify-start mb-3\">\n        <div className=\"inline-flex items-center gap-3 text-xs text-gray-600 bg-gray-50 border border-gray-200 rounded px-3 py-2\">\n          <div className=\"inline-flex items-center gap-2\">\n            <span className={`inline-block w-2.5 h-2.5 rounded-full ${\n              connStatus === 'online' ? 'bg-green-500' : connStatus === 'offline' ? 'bg-amber-500' : connStatus === 'error' ? 'bg-red-500' : 'bg-gray-400'\n            }`} />\n            <span>\n              {connStatus === 'online' && 'RxNorm connectivity: Online'}\n              {connStatus === 'offline' && 'RxNorm connectivity: Offline (fallback)'}\n              {connStatus === 'error' && 'RxNorm connectivity: Error'}\n              {connStatus === 'unknown' && 'RxNorm connectivity: Unknown'}\n              {connCheckedAt ? ` • Checked ${connCheckedAt}` : ''}\n            </span>\n          </div>\n          <button\n            onClick={testConnectivity}\n            disabled={connTesting}\n            className=\"text-blue-700 hover:text-blue-800 underline disabled:opacity-60\"\n          >\n            {connTesting ? 'Testing…' : 'Test connectivity'}\n          </button>\n        </div>\n      </div>\n\n      {/* Medications input */}\n      <div className=\"bg-white border border-gray-200 rounded-lg p-4 mb-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h2 className=\"text-base font-medium text-gray-900\">Opioid Regimen</h2>\n          <button onClick={addMedication} className=\"inline-flex items-center px-2 py-1 text-sm rounded bg-gray-100 hover:bg-gray-200\">\n            <Plus className=\"w-4 h-4 mr-1\" /> Add\n          </button>\n        </div>\n        <div className=\"space-y-3\">\n          {medications.map((m, idx) => {\n            const { severity: sev, reasons } = rowHighlight(m.name);\n            const sevClass = sev === 'major' ? 'bg-red-50 border-red-200' : sev === 'moderate' ? 'bg-amber-50 border-amber-200' : '';\n            return (\n            <div key={idx} className={`grid grid-cols-12 gap-2 items-end border rounded-md p-2 ${sevClass}`}>\n              <div className=\"col-span-3\">\n                <label className=\"text-xs text-gray-600\">Medication</label>\n                <DrugAutocomplete\n                  apiBase={apiBase}\n                  value={m.name}\n                  onChange={(name) => updateMedication(idx, { name, rxcui: undefined })}\n                  onSelect={(drug) => {\n                    const doseInfo = extractDoseFromName(drug.name);\n                    updateMedication(idx, { name: drug.name, rxcui: drug.rxcui, ...doseInfo });\n                  }}\n                />\n                {m.rxcui && <div className=\"text-[11px] text-gray-500 mt-1\">RXCUI: {m.rxcui}</div>}\n                {sev && reasons.length > 0 && (\n                  <div className=\"mt-1 flex flex-wrap gap-1 items-center\">\n                    {reasons.slice(0, 3).map((r, i) => {\n                      const info = reasonDetails[r];\n                      const badge = (\n                        <span className={`text-[10px] px-2 py-0.5 rounded ${sev === 'major' ? 'bg-red-100 text-red-800' : 'bg-amber-100 text-amber-800'}`}>{r}</span>\n                      );\n                      return (\n                        <span key={i} className=\"inline-flex items-center gap-1\">\n                          {info ? (\n                            <Tooltip content={`${r}: ${info.text}`} position=\"top\">{badge}</Tooltip>\n                          ) : badge}\n                          {info?.url && (\n                            <a href={info.url} target=\"_blank\" rel=\"noreferrer\" className=\"text-gray-500 hover:text-gray-700\" aria-label=\"Learn more\">\n                              <ExternalLink className=\"w-3 h-3\" />\n                            </a>\n                          )}\n                        </span>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className=\"col-span-2\">\n                <label className=\"text-xs text-gray-600\">Route</label>\n                <select value={m.route || 'oral'} onChange={e => updateMedication(idx, { route: e.target.value as any })}\n                  className=\"w-full border rounded px-2 py-1 text-sm\">\n                  <option value=\"oral\">Oral</option>\n                  <option value=\"transdermal\">Transdermal</option>\n                  <option value=\"sublingual\">Sublingual</option>\n                  <option value=\"buccal\">Buccal</option>\n                  <option value=\"iv\">IV</option>\n                  <option value=\"im\">IM</option>\n                </select>\n              </div>\n              <div className=\"col-span-2\">\n                <label className=\"text-xs text-gray-600\">Dose mg per dose</label>\n                <input type=\"number\" value={m.doseMgPerDose ?? ''} onChange={e => updateMedication(idx, { doseMgPerDose: e.target.value === '' ? undefined : Number(e.target.value) })}\n                  className=\"w-full border rounded px-2 py-1 text-sm\" placeholder=\"e.g., 10\" />\n              </div>\n              <div className=\"col-span-2\">\n                <label className=\"text-xs text-gray-600\">Doses per day</label>\n                <input type=\"number\" value={m.dosesPerDay ?? ''} onChange={e => updateMedication(idx, { dosesPerDay: e.target.value === '' ? undefined : Number(e.target.value) })}\n                  className=\"w-full border rounded px-2 py-1 text-sm\" placeholder=\"e.g., 3\" />\n              </div>\n              <div className=\"col-span-2\">\n                <label className=\"text-xs text-gray-600\">Fentanyl mcg/hr</label>\n                <input type=\"number\" value={m.strengthMcgPerHr ?? ''} onChange={e => updateMedication(idx, { strengthMcgPerHr: e.target.value === '' ? undefined : Number(e.target.value) })}\n                  className=\"w-full border rounded px-2 py-1 text-sm\" placeholder=\"e.g., 25\" />\n              </div>\n              <div className=\"col-span-1 flex justify-end\">\n                <button onClick={() => removeMedication(idx)} className=\"p-2 text-gray-500 hover:text-red-600\"><Trash2 className=\"w-4 h-4\" /></button>\n              </div>\n            </div>\n          );})}\n        </div>\n\n        {/* Live safety preview */}\n        {liveSafety && (liveSafety.findings?.length > 0 || liveSafety.recommendations?.length > 0) && (\n          <div className=\"mt-4 border border-amber-200 bg-amber-50 rounded p-3\">\n            <div className=\"text-sm font-medium text-amber-800\">Live safety preview</div>\n            <ul className=\"mt-1 text-sm text-amber-800 list-disc pl-5\">\n              {liveSafety.findings?.slice(0, 4).map((f, i) => (\n                <li key={i}>{f.issue} ({f.severity})</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      {/* Patient context */}\n      <div className=\"bg-white border border-gray-200 rounded-lg p-4 mb-4\">\n        <h2 className=\"text-base font-medium text-gray-900 mb-3\">Patient Context</h2>\n        <div className=\"grid grid-cols-12 gap-3\">\n          <div className=\"col-span-2\">\n            <label className=\"text-xs text-gray-600\">Age</label>\n            <input type=\"number\" value={patient.age ?? ''} onChange={e => setPatient({ ...patient, age: e.target.value === '' ? undefined : Number(e.target.value) })}\n              className=\"w-full border rounded px-2 py-1 text-sm\" />\n          </div>\n          <div className=\"col-span-3\">\n            <label className=\"text-xs text-gray-600\">Renal clearance (CrCl mL/min)</label>\n            <input type=\"number\" value={patient.renal_clearance ?? ''} onChange={e => setPatient({ ...patient, renal_clearance: e.target.value === '' ? undefined : Number(e.target.value) })}\n              className=\"w-full border rounded px-2 py-1 text-sm\" />\n          </div>\n          <div className=\"col-span-2 flex items-center space-x-2 mt-5\">\n            <input id=\"resp\" type=\"checkbox\" checked={!!patient.respiratory} onChange={e => setPatient({ ...patient, respiratory: e.target.checked })} />\n            <label htmlFor=\"resp\" className=\"text-sm text-gray-700\">Respiratory disease</label>\n          </div>\n          <div className=\"col-span-2 flex items-center space-x-2 mt-5\">\n            <input id=\"osa\" type=\"checkbox\" checked={!!patient.sleep_apnea} onChange={e => setPatient({ ...patient, sleep_apnea: e.target.checked })} />\n            <label htmlFor=\"osa\" className=\"text-sm text-gray-700\">OSA</label>\n          </div>\n          <div className=\"col-span-2 flex items-center space-x-2 mt-5\">\n            <input id=\"preg\" type=\"checkbox\" checked={!!patient.pregnancy} onChange={e => setPatient({ ...patient, pregnancy: e.target.checked })} />\n            <label htmlFor=\"preg\" className=\"text-sm text-gray-700\">Pregnancy</label>\n          </div>\n        </div>\n        <div className=\"mt-3 grid grid-cols-12 gap-3\">\n          <div className=\"col-span-4\">\n            <label className=\"text-xs text-gray-600\">Phenotype: CYP2D6</label>\n            <select value={phenotypes.CYP2D6 || ''} onChange={e => setPhenotypes({ ...phenotypes, CYP2D6: e.target.value })}\n              className=\"w-full border rounded px-2 py-1 text-sm\">\n              <option value=\"\">Unknown</option>\n              <option value=\"ultrarapid_metabolizer\">Ultrarapid metabolizer</option>\n              <option value=\"normal_metabolizer\">Normal metabolizer</option>\n              <option value=\"intermediate_metabolizer\">Intermediate metabolizer</option>\n              <option value=\"poor_metabolizer\">Poor metabolizer</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex items-center flex-wrap gap-2 mb-4\">\n        <button onClick={calcMME} disabled={loading} className=\"inline-flex items-center px-3 py-2 rounded bg-primary-600 text-white hover:bg-primary-700\">\n          <Pill className=\"w-4 h-4 mr-2\" /> Calculate MME\n        </button>\n        <button onClick={safetyCheck} disabled={loading} className=\"inline-flex items-center px-3 py-2 rounded bg-gray-800 text-white hover:bg-gray-900\">\n          <Stethoscope className=\"w-4 h-4 mr-2\" /> Safety Check\n        </button>\n        <label className=\"inline-flex items-center text-sm text-gray-700 ml-2\">\n          <input type=\"checkbox\" className=\"mr-2\" checked={autoMme} onChange={e => setAutoMme(e.target.checked)} />\n          Auto-calc MME\n        </label>\n      </div>\n\n      {/* Results */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">MME Result</h3>\n          {mmeResult ? (\n            <div>\n              <div className=\"text-2xl font-bold text-gray-900\">{mmeResult.totalMME} MME/day</div>\n              {/* Buprenorphine note */}\n              {medications.some(m => /buprenorphine/i.test(m.name)) && (\n                <div className=\"mt-1 text-[12px] text-gray-600\">Note: Buprenorphine is excluded from MME.</div>\n              )}\n              {mmeResult.riskFlags?.length > 0 && (\n                <ul className=\"mt-2 text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded p-2\">\n                  {mmeResult.riskFlags.map((r: string, i: number) => (<li key={i}>• {r}</li>))}\n                </ul>\n              )}\n              {mmeResult.recommendations?.length > 0 && (\n                <ul className=\"mt-2 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded p-2\">\n                  {mmeResult.recommendations.map((r: string, i: number) => (<li key={i}>• {r}</li>))}\n                </ul>\n              )}\n              <div className=\"mt-3\">\n                <table className=\"w-full text-sm\">\n                  <thead>\n                    <tr className=\"text-left text-gray-500\">\n                      <th className=\"py-1\">Medication</th>\n                      <th className=\"py-1\">Route</th>\n                      <th className=\"py-1 text-right\">MME/day</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {mmeResult.perMedication?.map((d: any, i: number) => (\n                      <tr key={i} className=\"border-t\">\n                        <td className=\"py-1\">{d.name}</td>\n                        <td className=\"py-1\">{d.route}</td>\n                        <td className=\"py-1 text-right\">{d.mmePerDay}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-sm text-gray-500\">No calculation yet.</div>\n          )}\n        </div>\n        <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">Safety Findings</h3>\n          {/* Legend */}\n          <div className=\"mb-2 flex items-center gap-3 text-xs text-gray-600\">\n            <div className=\"flex items-center gap-1\"><span className=\"inline-block w-3 h-3 bg-red-200 border border-red-300 rounded\"></span> Major risk</div>\n            <div className=\"flex items-center gap-1\"><span className=\"inline-block w-3 h-3 bg-amber-200 border border-amber-300 rounded\"></span> Moderate risk</div>\n          </div>\n          {safetyResult ? (\n            <div>\n              {safetyResult.findings?.length ? (\n                <ul className=\"space-y-2\">\n                  {safetyResult.findings.map((f: any, i: number) => (\n                    <li key={i} className=\"border rounded p-2\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {f.issue}{' '}\n                        <span className={`ml-2 text-xs px-2 py-0.5 rounded ${f.severity === 'major' ? 'bg-red-100 text-red-700' : 'bg-amber-100 text-amber-700'}`}>{f.severity}</span>\n                      </div>\n                      {f.explanation && (\n                        <div className=\"text-xs text-gray-600 mt-1\">{f.explanation}</div>\n                      )}\n                      <div className=\"text-sm text-gray-700\">{f.recommendation}</div>\n                      {Array.isArray(f.references) && f.references.length > 0 && (\n                        <div className=\"mt-1 flex flex-wrap gap-2\">\n                          {f.references.map((ref: any, ri: number) => (\n                            <a key={ri} href={ref.url} target=\"_blank\" rel=\"noreferrer\" className=\"text-xs text-blue-700 hover:underline inline-flex items-center gap-1\">\n                              <ExternalLink className=\"w-3 h-3\" /> {ref.label || 'Reference'}\n                            </a>\n                          ))}\n                        </div>\n                      )}\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <div className=\"text-sm text-gray-500\">No significant risks detected.</div>\n              )}\n              {safetyResult.recommendations?.length > 0 && (\n                <ul className=\"mt-2 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded p-2\">\n                  {safetyResult.recommendations.map((r: string, i: number) => (<li key={i}>• {r}</li>))}\n                </ul>\n              )}\n            </div>\n          ) : (\n            <div className=\"text-sm text-gray-500\">No safety screening yet.</div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"mt-6 text-xs text-gray-500\">\n        For clinical decision support only; verify with current guidelines.\n      </div>\n    </div>\n  );\n}\n\n// Drug autocomplete using RxNorm-backed API\nfunction DrugAutocomplete({ apiBase, value, onChange, onSelect }: {\n  apiBase: string;\n  value: string;\n  onChange: (v: string) => void;\n  onSelect: (d: { name: string; rxcui: string }) => void;\n}) {\n  const [q, setQ] = useState(value || '');\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [items, setItems] = useState<Array<{ name: string; rxcui: string }>>([]);\n  const timer = useRef<any>(null);\n  const [offlineSuggestions, setOfflineSuggestions] = useState(false);\n\n  useEffect(() => { setQ(value || ''); }, [value]);\n\n  useEffect(() => {\n    if (timer.current) clearTimeout(timer.current);\n    if (!q || q.trim().length < 2) { setItems([]); setOpen(false); return; }\n    timer.current = setTimeout(async () => {\n      setLoading(true);\n      try {\n        const resp = await fetch(`${apiBase}/drugs/suggestions?q=${encodeURIComponent(q)}&limit=8`);\n        if (resp.ok) {\n          const data = await resp.json();\n          const list = (data.suggestions || [])\n            .map((s: any) => ({ name: s.name, rxcui: s.rxcui }))\n            .filter((d: any) => d.name);\n          setOfflineSuggestions(!!data.offline);\n          setItems(list);\n          setOpen(true);\n        } else {\n          setItems([]);\n          setOpen(false);\n          setOfflineSuggestions(false);\n        }\n      } catch {\n        setItems([]); setOpen(false);\n        setOfflineSuggestions(false);\n      } finally {\n        setLoading(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer.current);\n  }, [apiBase, q]);\n\n  return (\n    <div className=\"relative\">\n      <input\n        value={q}\n        onChange={(e) => { setQ(e.target.value); onChange(e.target.value); }}\n        onFocus={() => items.length && setOpen(true)}\n        onBlur={() => setTimeout(() => setOpen(false), 200)}\n        className=\"w-full border rounded px-2 py-1 text-sm\"\n        placeholder=\"e.g., oxycodone\"\n        aria-autocomplete=\"list\"\n        aria-expanded={open}\n      />\n      {open && (\n        <div className=\"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded shadow\">\n          {offlineSuggestions && (\n            <div className=\"px-2 py-1 text-[11px] text-gray-600 bg-gray-50 border-b border-gray-100\">Using offline suggestions (RxNorm unavailable)</div>\n          )}\n          {loading && <div className=\"p-2 text-xs text-gray-500\">Searching…</div>}\n          {!loading && items.length === 0 && <div className=\"p-2 text-xs text-gray-500\">No matches</div>}\n          {!loading && items.map((it, i) => (\n            <button\n              key={it.rxcui + i}\n              type=\"button\"\n              onMouseDown={(e) => {\n                e.preventDefault();\n                onSelect(it);\n                setQ(it.name);\n                setOpen(false);\n              }}\n              onClick={() => { onSelect(it); setQ(it.name); setOpen(false); }}\n              className=\"w-full text-left px-2 py-1 text-sm hover:bg-gray-100\"\n            >\n              <div className=\"flex justify-between\">\n                <span>{it.name}</span>\n                <span className=\"text-[11px] text-gray-500\">{it.rxcui}</span>\n              </div>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["Pain","apiBase","useMemo","apiBaseUrl","medications","setMedications","useState","patient","setPatient","phenotypes","setPhenotypes","mmeResult","setMmeResult","safetyResult","setSafetyResult","liveSafety","setLiveSafety","liveSafetyTimer","useRef","autoMme","setAutoMme","loading","setLoading","error","setError","connStatus","setConnStatus","connTesting","setConnTesting","connCheckedAt","setConnCheckedAt","addMedication","prev","removeMedication","idx","_","i","updateMedication","patch","m","extractDoseFromName","drugName","opioids","lowerName","opioid","regex","match","dose","calcMME","resp","data","e","safetyCheck","useEffect","testConnectivity","rowHighlight","name","n","names","isOpioid","isBenzo","isZHyp","isGaba","cyp3a4Inhibitors","cyp3a4Inducers","qtAgents","reasons","severity","x","is3a4SubOpioid","cyp2d6","reasonDetails","jsxs","jsx","Pill","AlertTriangle","Plus","sev","sevClass","DrugAutocomplete","drug","doseInfo","info","badge","Tooltip","ExternalLink","Trash2","f","Stethoscope","r","d","ref","ri","value","onChange","onSelect","q","setQ","open","setOpen","items","setItems","timer","offlineSuggestions","setOfflineSuggestions","list","s","it"],"mappings":"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"}